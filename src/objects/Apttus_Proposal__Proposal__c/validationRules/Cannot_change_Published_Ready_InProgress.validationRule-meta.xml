<?xml version="1.0" encoding="UTF-8"?>
<ValidationRule xmlns="http://soap.sforce.com/2006/04/metadata">
    <fullName>Cannot_change_Published_Ready_InProgress</fullName>
    <active>true</active>
    <errorConditionFormula>OR
(
AND(
$Profile.Name &lt;&gt; &quot;Data Loader Profile&quot;,
$Profile.Name &lt;&gt; &quot;Integration API Only Profile&quot;,
$Profile.Name &lt;&gt; &quot;System Administrator&quot;,
$Profile.Name &lt;&gt; &quot;Global Process Admin Profile&quot;,
$Profile.Name &lt;&gt; &quot;Digital Sales Customer Profile&quot;,
NOT($Permission.DS_Business_Center_Admin),
NOT($Permission.DS_GDC),
NOT($Permission.SWX_CCRE_Account_manager),
CONTAINS(Quote_Type__c, &quot;Direct DS&quot;),
ISCHANGED(Apttus_Proposal__Approval_Stage__c ),
OR(
Text(Apttus_Proposal__Approval_Stage__c) = &apos;Published - Ready&apos;,
Text(Apttus_Proposal__Approval_Stage__c) = &apos;Published - In progress&apos;
)
),
AND
(
OR
(
$Profile.Name = &quot;Digital Sales Customer Profile&quot;,
AND(
$Permission.DS_GDC,
NOT($Permission.SWX_CCRE_Account_manager)
)
),
ISCHANGED(Apttus_Proposal__Approval_Stage__c ),
OR
(
ISPICKVAL(PRIORVALUE( Apttus_Proposal__Approval_Stage__c ), &apos;Approved&apos;),
ISPICKVAL(PRIORVALUE( Apttus_Proposal__Approval_Stage__c ), &apos;Published - Ready&apos;),
ISPICKVAL(PRIORVALUE( Apttus_Proposal__Approval_Stage__c ), &apos;Published - In progress&apos;)
),
NOT(Text(Apttus_Proposal__Approval_Stage__c) = &apos;Approved&apos;),
NOT(Text(Apttus_Proposal__Approval_Stage__c) = &apos;Published - Ready&apos;),
NOT(Text(Apttus_Proposal__Approval_Stage__c) = &apos;Published - In progress&apos;),
NOT(Text(Apttus_Proposal__Approval_Stage__c) = &apos;Call-off Ready&apos;),
NOT(Text(Apttus_Proposal__Approval_Stage__c) = &apos;Accepted&apos;),
NOT(Text(Apttus_Proposal__Approval_Stage__c) = &apos;Rejected&apos;)
)
)</errorConditionFormula>
    <errorMessage>You are not allowed to change the Approval Stage to the requested value. Please modify it only among &quot;Approved&quot;, &quot;Published - In Progress&quot;, &quot;Published - Ready&quot;, &quot;Call-off Ready&quot;, &quot;&apos;Accepted&quot;, &quot;Rejected&quot;. In case of any issues, please contact Administrator</errorMessage>
</ValidationRule>
