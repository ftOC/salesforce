require=function e(t,n,i){function s(o,r){if(!n[o]){if(!t[o]){var d="function"==typeof require&&require;if(!r&&d)return d(o,!0);if(a)return a(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[o]={exports:{}};t[o][0].call(c.exports,function(e){var n=t[o][1][e];return s(n||e)},c,c.exports,e,t,n,i)}return n[o].exports}for(var a="function"==typeof require&&require,o=0;o<i.length;o++)s(i[o]);return s}({1:[function(e,t,n){(function(t,n,i,s,a,o,r,d,l){var c=window.enLocale,u=c.book_meeting,f=c.opt_in_messages,h=c.custom_labels,p=c.comments;initI18n(_.assign({},u,f,h,p));var m=e("common_api"),g=e("./Attendee/handler"),v=e("./Calendar/handler"),y=e("./Topic/handler"),w=e("./MeetingType/handler"),b=e("./MappingInMaking/handler"),S=e("./Sessions/handler"),M=e("./NominationView/handler");e("../commons/handlebarHelpers/math");var A=e("../UserForms/handler"),D=e("../CopyCustomerInfo/handler"),x=e("../Sfdc/SfdcLeads/handler"),k=e("../Sfdc/SfdcAccount/handler"),C=e("../utils"),E=e("./commonStore"),I=function(){envDetails.isTrackAndSessionMeetingType=function(){return masterMeetingType.name===window.TRACK_AND_SESSION},envDetails.isBookSession=function(){return!(masterMeetingType.name!==window.TRACK_AND_SESSION||!window.bookSession)},envDetails.isBookSessionEdit=function(){return!(!envDetails.isBookSession()||"edit"!==mode)},envDetails.isBookSessionView=function(){return!(!envDetails.isBookSession()||"view"!==mode)},envDetails.isNomination=function(){return!(!envDetails.isBookSessionView()&&!envDetails.isBookSessionEdit())},envDetails.isTrackMappingModule=function(){return masterMeetingType.name===window.TRACK_AND_SESSION&&!window.bookSession},envDetails.isGeneraMappingModule=function(){return masterMeetingType.name!==window.TRACK_AND_SESSION&&!window.bookSession},envDetails.shouldFetchCalendarUpdates=$("#scheduler_here").length,window.envDetails.isAbstractOnlyEditableMode=function(){return"true"===$.urlParam("abstract_only")},envDetails.isTrackMappingModule()?(v.init(),b.init(),w.init(),y.init()):envDetails.isBookSessionView()?(M.init(),D.init(),$(".js-activity-name").html(window.selectedActivityName)):envDetails.isBookSession()?(S.init(),A.init({callback:function(){window.isLeadsMeeting?"new"===mode?m.sfdcHandler.fetchLeadDetails().then(function(){x.init()}):x.init():k.init(),y.init(),g.init.apply(null,arguments)},templateName:"add_attendee_form",isNewUser:!0}),b.init(),D.init(),$(".js-activity-name").html(window.selectedActivityName)):envDetails.isGeneraMappingModule()&&(A.init({callback:function(){y.init(),g.init.apply(null,arguments)},templateName:"add_attendee_form",isNewUser:!0}),v.init(),b.init(),w.init(),D.init()),E.fetchCustomLabels(),setupUiI18n();var e=window.nominationInfo&&window.nominationInfo.request&&window.nominationInfo.request.invite_options;C.updateDeclineComments(e),setTimeout(function(){$(".meeting-detail-container").slideDown(800),envDetails.isBookSession()||$("#dark_nav_menu").find("a[id='mapping_module_tab']").tab("show"),$('[data-toggle="tooltip"]').tooltip()},1)};Handlebars.registerHelper("str_to_date",function(e,t){return moment(new Date(e)).format("ddd, MMM D, YYYY hh:mm A")}),Handlebars.registerHelper("keyExist",function(e,t){return null===e||e===undefined?t.inverse(this):t.fn(this)}),Handlebars.registerHelper("isFalse",function(e,t){return e&&e.toBoolean()?t.inverse(this):t.fn(this)}),Handlebars.registerHelper("canChangeRoom",function(e,t){return!1!==e?t.fn(this):t.inverse(this)}),Handlebars.registerHelper("isAttendeeRegistered",function(e,t,n){return e&&!t?n.fn(this):n.inverse(this)}),Handlebars.registerHelper("isAttendeeUnregistered",function(e,t,n){return e&&t?n.fn(this):n.inverse(this)}),Handlebars.registerHelper("roomCapacity",function(e,t){var n=e.capacity,i=e.not_declined_user_count,s=e.waitlisted_users,a="",o="",r="";if(s)a="waitlist",o=s+" in Waitlist",r="";else{var d=n-i;o=d+" "+pluralize("Seat",d),r="available",a=0===d?"not-available":"available"}return'<div>\n      <span class="session-slots '+a+'">'+o+"</span> "+r+" [Capacity: "+n+"]\n    </div>"}),$(document).ready(function(){if($(document).tooltip({trigger:"hover",selector:".js_tooltip"}),window.ReactMessage&&window.ReactMessage.mount(document.querySelector(".notification-mount")),"undefined"!=typeof jiffle){mode="new";var e=m.ENDPOINTS.fetch_meeting_info;"edit"===$.urlParam("mode")?(mode="edit",e=m.ENDPOINTS.fetch_edit_nomination_info):"view"===$.urlParam("mode")&&(mode="view",e=m.ENDPOINTS.fetch_view_nomination_info),m.sfdcHandler.bookMeetingInit({mode:mode,url:e},function(){window.isLeadsMeeting=x.isLeadsMeeting(),I()})}else I()})}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/app/scripts/MappingModule/app.js","/app/scripts/MappingModule")},{"../CopyCustomerInfo/handler":6,"../Sfdc/SfdcAccount/handler":35,"../Sfdc/SfdcLeads/handler":37,"../UserForms/handler":42,"../commons/handlebarHelpers/math":56,"../utils":61,"./Attendee/handler":10,"./Calendar/handler":13,"./MappingInMaking/handler":17,"./MeetingType/handler":21,"./NominationView/handler":23,"./Sessions/handler":25,"./Topic/handler":28,"./commonStore":30,_process:65,buffer:63,common_api:"common_api"}],2:[function(e,t,n){(function(e,n,i,s,a,o,r,d,l){var c=Reflux.createActions(["fetchInternal","fetchExternal","updateAttendeePreEndorsement","selectExternalAttendee","unselectExternalAttendee","selectInternalAttendee","unselectInternalAttendee","searchInternal","searchExternal","eventCreated","tabChanged","roleFilterChosen","removeFilters","filterInternal","filterExternal","createAttendee","editAttendees","canSelectAttendees","updateAreYouAttending","showAttendeesList","unselectAttendee","domainValidate","resetInternalAttendeeList","resetExternalAttendeeList","setExperts","resetAllAttendees","setAttendeeOptionsSetting","initiateNewMeeting","getattendeeSettings","updateIcsStatus","refreshExternalAttendees","copyAttendees","canReinviteAttendee","updateAttendeeAsHost","updatePersistRequestorAsHost","resetAndFetchInternalAttendees"]);t.exports=c}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/app/scripts/Book/Attendee/actions.js","/app/scripts/Book/Attendee")},{_process:65,buffer:63}],3:[function(e,t,n){(function(e,n,i,s,a,o,r,d,l){var c=function(){var e=$("#comments_modal"),t=e.find(".js-comments"),n=e.find(".js-others-comments"),i=e.find(".js-action-btn"),s=e.find(".comment-error"),a=e.find(".modal-title"),o=e.find(".note-footer"),r="Other",d=$.noop,l=[];function c(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];return e=e.filter(function(e){return e}),[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(e),[r]).map(function(e){return{id:e,text:e}})}function u(){var e=t.val();n[e===r?"removeClass":"addClass"]("hide").val(""),s.removeClass("show")}function f(i){i.preventDefault();var a=t.val();if(a===r){var o=function(){var e=n.val();return s[e?"removeClass":"addClass"]("show"),e}();if(!o)return;a=o}d(a),e.modal("hide")}return i.on("click",f),t.on("change",u),{show:function(n){var s=n.comments,r=s===undefined?[]:s,u=n.callback,f=u===undefined?d:u,h=n.type,p=h===undefined?"decline":h;d=f,function(e){l=c(e),t.data("select2")&&t.select2("destroy").html(""),t.select2({minimumResultsForSearch:-1,data:l,width:"100%"});var n=l[0].id;t.val(n).trigger("change")}(r),function(e){var t=i18n.t("comments_title",{type:e}),n=i18n.t("comments_"+e),s=i18n.t("comments_"+e+"_footer");a.text(t),i.text(n),o.html(s)}(p);var m=l[0].id;t.val(m).trigger("change"),e.modal({backdrop:"static"})}}}();t.exports=c}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/app/scripts/CommentsModal/index.js","/app/scripts/CommentsModal")},{_process:65,buffer:63}],4:[function(e,t,n){(function(n,i,s,a,o,r,d,l,c){$(document).ready(function(){initI18n(Object.assign({},enLocale.consent,enLocale.opt_in_messages)),$("#accept_consent_form").validate({errorElement:"div",highlight:function(e,t){$(e).parent().addClass("has-error")},success:function(e,t){$(t).parent().removeClass("has-error")},rules:{consent:{required:!0}},messages:{consent:{required:i18n.t("register_user_consent_missing_message")}}}),setupUiI18n()});var u=e("common_api");t.exports=function(e){$('#accept_consent_form input[name="consent"]').siblings("label").html(e.logged_in_consent_message),$("#accept_consent_form").on("submit",function(e){e.preventDefault();var t=$(e.currentTarget);if(t.valid()){var n=u.update({url:u.ENDPOINTS.portal+u.ENDPOINTS.give_consent,data:t.serializeObject()});n.then(function(e){200===e.status&&window.location.reload()}.bind(this)),n[n.fail?"fail":"catch"](function(e){console.log(e)}.bind(this))}})}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/app/scripts/Consent/app.js","/app/scripts/Consent")},{_process:65,buffer:63,common_api:"common_api"}],5:[function(e,t,n){(function(e,n,i,s,a,o,r,d,l){var c=Reflux.createActions(["fetchMeetings","fetchFields","searchMeetings","fetchCopyAttendeeMeetings","fetchMeetingAttendees"]);t.exports=c}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/app/scripts/CopyCustomerInfo/actions.js","/app/scripts/CopyCustomerInfo")},{_process:65,buffer:63}],6:[function(e,t,n){(function(n,i,s,a,o,r,d,l,c){var u=e("./actions"),f=e("./store"),h=e("../Book/Attendee/actions"),p=function(){var e,t,n,i=$(".copy-customer-info"),s=$(".js-meeting-search"),a=$(".import-customer-info"),o="hh:mm A",r="ddd, MMM D, YYYY",d="YYYY-MM-DD HH:mm A",l=$(".notification-modal"),c=$("#copy_customer_info_modal"),p=$("#copy_meeting_list"),m=$("#dynamic_form"),g=!0;var v={onFetchMeetingsSuccess:function(t){n=t,_.each(n,function(e){e.startTime=moment(e.start_time,d).format(o),e.endTime=moment(e.end_time,d).format(o),e.meetingDate=moment(e.start_time,d).format(r)});var n;var i=HandlebarsTemplates["book/copy_meeting_list"]({meetingList:t,showParticipants:f.getCopyAttendeeState()});p.html(i),c.modal({backdrop:"static"}),c.find("form").on("submit",function(){return!1}),e&&$("#meetingCard_"+e).prop("checked",!0)},onFetchFieldsSuccess:function(e){O(),_.isArray(e.data.results)&&m.formRenderer().copyValues(e.data.results)},showNoMeetingNotif:function(){var e=f.getCopyAttendeeState()?i18n.t("no_meetings_to_copy_attendee"):i18n.t("no_meetings_to_copy_body");l.notificationModal({type:"notification","class":"red",title:i18n.t("no_meetings_to_copy_title"),body:e})},showErrorMessage:function(){l.notificationModal({type:"notification","class":"red",title:i18n.t("failure"),body:i18n.t("something_went_wrong")})},onFetchMeetingAttendeesSuccess:function(e){O();var t=_.groupBy(e.data.items,"user_type");t.internal=t.internal||[],t.external=t.external||[],h.copyAttendees(t)},onCopyAttendees:function(e){var n=e.internalCount,i=e.externalCount,s=e.hasCurrUser;if(n||i){if(s){h.updateAreYouAttending("yes"),$("#attend-meeting-yes").prop("checked",!0),$("a","#attendingStatus").html(i18n.t("you_are_attending"));var a=envDetails.currentUser.first_name+" "+envDetails.currentUser.last_name+", ";$("#logged-in-user-label").text(a),$("div.blue-container").slideUp(),$("#attendingStatus").find(".jif-dropright-filled").removeClass("hide").next().addClass("hide")}$("#attendee-label").closest(".header-right").removeClass("hide");var o=_.find(scheduler._events,function(e){return"existing-briefing-meeting"!=e.type});o&&scheduler.deleteEvent(o.id)}!function(e){var n=f.getInternalParticipantsCount(),i=f.getExternalParticipantsCount(),s=e.internalCount,a=e.externalCount,o=s+" out of "+n+" internal attendee(s) have been copied.",r=a+" out of "+i+" external attendee(s) have been copied.";1==t.isInternalAttendeesHidden()&&(e.hasCurrUser&&0!=s||(o=""));(t.isExternalAttendeesHidden()||window.isEBCEvent)&&(r="");var d="";o&&(d+=o+"<br>");r&&(d+=r);l.notificationModal({type:"notification","class":"green",title:i18n.t("success"),body:d})}(e)}};function y(){var e=_.find($("input[type='radio'][name='meetingCard']"),function(e){return $(e).is(":checked")});return $(e).data("uuid")}function w(){if(y())if(f.getCopyAttendeeState())f.resetParticipantsCount(),u.fetchMeetingAttendees(S());else{var e=!1;l.notificationModal({type:"confirmation","class":"blue",body:i18n.t($("#meetingCard_"+y()).data("activity-uuid")===(envDetails.isConsecutiveMeeting?selectedConsecutiveUuid:selectedActivityUuid)?"confirmation_for_import_customer_info":"confirmation_for_import_customer_info_for_cross_meeting_type",{meetingWithLabel:$("#meeting_with").closest(".form-group").find("label").text()}),title:i18n.t("are_you_sure"),done:function(){e=!0},dismiss:function(){e&&u.fetchFields(S()),b()}})}else l.notificationModal({type:"notification","class":"yellow",title:(t=f.getCopyAttendeeState()?i18n.t("copy_attendees"):i18n.t("copy_details"),i18n.t("pls_select_meeting_title",{info:t})),body:function(){var e=f.getCopyAttendeeState()?i18n.t("copy_attendees"):i18n.t("copy_customer_info");return i18n.t("pls_select_meeting_body",{info:e})}(),dismiss:function(){b()}});var t}function b(){$("body").addClass("modal-open")}function S(){var e={};return _.extend(e,k(),C(),{selected_resource_uuid:y()}),f.getCopyAttendeeState()&&(_.extend(e,function(){var e={topic_uuid:""};if(envDetails.topicManagementEnabled&&envDetails.topicUserMappingEnabled)if("undefined"!=typeof topic_uuid)e.topic_uuid=topic_uuid;else if("new"===mode){var t=$("#topic_management").val();"-"===t&&(t=""),e.topic_uuid=t}else e.topic_uuid=meetingInfo.request.topic_uuid;return e}(),M(),{ignore_activity:!0,user_type:"internal"}),envDetails.isConsecutiveMeeting&&_.extend(e,n.getRemainingMeetingsData(),{activity_uuid:selectedActivityUuid})),e}function M(){var e=envDetails.isBookSessionEdit&&envDetails.isBookSessionEdit()?"nomination":"meeting";return{meeting_request:"edit"==mode?window[e+"Info"].request.uuid:""}}function A(){var t=$(this).val();e=y(),u.searchMeetings(x(),t)}function D(){f.setCopyAttendeeState($(this).hasClass("js-copy-attendee")),g=!0,E()}function x(){var e={};return _.extend(e,k(),function(){if(envDetails.isBookSession&&envDetails.isBookSession())return{uuid:nominationInfo.request.uuid};if(envDetails.isConsecutiveMeeting)return{uuid:envDetails.consecutive_meeting_uuid};if(meetingInfo&&meetingInfo.request)return{uuid:meetingInfo.request.uuid}}(),C(),M()),e}function k(){return{activity_uuid:envDetails.isConsecutiveMeeting?selectedConsecutiveUuid:selectedActivityUuid}}function C(){if(envDetails.isBookSession&&envDetails.isBookSession()){var e=_.find($("input[name='sessionCard']"),function(e){return $(e).prop("checked")});return{additional_params:{session_uuid:$(e).data("uuid")}}}return{additional_params:{}}}function E(){f.getCurrentPage()<=f.getTotalPageCount()&&g&&(e=y(),u.fetchMeetings(x(),f.getCurrentPage()))}function I(){p.scrollTop(0,0),s.val(""),e="",g=!1,$("input[type='radio'][name='meetingCard']").prop("checked",!1),f.setCurrentPage(1),f.setTotalPageCount(1),f.resetMeetingList(),f.resetFilter(),f.setCopyAttendeeState(!1)}function T(){var e=f.getCopyAttendeeState()?i18n.t("copy_attendees"):i18n.t("copy_information");c.find(".js-copy-model-header").html(i18n.t("select_meeting_you_want_to_copy",{info:e}))}function O(){c.modal("hide")}return{init:function(e,o){t=e,n=o,"view"===mode||$("#sf-jiffle-now").length||mapping_module?i.addClass("hide"):(f.listen(function(e){var t=v[e.type];t&&t(e.data)}),t&&t.listen(function(e){var t=v[e.type];t&&t(e)}),i.on("click",D),c.on("hide.bs.modal",I),c.on("show.bs.modal",T),s.on("keyup",_.debounce(A,500)),a.on("click",w),p.infiniteScroll({offset:200,callback:E}))}}}();t.exports=p}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/app/scripts/CopyCustomerInfo/handler.js","/app/scripts/CopyCustomerInfo")},{"../Book/Attendee/actions":2,"./actions":5,"./store":8,_process:65,buffer:63}],7:[function(e,t,n){(function(e,n,i,s,a,o,r,d,l){t.exports={initPaginationEntities:function(){this.current_page=1,this.total_pages=1,this.fetching=!1,this.per_page_meeting_count=10,this.totalMeetings=0,this.filters={},this.copyAttendee=!1,this.external_participants_count=0,this.internal_participants_count=0},fetchFirstPage:function(){this.setCurrentPage(1),this.resetMeetingList(),this.onFetchMeetings(1)},onSearchMeetings:function(e,t){this.filters.search=t,this.setCurrentPage(1),this.resetMeetingList(),this.onFetchMeetings(e,1)},resetFilter:function(){this.filters={}},getFetchState:function(){return this.fetching},updateFetchState:function(e){this.fetching=e},getCurrentPage:function(){return this.current_page},resetMeetingList:function(){this.meetings=[]},setCurrentPage:function(e){this.current_page=e},getTotalPageCount:function(){return this.total_pages},setTotalPageCount:function(e){this.total_pages=e},updateTotalMeetingCount:function(e){this.totalMeetings=e},setCopyAttendeeState:function(e){this.copyAttendee=e},getCopyAttendeeState:function(e){return this.copyAttendee},setExternalParticipantsCount:function(e){this.external_participants_count=e},getExternalParticipantsCount:function(e){return this.external_participants_count},setInternalParticipantsCount:function(e){this.internal_participants_count=e},getInternalParticipantsCount:function(e){return this.internal_participants_count},resetParticipantsCount:function(){this.setExternalParticipantsCount(0),this.setInternalParticipantsCount(0)}}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/app/scripts/CopyCustomerInfo/paginationStore.js","/app/scripts/CopyCustomerInfo")},{_process:65,buffer:63}],8:[function(e,t,n){(function(n,i,s,a,o,r,d,l,c){var u=e("./actions"),f=e("common_api"),h=e("./paginationStore"),p=Reflux.createStore({init:function(){this.listenToMany(u),this.meetings=[],this.initPaginationEntities()},mixins:[h],onFetchMeetings:function(e,t,n){if(0==this.getFetchState()){this.updateFetchState(!0),_.extend(e,{page:t,per_page:n||this.per_page_meeting_count,filters:this.filters});var i=this.getCopyAttendeeState()?f.ENDPOINTS.fetch_meeting_list_copy_attendee:f.ENDPOINTS.fetch_meeting_list_customer_info,s=f.fetch({url:i,data:e});s.then(function(e){this.meetings=this.meetings.concat(e.data.meeting_requests),this.updateFetchState(!1),this.meetings.length||!_.isEmpty(this.filters.search)?(this.setCurrentPage(this.getCurrentPage()+1),this.updateTotalMeetingCount(e.data.total_entries),this.setTotalPageCount(Math.ceil(e.data.total_entries/this.per_page_meeting_count)),this.trigger({type:"onFetchMeetingsSuccess",data:this.meetings})):this.trigger({type:"showNoMeetingNotif",data:e})}.bind(this)),s[s.fail?"fail":"catch"](function(){this.updateFetchState(!1),this.trigger({type:"showErrorMessage"})}.bind(this))}},onFetchFields:function(e){var t=f.fetch({url:f.ENDPOINTS.fetch_customer_info_values,data:e});t.then(function(e){this.trigger({type:"onFetchFieldsSuccess",data:e})}.bind(this)),t[t.fail?"fail":"catch"](function(){this.trigger({type:"showErrorMessage"})}.bind(this))},onFetchMeetingAttendees:function(e){var t=f.fetch({url:f.ENDPOINTS.fetch_meeting_attendee,data:e});t.then(function(e){this.setInternalParticipantsCount(e.data.internal_participant_count),this.setExternalParticipantsCount(e.data.external_participant_count),this.trigger({type:"onFetchMeetingAttendeesSuccess",data:e})}.bind(this)),t[t.fail?"fail":"catch"](function(){this.trigger({type:"showErrorMessage"})}.bind(this))}});t.exports=p}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/app/scripts/CopyCustomerInfo/store.js","/app/scripts/CopyCustomerInfo")},{"./actions":5,"./paginationStore":7,_process:65,buffer:63,common_api:"common_api"}],9:[function(e,t,n){(function(n,i,s,a,o,r,d,l,c){var u=e("../../commons/book/Attendee/actions");t.exports=u}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/app/scripts/MappingModule/Attendee/actions.js","/app/scripts/MappingModule/Attendee")},{"../../commons/book/Attendee/actions":45,_process:65,buffer:63}],10:[function(e,t,n){(function(n,i,s,a,o,r,d,l,c){var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f=e("./actions"),h=e("./store").AttendeeStore,p=e("./store").AddEditAttendeeStore,m=e("../Sessions/actions"),g=e("../Sessions/store"),v=e("../MappingInMaking/actions"),y=e("../MappingInMaking/store"),w=e("../MeetingType/store"),b=function(){var e=$("#meeting-request-container"),t=$("#user_count"),n=$(".user-search-box"),i=$("input[name='attend-meeting']"),s=$(".js-add-attendee-form"),a=$(".js-add_attendee"),o=$(".js-add-attendee-modal"),r=$(".section.attendees-section"),d=$(".tabs-attendees"),l=($(".js-add_attendee"),$("#add-attendee-modal")),c=($(".tabs-attendees"),$(".js-add-attendee-form")),b=($("#email",c),$("#internal-attendees-tab").find(".attendees-list")),S=$("#internal-attendees-tab").children(".attendees-list"),M=$("#external-attendees-tab").find(".attendees-list"),A=$("#external-attendees-tab").children(".attendees-list"),D=$("#sessions-list",e),x=$(".section-meeting-making",e),k=window.ReactMessage||$(".notification-modal"),C=$("#attend-meeting-yes"),E=$("#attend-meeting-no"),I=null,T=null,O=null,P=!1,N=$(".section-meeting-proceed"),F=$("#nominationInfo"),U=$("#quickSubmit"),Y={enableSave:!0,message:""},R={},q="internal",L=$("#proceed-to-details-container"),j=$("#selfNominationSubmit"),B={external:{}},H={fetchAttendees:function(e){ye((e=e.data).items,S,!0),Se(e.total_items),Me(e.items,S),S.data("page",e.current_page),S.data("totalPages",e.total_pages)},showAttendeesList:function(e){var t=e.attendeeType;ee(t),$("a[href='#"+t+"-attendees-tab']").tab("show")},fetchExternalAttendees:function(e){ye((e=e.data).items,A),Se(e.total_items),Me(e.items,A),A.data("page",e.current_page),A.data("totalPages",e.total_pages)},internalAttendeeUnselected:De,externalAttendeeUnselected:xe,internalWaitlistAttendeeUnselected:De,externalWaitlistAttendeeUnselected:xe,emailFieldValidatorHandler:function(e){var t,n=_.isString(e)?JSON.parse(e):e.apiResponse;"external"===q?"internal"===n.data.domain_type?(t=_.isObject(n.data.user)?{email:i18n.t("already_internal_attendee")}:{email:i18n.t("alert_internal_domain")},ie(),te(!1,t.email)):!1===n.success||200!==n.status?(t=n.errors,ie(),te(!1,t.email)):(t={},$("#email-error").css("display","none"),_.isObject(n.data.user)?se(n.data.user,n.data.can_edit):ie(),te(!0,"")):!1===n.success||200!=n.status?(t=n.errors,ie(),te(!1,t.email)):"internal"===n.data.domain_type?(t={},$("#email-error").css("display","none"),n.data.user?se(n.data.user):ie(),te(!0,"")):"external"===n.data.domain_type?(t={email:i18n.t("alert_external_domain")},ie(),te(!1,t.email)):(t={email:n.errors.EmailError},ie(),te(!1,t.email));var i=$(s.selector,o.selector+'[type="'+q+'"]'),a=i.validate();return a.showErrors(_.assign({},t,a.errorMap)),a.previousValue($("[name='email']",i)[0]).originalMessage=t.email||"",Y.enableSave},cannotSelectAttendee:Q,attendeeSelected:function(){l.modal("hide")},onCanUserAttendSession:function(e){!0===e.data.can_attend||""===e.data.can_attend?f.addAttendeeData():k.notificationModal({body:"User is already part of the session or is not available.",title:"Info","class":"red",dismiss:function(){p.resetAttendeeData(),ne(),$(o.selector+'[type="'+q+'"]').modal("hide")}})},showWaitlistNotification:ue,unSelectUsers:function(e){if(0!==e.data.length){var t=pluralize("is",e.data.length),n=e.data.join(),i=i18n.t("user_cannot_attend_session",{users:n,is:t});k.notificationModal({body:i,title:"Info","class":"red",dismiss:function(){A.find(".attendee-item[data-can_attend_session=false]").find(".btn-action.unselect-attendee").click()}})}}},W={currentActivitySettings:function(e){if(!envDetails.isBookSession())return;f.setAttendeeSettings.trigger(e);var t=h.getAttendeeSettings(),n=t.internalAttendeesHidden,i=t.externalAttendeesHidden;n&&i?(r.addClass("hide"),G("internal"),G("external")):n?(z(),G("internal"),Z("external")):i&&(z(),G("external"),Z("internal"));"internal"===me()?J(t.allowRequestorToAddInternalAttendee):J(t.allowUserToAddExternalAttendee)}};function V(e){return e.replace(/[!"#',\/:;<=>?[\\\]^`{|}~]/g,"\\$&")}function J(e){var t=envDetails.isCSM()||envDetails.isMeetingManager()||envDetails.isJuniorMM()||e;$("#attendee-addbtn")[t?"show":"hide"]()}function G(e){$(".selected-"+e+"-attendee .section-action",N).addClass("hide"),nominationInfo.request.users&&nominationInfo.request.users[e].length>0||$(".selected-"+e+"-attendee .selected-attendee-list",N).addClass("hide")}function z(){d.find("li[data-search-name='internal']").addClass("hide"),d.find("li[data-search-name='external']").addClass("hide")}function Z(e){$(".tabs-attendees a[href='#"+e+"-attendees-tab']").tab("show")}function Q(e){var t,n;e.uuid?t=function(){var t;e.uuid&&("internal"===e.attendee_type?e.isSelf?(!1,t=e.uuid,$("#attend-meeting-no").prop("checked",!0),v.updateAttendingStatus(!1),$('.attendee-item.added[data-uuid="'+t+'"]',".selected-attendee").remove(),$('.attendee-item[data-uuid="'+t+'"]').removeClass("hide")):ve({user:{uuid:e.uuid}},"internal"):ve({user:{uuid:e.uuid}},"external"))}:(o.modal("hide"),$.noop),message=i18n.t("room_capacity_exceeded"),n=i18n.t("room_capacity_exceeded_title"),envDetails.isBookSession()&&(message=i18n.t("room_capacity_exceeded_for_session"),n=i18n.t("room_capacity_exceeded_title_for_session")),k.notificationModal({body:message,title:n,"class":"red",dismiss:t})}function K(e,t){var n=e.user;n.uuid===envDetails.currentUser.uuid&&(f.updateAreYouAttending("yes"),C.prop("checked",!0),v.updateAttendingStatus(!0));var i=$('.attendee-item[data-uuid="'+n.uuid+'"]',t),s=$('.attendee-item.added[data-uuid="'+n.uuid+'"]',".selected-attendee");if(0==i.length){var a=HandlebarsTemplates["book/attendee_item"]({unmapped_users:[n],add_label:i18n.t("add"),remove_label:i18n.t("remove")});X(i=$(a),t)}else s.length||(i.addClass("hide"),X(i=i.clone().removeClass("hide"),t));"internalAttendeeWaitlist"!==e.type&&"externalAttendeeWaitlist"!==e.type||$('.attendee-item.added[data-uuid="'+n.uuid+'"]').addClass("waitlist-status"),setTimeout(function(){$(".attendee-item").popover("hide")},50)}function X(e,t){e.addClass("added"),e.appendTo($(".selected-attendee",t))}function ee(e){$(".filter-dropdown","#attendee-filter-panel").removeClass("hide"),q=e,p.updateAttendeeType(e)}function te(e,t){Y.enableSave=e,Y.message=t}function ne(){$(s.selector,o.selector+'[type="'+q+'"]').find("input").map(function(){$(this).prop({readonly:!1,checked:!1}).val("")}),"internal"===q?I.setValues({custom_fields:{}}):T.setValues({custom_fields:B.external})}function ie(){if(!1!==P){var e=$(s.selector,o.selector+'[type="'+q+'"]');$("#"+q+"PrimaryFields").find("input[name!=email], textarea, select").each(function(e,t){$(t).prop("readonly",!1).val("").trigger("change").removeAttr("checked"),p.updateAttendeeData(t.name,"")}),"internal"===q?($("input[name='company_name']",e).val(envDetails.companyName),p.updateAttendeeData("company_name",envDetails.companyName),I.setValues({custom_fields:{}}),I.resetFormToReadOnly()):(T.setValues({custom_fields:B.external}),T.resetFormToReadOnly()),P=!1}}function se(e,t){var n=$(s.selector,o.selector+'[type="'+q+'"]');$("#"+q+"PrimaryFields").find("input[name!=email], textarea, select").each(function(n,i){var s=i.name,a=e[s];$("#"+s+"-error").hide(),$(i).prop("readonly",!t&&!0).val(a),"sync_contact"==s&&(a=i.checked),p.updateAttendeeData(s,a)}),"object"===u(e.custom_fields)&&("internal"===q?(I.setValues(e),!t&&I.setFormToReadOnly()):(T.setValues(e),!t&&T.setFormToReadOnly())),$(".form-group",n).removeClass("has-error"),P=!0}function ae(e){e.preventDefault(),e.stopPropagation();var t=$(s.selector,o.selector+'[type="'+q+'"]'),n=t.find("input[name=consent]");if(Y.enableSave){if("internal"===q?I.isFormValid(t):T.isFormValid(t)){if(!1===window.commons.didUserGiveConsent(n))return void window.commons.showAddUserConsentMissingMessage();var i="internal"===q?I.getValues():T.getValues();f.createAttendee(i,window.commons.getConsentValue(n))}}else"function"==typeof Y.message&&(Y.message(),$(o.selector+'[type="'+q+'"]').modal("hide"))}function oe(e){var t=$(this).prop("checked",!0).data("attending");if(!envDetails.canUserChangeSelfAttendance){var n="";return"yes"===t?($("#attend-meeting-no").prop("checked",!0),n="cannot_attend_meeting",v.updateAttendingStatus(!1)):(C.prop("checked",!0),n="must_attend_meeting",v.updateAttendingStatus(!0)),void k.notificationModal({body:i18n.t(n),title:i18n.t("sorry"),"class":"red"})}var i,s=envDetails.currentUser.uuid;if("yes"===t){i=_.first($('.select-attendee[data-uuid="'+s+'"]'));var a=$(".selected-attendee",S);fe($(i),a),f.selectInternalAttendee(s),v.updateAttendingStatus(!0)}else i=$('.unselect-attendee[data-uuid="'+s+'"]')[0],ge($(i),s,"internal"),f.unselectInternalAttendee(s),v.updateAttendingStatus(!1)}function re(){var e=$(this);$("#js-instructions-display").addClass("hide");var t,n=e.data("uuid");$("#users-list").removeClass("hide"),$('.tabs-attendees a[href="#external-attendees-tab"]').tab("show"),m.updateSelectedSession.trigger(n),envDetails.isBookSessionEdit()||v.resetAttendees(),f.sessionChange(n),x.removeClass("hide"),v.canAttendSession({session_uuid:n},"onCanAttendSession"),t=g.getSelectedSession().track.name,$("#js_activity_name").addClass("subnav-border"),$("#js_track_name").removeClass("hide").text(t),h.waitlistInitiation=!1,function(e){var t="self_nomination"===e;h.setNominationType(t);var n=y.getQuickMeetingConfig(),i=window.envDetails.isCSM()||window.envDetails.isMeetingManager()||window.envDetails.isJuniorMM();t?(de(j),le(U),le(L),le(F)):(le(j),de(L),de(F),n&&i&&de(U))}(e.data("type"))}function de(e){e.removeClass("hide")}function le(e){e.addClass("hide")}function ce(e){var t=$(this).val();"external"===me()?f.searchExternal(t):f.searchInternal(t)}function ue(e){k.notificationModal({body:i18n.t("capacity_reached_waitlist"),title:i18n.t("capacity_reached_waitlist_title"),"class":"yellow"})}function fe(e,t){var n=e.closest(".attendee-item");n&&n.length?(n.clone().addClass("added").appendTo(t||function(){O="internal"===me()?$(".selected-attendee",S):$(".selected-attendee",A);return O}()),n.addClass("hide")):he()}function he(){var e=_.cloneDeep(envDetails.currentUser);e.available=!0;var t=HandlebarsTemplates["book/attendee_item"]({unmapped_users:[e],add_label:i18n.t("add"),remove_label:i18n.t("remove")}),n=$(t);n.addClass("added"),n.appendTo($(".selected-attendee",b))}function pe(e){e.preventDefault(),e.stopPropagation();var t,n=$(this),i=n.data("uuid");if(i===envDetails.currentUser.uuid&&envDetails.isBookSession()){if(!envDetails.canUserChangeSelfAttendance)return void k.notificationModal({body:i18n.t("cannot_attend_meeting"),title:i18n.t("sorry"),"class":"red"});C.prop("checked",!0),v.updateAttendingStatus(!0)}var s=me();fe(n),"external"===s?(f.selectExternalAttendee(i),t=M):(f.selectInternalAttendee(i),t=b),Me([h.getAttendeeDetails(i)],t)}function me(){return $(".tabs-attendees li.active").data("search-name")}function _e(e){e.preventDefault(),e.stopPropagation();var t=$(this),n=t.data("uuid");$(".attendee-item").popover("hide"),envDetails.isBookSession()?function(e){return e!==envDetails.currentUser.uuid||(envDetails.canUserChangeSelfAttendance?(E.prop("checked",!0),v.updateAttendingStatus(!1),!0):(k.notificationModal({body:i18n.t("must_attend_meeting"),title:i18n.t("sorry"),"class":"red"}),!1))}(n)&&ge(t,n,me()):ge(t,n,me())}function ge(e,t,n){e.closest(".attendee-item").remove(),"internal"===n?($(".attendee-item.hide[data-uuid='"+t+"']",S).removeClass("hide"),f.unselectInternalAttendee(t)):($(".attendee-item.hide[data-uuid='"+t+"']",A).removeClass("hide"),f.unselectExternalAttendee(t))}function ve(e,t){var n=e.user&&e.user.uuid;ge("internal"===t?$(".attendee-item[data-uuid='"+n+"']",$(".selected-attendee",b)):$(".attendee-item[data-uuid='"+n+"']",$(".selected-attendee",M)),n,t)}function ye(e,t,n){var i,s,a=_.first(e)&&!_.isUndefined(_.first(e).mapped_topic),o=n&&a?function(e){var t=_.groupBy(e,"mapped_topic"),n=t["true"]||[],i=t["false"]||[];return n=we(n),i=we(i),be({mapped_users:n,unmapped_users:i,show_mapped_header:n.length,show_unmapped_header:i.length})}(e):function(e){return be({unmapped_users:e=we(e)})}(e);(t.empty(),t.append($("<div/>").addClass("selected-attendee")),t.append(o),O=$(".selected-attendee",t),function(e){var t=$(".added",e);t.clone().appendTo(O),t.removeClass("added").addClass("hide")}(t),i=window.envDetails.currentUser.uuid,s=$('.attendee-item.added[data-uuid="'+i+'"]',"#internal-attendees-tab"),h.selection[i]&&!s.length&&he(),envDetails.isBookSession())&&(h.getAttendeeSettings().externalAttendeesHidden&&Z("internal"))}function we(e){return _.sortByOrder(e,["available","first_name"],[!1,!0])}function be(e){var t={add_label:i18n.t("add"),remove_label:i18n.t("remove")};return _.merge(e,t),HandlebarsTemplates["book/attendee_item"](e)}function Se(e){var n=1==e?i18n.t("participant_count",{count:e}):i18n.t("participants_count",{count:e});t.html(n)}function Me(e,t){var n={};e.forEach(function(e){n[e.uuid]=e});var i=HandlebarsTemplates["book/user_tooltip"];$(".attendee-details",t).each(function(e,t){var s=(t=$(t)).data("uuid"),a=n[s];t.popover({html:"true",template:"<div class='popover room-tooltip' role='tooltip'><div class='popover-content'></div></div>",content:i(a),trigger:"hover",placement:"right"})})}function Ae(e,t,n){$(".attendee-item").popover("hide");var i=$(".attendee-item.hide[data-uuid='"+t+"']",n);i.length>0?(e.closest(".attendee-item").remove(),i.removeClass("hide added")):e.closest(".attendee-item").removeClass("added").appendTo(n)}function De(e){var t=e.user&&e.user.uuid,n=$(".attendee-item[data-uuid='"+t+"']",$(".selected-attendee",b));n&&Ae(n,t,b)}function xe(e){var t=e.user&&e.user.uuid;Ae($(".attendee-item[data-uuid='"+t+"']",$(".selected-attendee",M)),t,M)}function ke(){var e=$(b).data("page")||1;e!==($(b).data("totalPages")||0)&&f.fetchInternal(e+1,h.params)}function Ce(){var e=$(M).data("page")||1;e!==($(A).data("totalPages")||0)&&h.onFetchExternal(e+1,_.merge({},{params:h.params},h.getSfdcParams()))}return p.listen(function(e){if("canAttendeeParticipateInSession"!=e.type)if(e.success){if(p.resetAttendeeData(),ne(),$(o.selector+'[type="'+q+'"]').modal("hide"),"internalAttendeeWaitlist"!==e.type&&"externalAttendeeWaitlist"!==e.type||e.showWaitlistNotification||ue(),"closePopup"===e.type)return;e.user&&("internal"===e.attendee_type?K(e,b):K(e,M))}else{var t;t=e.error?e.error.errors:{},$(s.selector,o.selector+'[type="'+q+'"]').validate().showErrors(t)}else v.canAttendSession({session_uuid:g.getSelectedSession().uuid,user_uuid:e.data.user.uuid},"onCanUserAttendSession")}),{init:function(e){I=e.formRenderers.internal,T=e.formRenderers.external,B.external=e.sfdcDefaults,h.listen(function(e){var t=H[e.type];console.log(e.type),t&&t(e)}),y.listen(function(e){var t=H[e.action];t&&t(e.payload)}),w.listen(function(e){var t=W[e.action];_.isFunction(t)&&t(e.payload)}),g.listen(function(e){"undefined"!=typeof jiffle&&"sessionAvailabilitiesSuccess"===e.action&&e.data.resources!==undefined&&e.data.resources.external_users.length&&(_.forEach(e.data.resources.external_users,function(e){if(!e.uuid.includes("dummy_")){var t=M.find(".attendee-item[data-email='"+V(e.email)+"']");t.length&&(t.data("uuid",e.uuid),t.attr("data-uuid",e.uuid),t.find("[data-uuid]").data("uuid",e.uuid),t.find("[data-uuid]").attr("data-uuid",e.uuid),M.find(".attendee-item.added[data-email='"+V(e.email)+"']").attr("data-can_attend_session",e.can_attend_session))}}),h.updateExternalSfdcUserUUID(e.data.resources.external_users))}),$.validator.setDefaults({errorClass:"help-block error-class",errorPlacement:function(e,t){t.parent().append(e)},debug:!0,onfocusout:function(e){this.checkable(e)||!(e.name in this.submitted)&&this.optional(e)||this.element(e)},messages:{first_name:{required:i18n.t("is_required",{attr:i18n.t("first_name")})},last_name:{required:i18n.t("is_required",{attr:i18n.t("last_name")})},email:{required:i18n.t("is_required",{attr:i18n.t("email")}),email:i18n.t("invalid_email")},contact_no:{required:i18n.t("is_required",{attr:i18n.t("phone")})},company_name:{required:i18n.t("is_required",{attr:i18n.t("company__placeholder")})},title:{required:i18n.t("is_required",{attr:i18n.t("title")})}},showErrors:function(e,t){for(var n=0,i=this.validElements();i[n];n++)this.settings.unhighlight.call(this,i[n],this.settings.errorClass,this.settings.validClass),$("#"+i[n].name+"-error").hide();for(var s,a=0;t[a];a++)s=t[a],this.settings.highlight(s.element),$("#"+s.element.name+"-error").show(),this.showLabel(s.element,s.message)}}),$.validator.addMethod("checkEmailValidity",function(e,t,n){return!(e=(e||"").trim())||/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)},i18n.t("Please enter a valid email")),$.validator.addMethod("validateUserEmail",function(e,t){return function(e){var t={user_type:function(){return me()},email:$(e).val()};f.domainValidate(t)}(t),!0},""),$(s.selector).each(function(e,t){(t=$(t)).on("click",".select2.select2-container",function(e){t.find("> .select2-container.select2-container--default").css({position:"fixed"})}),t.validate({onsubmit:!1,onkeyup:!1,rules:{email:{checkEmailValidity:"[name='email']",validateUserEmail:"[name='email']",required:{depends:function(e){return $(e).val(e.value.trim()),!0}}}}})}),$(b).infiniteScroll({offset:200,callback:ke}),$(M).infiniteScroll({offset:100,callback:Ce}),S.on("click",".select-attendee",pe),A.on("click",".select-attendee",pe),S.on("click",".unselect-attendee",_e),A.on("click",".unselect-attendee",_e),n.on("keyup",_.debounce(ce,200)),D.on("change","input[name='sessionCard']",re),i.on("click",oe),$(".js-add-attendee-modal").on("show.bs.modal",function(e){var t,n;t=$(s.selector,o.selector+'[type="'+q+'"]'),(n=t.validate()).reset(),n.resetForm(),$(".form-group",t).removeClass("has-error"),ne();var i=envDetails.companyName;!function(e){if(e.closest("#sf-jiffle-now").length){var t=$(s.selector,o.selector+'[type="'+q+'"]'),n="external"==q&&($("#select_account").val()||nominationInfo.request.custom_fields.meeting_account_id)&&envDetails.syncContactsToSfdc;window.isLeadsMeeting&&(n=envDetails.syncLeadsToSfdc,t.find("#js-external-sync-contact-sfdc").find("label.js-sync-sfdc").text(i18n.t("sync_lead_to_sfdc"))),t.find("#js-external-sync-contact-sfdc")[n?"removeClass":"addClass"]("hide")}}($(this)),te(!0,""),"external"===q&&(i=""),$(o.selector+'[type="'+q+'"]').find("[name='company_name']").val(i),p.updateAttendeeData("company_name",i)}).on("hide.bs.modal",function(){var e=$(s.selector,o.selector+'[type="'+q+'"]');"internal"===q?I.setValues({custom_fields:{}}):T.setValues({custom_fields:B.external}),$.data(e.find('[name="email"]')[0],"previousValue",{old:"",valid:!0,message:i18n.t("invalid_domain")})}),a.on("click",_.throttle(ae,631)),$("#attendee-addbtn").on("click",function(e){e.preventDefault(),e.stopPropagation();var t=g.getSelectedSession();h.canSelect||t.settings.enable_waitlist?$(o.selector+'[type="'+q+'"]').modal("show"):Q({})}),s.on("change","#internalPrimaryFields input, #externalPrimaryFields input, #external_sync_sfdc_contact",function(){var e=$(s.selector,o.selector+'[type="'+q+'"]').validate();e.element($(this))&&p.updateAttendeeData(this.name,this.value||this.checked)}),$('a[data-toggle="tab"]').on("shown.bs.tab",function(e){var t=$(e.target)[0],n=$(t).attr("id"),i=h.getAttendeeSettings();"external"===me()?J(i.allowUserToAddExternalAttendee):J(i.allowRequestorToAddInternalAttendee),function(e){if(R.user_filter_options){var t=HandlebarsTemplates["book/filter_attendee_item"]({roles:R.user_filter_options[e]});attendeeFilterRolePanel.html(t)}f.tabChanged(e)}(n),ee(n)})},showCurrentUserInAttendeeList:he}}();t.exports=b}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/app/scripts/MappingModule/Attendee/handler.js","/app/scripts/MappingModule/Attendee")},{"../MappingInMaking/actions":15,"../MappingInMaking/store":19,"../MeetingType/store":22,"../Sessions/actions":24,"../Sessions/store":26,"./actions":9,"./store":11,_process:65,buffer:63}],11:[function(e,t,n){(function(n,i,s,a,o,r,d,l,c){var u=e("../../commons/book/Attendee/store"),f=e("common_api"),h=e("../../Sfdc/SfdcAccount/store"),p=e("../Sessions/store"),m=e("../../Sfdc/commons"),g=e("../../Sfdc/commonStore"),v=u.AttendeeStoreObj,y=u.AddEditAttendeeStoreObj,w={internalAttendeeWaitlist:{},externalAttendeeWaitlist:{},waitlistInitiation:!1,onSetAttendeeSettings:function(e){this.settings={internalAttendeesHidden:"yes"===e.hide_internal_attendees_in_book_meeting,externalAttendeesHidden:"yes"===e.hide_external_attendees_in_book_meeting,allowRequestorToAddInternalAttendee:"yes"===e.allow_requestor_to_add_internal_attendee,allowUserToAddExternalAttendee:"yes"===e.allow_user_to_add_new_external_attendee}},getAttendeeSettings:function(){return this.settings||{}},setNominationType:function(e){this.nominationType=e?"self":"group"},getNominationType:function(){return this.nominationType||""},getSfdcParams:function(){var e={};return"undefined"!=typeof jiffle&&(e.params={},envDetails.showJifflenowExternalAttendees?(e.endPoint=f.ENDPOINTS.external_attendees,e.params.registered_only=!0):window.isLeadsMeeting?(e.endPoint=f.ENDPOINTS.lead_details,e.params.leadIds=[]):(e.endPoint=f.ENDPOINTS.fetch_contacts,e.params.account_id="edit"===nominationInfo.request.mode?nominationInfo.request.custom_fields.meeting_account_id:h.selectedAccount.id)),e},refreshExtAttList:function(e){"refreshContactList"!==e.type||$("#users-list").hasClass("hide")||(this.resetExternalAttendees(),this.resetSelectedExternalAttendees(),this.onFetchExternal(1,_.merge({},{params:this.params},this.getSfdcParams())))},resetSelectedExternalAttendees:function(){envDetails.isBookSessionEdit()||(this.externalAttendeeSelection={})},onSessionChange:function(e){if(this.resetInternalList(),this.resetExternalAttendees(),this.resetWaitlistAttendees(),this.resetSelectedAttendeeList(),"undefined"!=typeof jiffle&&window.isLeadsMeeting&&"new"===mode){var t=p.getSelectedSession(),n=t.capacity-t.not_declined_user_count;if(n-nominationInfo.request.users.external.length>=0)this.onSessionEditSelectAttendees(nominationInfo.request.users,nominationInfo.request.waitlist||{internal:[],external:[]});else{var i=_.take(nominationInfo.request.users.external,n),s=_.takeRight(nominationInfo.request.users.external,nominationInfo.request.users.external.length-n);this.onSessionEditSelectAttendees({internal:[],external:i},t.settings.enable_waitlist?{internal:[],external:s}:{internal:[],external:[]})}}this.params={session_uuid:e,book_meeting:!0},this.onFetchInternal(1,this.params),this.onFetchExternal(1,_.merge({},{params:this.params},this.getSfdcParams()))},resetWaitlistAttendees:function(){if(envDetails.isBookSessionEdit())return!0;this.internalAttendeeWaitlist={},this.externalAttendeeWaitlist={}},onSelectMappingAttendees:function(e,t){this.resetInternalList(),this.resetExternalAttendees(),this.resetSelectedAttendeeList(),this.onEditAttendees(e),this.params={mapping_uuid:t.uuid},this.onFetchInternal(1,this.params),this.onFetchExternal(1,{params:this.params}),this.trigger({type:"mappingAttendeesSelected",users:e})},getAttendeeDetails:function(e){return this.attendees[e]||this.externalAttendees[e]||this.selection[e]||this.externalAttendeeSelection[e]||{}},onCanSelectAttendees:function(e){this.canSelect=e},onSelectInternalAttendee:function(e){if(envDetails.isBookSession())this.trigger({action:"onSessionAttendeeSelected",payload:{uuid:e,type:"internal"}});else if(this.canSelect){var t=this.attendees[e];t&&(t.selected=!0,this.selection[t.uuid]=t,this.trigger({type:"internalAttendeeSelected",user:t}))}else this.trigger({type:"cannotSelectAttendee",uuid:e,attendee_type:"internal",isSelf:e===envDetails.currentUser.uuid})},onSelectExternalAttendee:function(e){if(envDetails.isBookSession())m.syncExtAttendeeToSFDC(this.externalAttendees[e],!1)?g.onSyncAttendeeToSfdc(this.externalAttendees[e],function(t){t.user&&(this.externalAttendees[e].Id=t.user.sfdc_contact_id||t.user.sfdc_lead_id),this.trigger({action:"onSessionAttendeeSelected",payload:{uuid:e,type:"external"}})}.bind(this)):this.trigger({action:"onSessionAttendeeSelected",payload:{uuid:e,type:"external"}});else if(this.canSelect){var t=this.externalAttendees[e];t&&(t.selected=!0,this.externalAttendeeSelection[t.uuid]=t,this.trigger({type:"externalAttendeeSelected",user:t}))}else this.trigger({type:"cannotSelectAttendee",uuid:e,attendee_type:"external"})},onUnselectInternalAttendee:function(e){var t=this.selection[e];t?(t.selected=!1,delete this.selection[e],this.trigger({type:"internalAttendeeUnselected",user:t})):this.isUserWaitlisted(e,"internal")},prepareAttendeeList:function(){var e=_.map(this.attendees,function(e,t){return _.isEmpty(this.selection[t])&&_.isEmpty(this.internalAttendeeWaitlist[t])?e.selected=!1:e.selected=!0,e}.bind(this));return _.forEach(this.selection,function(t,n){n!=envDetails.currentUser.uuid&&_.isEmpty(this.attendees[n])&&e.push(t)}.bind(this)),e},prepareExternalAttendeeList:function(){var e=_.map(this.externalAttendees,function(e,t){return _.isEmpty(this.externalAttendeeSelection[t])&&_.isEmpty(this.externalAttendeeWaitlist[t])?e.selected=!1:e.selected=!0,e}.bind(this));return _.forEach(this.externalAttendeeSelection,function(t,n){_.isEmpty(this.externalAttendees[n])&&e.push(t)}.bind(this)),e},isUserWaitlisted:function(e,t){if("internal"===t){var n=this.internalAttendeeWaitlist[e];delete this.internalAttendeeWaitlist[e],this.trigger({type:"internalWaitlistAttendeeUnselected",user:n})}else{n=this.externalAttendeeWaitlist[e];delete this.externalAttendeeWaitlist[e],this.trigger({type:"externalWaitlistAttendeeUnselected",user:n})}},onUnselectExternalAttendee:function(e){var t=this.externalAttendeeSelection[e];t?(t.selected=!1,delete this.externalAttendeeSelection[e],this.trigger({type:"externalAttendeeUnselected",user:t})):this.isUserWaitlisted(e,"external")},onEditAttendees:function(e){var t=e.internal;_.isPresent(t)&&t.map(function(e,t){e.selected=!0,this.selection[e.uuid]=e}.bind(this));var n=e.external;_.isPresent(n)&&n.map(function(e,t){e.selected=!0,this.externalAttendeeSelection[e.uuid]=e}.bind(this))},onSessionEditSelectAttendees:function(e,t){this.onEditWaitlist(t),this.onEditAttendees(e),this.trigger({type:"editAttendees",users:e,waitlist:t})},onEditWaitlist:function(e){_.each(e.internal,function(e){e.type="internal",e.selected=!0,e.available=!0,S.internalAttendeeWaitlist[e.uuid]=e}),_.each(e.external,function(e){e.type="external",e.selected=!0,e.available=!0,S.externalAttendeeWaitlist[e.uuid]=e})},onEventCreated:function(e){this.currentEvent=e,this.resetInternalList(),this.resetExternalAttendees(),this.params={},e&&e.uuid&&(this.params.mapping_uuid=e.uuid),this.onFetchInternal(1,this.params),this.onFetchExternal(1,{params:this.params})},resetSelectedAttendeeList:function(){envDetails.isBookSessionEdit()||(this.selection={},this.externalAttendeeSelection={})},onSearchInternal:function(e){this.resetInternalList(),this.searchTerm=e,this.onFetchInternal(1,this.params)},onSearchExternal:function(e){this.resetExternalAttendees(),this.searchTerm=e,this.onFetchExternal(1,_.merge({},{params:this.params},this.getSfdcParams()))},onDomainValidate:function(e){e.activity_uuid=selectedActivityUuid,e.event_uuid=envDetails.event.uuid,e.requested_page="book_meeting";var t=f.fetch({url:nominationInfo.domainValidateUrl,prefix:"",data:e});t.then(function(e){this.trigger({type:"emailFieldValidatorHandler",apiResponse:e})}.bind(this)),t[t.fail?"fail":"catch"](function(e){console.log(e)}.bind(this))},onClearAttendees:function(){this.resetInternalList(),this.resetExternalAttendees(),this.resetSelectedAttendeeList()},filterDeclinedUsers:function(e,t){return _.filter(e,function(e){return"declined"===e.invite_status&&t&&t[e.uuid]})},existingUserInEditMode:function(e){var t=e.type,n=e.selectedUser;return _.find(nominationInfo.request.users[t],{uuid:n})},isDeclinedExistingUser:function(e){if(!envDetails.isBookSessionEdit())return!1;var t=e.type,n=e.selectedUser;return _.some(nominationInfo.request.users[t],{uuid:n,invite_status:"declined"})},addExistingAttendeeToList:function(e){var t=this.existingUserInEditMode(e);t&&(this.externalAttendeeSelection[t.uuid]=t,this.trigger({type:e.type+"AttendeeSelected",user:t}))},isNoWaitlistExistsInEdit:function(){return!("edit"===mode&&(_.isPresent(this.internalAttendeeWaitlist)||_.isPresent(this.externalAttendeeWaitlist)))},onCanSelectSessionUsers:function(e){var t,n=e.selectedSession;n&&(n.capacity-n.user_count>0&&this.isNoWaitlistExistsInEdit()||this.isDeclinedExistingUser(e)?"internal"===e.type?(t=this.attendees[e.selectedUser])?(t.selected=!0,this.selection[t.uuid]=t,this.trigger({type:"internalAttendeeSelected",user:t})):e.selectedUser===envDetails.currentUser.uuid?(t=envDetails.currentUser,this.selection[t.uuid]=t,this.trigger({type:"internalAttendeeSelected",user:t})):envDetails.isBookSessionEdit()&&this.addExistingAttendeeToList(e):(t=this.externalAttendees[e.selectedUser])?(t.selected=!0,this.externalAttendeeSelection[t.uuid]=t,this.trigger({type:"externalAttendeeSelected",user:t})):envDetails.isBookSessionEdit()&&this.addExistingAttendeeToList(e):e.selectedSession.settings.enable_waitlist?(this.waitlistInitiation||(this.trigger({type:"showWaitlistNotification",param:e}),this.waitlistInitiation=!0),this.moveUserToWaitlist(e)):this.trigger({type:"cannotSelectAttendee",uuid:e.selectedUser,attendee_type:e.type,isSelf:e.selectedUser===envDetails.currentUser.uuid}))},moveUserToWaitlist:function(e){var t;"internal"===e.type?(t=this.attendees[e.selectedUser])?(this.internalAttendeeWaitlist[t.uuid]=t,this.trigger({type:"internalAttendeeWaitlist",user:t})):e.selectedUser===envDetails.currentUser.uuid&&(t=envDetails.currentUser,this.internalAttendeeWaitlist[t.uuid]=t,this.trigger({type:"internalAttendeeWaitlist",user:t})):(t=this.externalAttendees[e.selectedUser])&&(this.externalAttendeeWaitlist[t.uuid]=t,this.trigger({type:"externalAttendeeWaitlist",user:t}))},updateExternalSfdcUserUUID:function(e){var t=[];e.length&&(_.forEach(e,function(e){if(!e.uuid.includes("dummy_")){var n=_.findKey(this.externalAttendees,{email:e.email}),i=_.findKey(this.externalAttendeeSelection,{email:e.email});if(n!==undefined&&n.includes("dummy_")&&(this.externalAttendees[n].uuid=e.uuid,this.externalAttendees[e.uuid]=this.externalAttendees[n],delete this.externalAttendees[n]),i!==undefined&&i.includes("dummy_")&&(this.externalAttendeeSelection[i].uuid=e.uuid,this.externalAttendeeSelection[e.uuid]=this.externalAttendeeSelection[i],delete this.externalAttendeeSelection[i]),!e.can_attend_session){var s=e.first_name+" "+e.last_name;t.push(s)}}}.bind(this)),this.trigger({type:"unSelectUsers",data:t}))}},b={attendeeData:null,typeOptions:{confirmList:{internal:{type:"internalAttendeeSelected",listType:"attendees",store:"selection",inverseStore:"internalAttendeeWaitlist",listCreation:"prepareAttendeeList",waitlistNotif:!1},external:{type:"externalAttendeeSelected",listType:"externalAttendees",store:"externalAttendeeSelection",inverseStore:"externalAttendeeWaitlist",listCreation:"prepareExternalAttendeeList",waitlistNotif:!1}},waitlist:{internal:{type:"internalAttendeeWaitlist",listType:"attendees",store:"internalAttendeeWaitlist",inverseStore:"selection",listCreation:"prepareAttendeeList",waitlistNotif:!0},external:{type:"externalAttendeeWaitlist",listType:"externalAttendees",store:"externalAttendeeWaitlist",inverseStore:"externalAttendeeSelection",listCreation:"prepareExternalAttendeeList",waitlistNotif:!0}}},updateAttendeeData:function(e,t){this.attendee_data[e]=t},updateAttendeeType:function(e){this.attendee_type=e},onCreateAttendee:function(e,t){if(S.canSelect){this.attendee_data.custom_fields=e||{};var n=f.update({url:f.ENDPOINTS.user_create,data:{user:this.attendee_data,user_type:this.attendee_type,activity_uuid:selectedActivityUuid,requested_page:"book_meeting",consent:t}});n.then(function(e){200===e.status&&(this.attendeeData=e.data,"self"===S.getNominationType()?this.onAddAttendeeData():"external"===this.attendee_type&&m.syncExtAttendeeToSFDC(this.attendee_data,!0)?g.onSyncAttendeeToSfdc(this.attendee_data,function(t){t.user&&(this.attendeeData.user.Id=t.user.sfdc_contact_id||t.user.sfdc_lead_id),this.trigger({type:"canAttendeeParticipateInSession",data:e.data,success:!0})}.bind(this)):this.trigger({type:"canAttendeeParticipateInSession",data:e.data,success:!0}))}.bind(this)),n[n.fail?"fail":"catch"](function(e){console.log(e),this.trigger({error:e.responseJSON,success:!1})}.bind(this))}else S.trigger({type:"cannotSelectAttendee",attendee_type:this.attendee_type})},onAddAttendeeData:function(){var t=t||e("../Sessions/store"),n=n||e("../MappingInMaking/store"),i=$.extend(!0,{},this.attendeeData);this.attendeeData=null;var s=t.getSelectedSession(),a=n.getAvailableCountForSessionNomination(s),o=this.attendee_type,r=envDetails.currentUser.uuid;a?this.addAttendeeToAttendeeStore(i,o,r):s.settings.enable_waitlist&&this.addAttendeeToAttendeeStore(i,o,r,!0)},addAttendeeToAttendeeStore:function(e,t,n,i){var s,a,o=i?"waitlist":"confirmList",r=this.typeOptions[o][t];if(s=r.type,e){(a=e.user).available=!0,a.selected=!0,a.sync_contact=this.attendee_data.sync_contact||!1;var d=!0;n!==a.uuid&&(S[r.store][a.uuid]||S[r.inverseStore][a.uuid]?(d=!1,a.sync_contact&&(S.selection[a.uuid].sync_contact=a.sync_contact)):(S[r.store][a.uuid]=a,S[r.listCreation]()))}d?(this.trigger({type:s,user:a,attendee_type:t,success:!0,showWaitlistNotification:r.waitlistNotif&&S.waitlistInitiation}),r.waitlistNotif&&(S.waitlistInitiation=!0)):this.trigger({type:"closePopup",success:!0})},resetAttendeeData:function(){this.attendee_data={}}},S=Reflux.createStore(_.assign(v,w)),M=Reflux.createStore(_.assign(y,b));t.exports={AttendeeStore:S,AddEditAttendeeStore:M}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/app/scripts/MappingModule/Attendee/store.js","/app/scripts/MappingModule/Attendee")},{"../../Sfdc/SfdcAccount/store":36,"../../Sfdc/commonStore":38,"../../Sfdc/commons":39,"../../commons/book/Attendee/store":46,"../MappingInMaking/store":19,"../Sessions/store":26,_process:65,buffer:63,common_api:"common_api"}],12:[function(e,t,n){(function(n,i,s,a,o,r,d,l,c){var u=e("../../commons/book/Calendar/actions");t.exports=u}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/app/scripts/MappingModule/Calendar/actions.js","/app/scripts/MappingModule/Calendar")},{"../../commons/book/Calendar/actions":47,_process:65,buffer:63}],13:[function(e,t,n){(function(n,i,s,a,o,r,d,l,c){var u=e("./actions"),f=e("../MappingInMaking/actions"),h=e("./store"),p=e("../../commons/calendar_helpers"),m=e("../../commons/calendar_overide"),g=e("../Attendee/actions"),v=e("../MeetingType/actions"),y=e("../Topic/actions"),w=(e("../Attendee/store").AttendeeStore,e("../MappingInMaking/store")),b=e("../MappingInMaking/handler"),S=e("../MeetingType/store"),M={},A=e("../../commons/book/Calendar/handler"),D=e("../../commons/granular_edit"),x=function(){var e="",t=$("#proceed-btn"),n=($("#session-settings"),$(".mapping-listing-section")),i="scheduler_here",s=($(".notification-modal"),""),a="",o="",r=$("#mapping_topic"),d=!1,l=new Date,c=$("#meeting-week-picker"),x=$(".js-calendar-dropleft"),k=$(".js-calendar-dropright"),C=l,E=l,I=void 0,T={eventCreated:$.noop};function O(e,t){if(c.length){c.closest("li").removeClass("hide");var n={format:"dd-mm-yyyy",startDate:e,endDate:I,defaultViewDate:{year:t.getFullYear(),month:t.getMonth(),day:t.getDate()},beforeShowDay:function(e){var n=moment(e),i=c.data("datepicker").getDate()||t,s=moment(i).startOf("week"),a=moment(i).endOf("week");if(n.isSame(s)||n.isSame(a)||n.isBetween(s,a))return{classes:"highlighted"}},maxViewMode:2};"undefined"!=typeof jiffle&&$.extend(n,{container:$("#sf-jiffle-now")}),c.bootstrapDP(n),P(t),c.on("changeDate",function(t){var n;scheduler.setCurrentView(t.date),n=t.date,f.updateCalendar(n),c.data("datepicker").hide();var i=moment(t.date),s=i.startOf("week").toDate(),a=i.endOf("week").toDate();s<e?x.addClass("disabled"):a>I?k.addClass("disabled"):x.add(k).removeClass("disabled")})}}function P(e){c.length&&c.data("datepicker").setDate(e)}function N(e){var t=e.event,n=new Date(moment(t.start_date,"YYYY-MM-DD")),s=n,a=I=new Date(moment(t.end_date,"YYYY-MM-DD"));if(window.isOngoingSales){var o=function(e){var t=moment(l).startOf("day");return moment(e).startOf("day")-t<0}(n)?l:n;window.mapping&&window.mapping.start_time&&(o=window.mapping.start_time instanceof Date?window.mapping.start_time:new Date(moment(window.mapping.start_time,"YYYY-MM-DD"))),h.CalendarAvailabilityStore.updateStartDate(o),C=o,s=scheduler.date.add(o,-o.getDay(),"day"),a=scheduler.date.add(o,7-o.getDay()-1,"day")}var r={startDate:s=scheduler.date.date_part(moment(s).utc()._d),endDate:a=scheduler.date.date_part(moment(a).utc()._d),min_event_height:20},c=$(".js-calendar-dropleft, .js-calendar-dropright"),f=void 0;window.isOngoingSales?(p.setWeekStartForJFX(s,a),p.hideNonEventDays(s,I,7),f=7):(p.setWeekStart(),p.hideNonEventDays(s,I),f=4),p.diffenceOfDatesLessThanMaxDays(s,I,f)&&c.addClass("hide");var g={event_text:L,event_header:j,renderEvent:$.noop};scheduler.config.icons_edit=["icon_delete"],scheduler.config.multi_day=!1,scheduler.config.mark_now=!1,scheduler.config.edit_on_create=!1,p.setupSchedulerTemplates(g),p.configureCalendarForWeekView(r),window.isOngoingSales?(scheduler.config.limit_start=null,scheduler.config.limit_end=null,scheduler.config.limit_view=!1):(scheduler.config.limit_start=scheduler.date.add(s,-1,"day"),scheduler.config.limit_end=scheduler.date.add(a,1,"day"),scheduler.config.limit_view=!0),scheduler.xy.scale_height=30,scheduler.init(i,s),d=!0,function(){scheduler._click.buttons["delete"]=J,window.isOngoingSales&&(x.removeClass("hide").off("click").on("click",F),k.removeClass("hide").off("click").on("click",U));scheduler.attachEvent("onBeforeEventCreated",function(t,n){return q(),e&&G("edit"),!0}),$(".dhx_cal_data").on("dblclick",".dhx_marked_timespan.js_available",function(){q(),e&&G("edit")}),scheduler.attachEvent("onEventAdded",function(e,t){scheduler.config.scroll_hour=t.start_date.getHours();var n=scheduler.getEvents();n.forEach(function(e){e.id!==t.id&&scheduler.deleteEvent(e.id,!0)}),null!==t&&T.eventCreated(t),setTimeout(function(){scheduler.update_view()},50)}),scheduler.attachEvent("onBeforeEventChanged",function(t,n,i,s){if(scheduler.config.scroll_hour=t.start_date.getHours(),scheduler.config.offsite_enabled&&e){var a=(new Date(t.end_date)-new Date(t.start_date))/60/1e3;"neither_nor"===setDurations(t.start_date,t.end_date,a)&&(t.end_date=scheduler.date.add(t.start_date,scheduler.config.mm_override?a:scheduler.config.maximum_duration,"minute"))}var o=scheduler.checkInMarkedTimespan(t,"dhx_time_block");return!o}),scheduler.attachEvent("onEventChanged",function(e,t){T.eventCreated(t)}),scheduler.attachEvent("onBeforeEventDelete",function(e,t){return function(){T.eventCreated(null);var e=_.cloneDeep(w.model);e.event=null,H(e)}(),!0});var e=!1;scheduler.attachEvent("onBeforeDrag",function(t,n,i){return e="create"===n,!0}),scheduler.attachEvent("onDragEnd",function(){var e=scheduler.getEvents();e.forEach(function(e,t){u.eventCreated(e)})});var t=p.setupCalendarslotInfo({dataStore:w,calendarStore:h.CalendarAvailabilityStore,meetingTypeStore:S});M=t.PubSubManager}(),m.override(),p.overrideLimitSpan(),window.isOngoingSales||window.isEditMapping||p.setupCalendarSlideListeners(s,a)}function F(e){e.preventDefault(),e.stopPropagation(),k.removeClass("disabled");var t=moment(scheduler.getState().date).startOf("week"),n=void 0;t-C>0&&(scheduler._click.dhx_cal_next_button(0,-1),n=(t=scheduler.getState().date)-C>0?t:C,moment(t).subtract(1,"week").toDate()<moment(C).startOf("week").toDate()&&x.addClass("disabled"),P(n))}function U(e){e.preventDefault(),e.stopPropagation(),x.removeClass("disabled"),scheduler._click.dhx_cal_next_button(0,1);var t=scheduler.getState().date;I<moment(t).endOf("week").toDate()&&k.addClass("disabled"),P(t)}function Y(e){u.eventCreated(e),g.eventCreated(e),v.eventCreated(e)}function R(e){u.eventCreated(e),v.eventCreated(e)}function q(){scheduler.getEvents().forEach(function(e){scheduler.deleteEvent(e.id)})}function L(e,t,n){return""}function j(e,t,n){return(e=moment(e).format("h:mm"))+" - "+(t=moment(t).format("h:mm"))}function B(e){"update"===(e.type||"update")&&function(e){var t=e.data;if(t&&(t.success||200===t.status)){H(e.model),scheduler.deleteMarkedTimespan();var n,i=t.data.double_booking_slots,s=t.data.bookable_meeting_slots,a=Object.keys(s);a.forEach(function(e){0!==(n=s[e]).length&&p.paintDoubleBookingslots(moment(e).utc()._d,n)}),(a=Object.keys(i)).forEach(function(e){var n=moment(e)._d;p.paintInitialBlocks(n,scheduler.invertZones(t.data.initial_availability[e])),p.paintResourceBlocks(n,h.CalendarAvailabilityStore.getResourceBlocks(e))}),t.data.double_booking_slots}scheduler.updateView()}(e),M.notifyReact&&M.notifyReact()}function H(e){if(e){var t=e.room.uuid&&""!==e.room.uuid,n=e.internal.length>0||e.external.length>0,i=null!==e.event;G(t||n||i?"edit":"listing")}}function W(e){var t,n,i,s=e.data,a=s.combined_availabilities||s.room_initial_availabilities;scheduler.deleteMarkedTimespan(),t=-1,n=1441,i=h.CalendarInitialAvailabilityStore.getInitialAvailability(),_.forOwn(i,function(e,i){var s=_.flatten(e);n=_.min(s)<n?_.min(s):n,t=_.max(s)>t?_.max(s):t}),scheduler.config.first_hour=0,scheduler.config.scroll_hour=Math.floor(n/60),scheduler.config.last_hour=Math.ceil(t/60),d&&scheduler.update_view(),_.forOwn(a,function(e,t){var n=function(e,t){return{days:moment(e)._d,zones:t}}(t,e);n.css="js_available",scheduler.addMarkedTimespan(n),p.paintInitialBlocks(moment(t)._d,scheduler.invertZones(e))}),a,scheduler.updateView()}function V(e){e.success&&(N(e.data),O(C,E),u.initialAvailability(null,h.CalendarAvailabilityStore.getStartDate()),envDetails.isGeneraMappingModule()&&"yes"===associatedSettings.assign_topic&&y.fetchRelatedTopics({activity_uuids:selectedActivityUuid},"getTopicListSuccess","getTopicListFail"),window.isEditMapping&&(envDetails.isTrackMappingModule()?(b.setTopicForEditMapping(window.mapping),b.openSessionInEditMode(window.mapping)):envDetails.isGeneraMappingModule()&&("yes"===associatedSettings.assign_topic&&b.setTopicForEditMapping(window.mapping),b.openMappingInEditMode(window.mapping))))}function J(){q()}function G(d){if(e!==d){if(scheduler.detachEvent(s),scheduler.detachEvent(a),scheduler.detachEvent(o),"edit"===d){e="edit",u.setCurrentMode(e),q(),n.closest(".section-mapping-making").addClass("hide"),n.html(""),scheduler.config.drag_move=!0,scheduler.renderEvent=function(){return!1};var l=w.getEditMapping();if(l){var c=l.start_time.replace(/-/g,"/"),f=l.end_time.replace(/-/g,"/");if(c=moment(c,"YYYY-MM-DD hh:mm A").format("DD-MM-YYYY H:m"),f=moment(f,"YYYY-MM-DD hh:mm A").format("DD-MM-YYYY H:m"),scheduler.addEvent({start_date:c,end_date:f,text:"Hello",uuid:l.uuid}),v.editRoom(l.room),(c=moment(c,"DD-MM-YYYY"))&&c.isValid())if(c=c.toDate(),window.isOngoingSales)scheduler.setCurrentView(c);else{var h=moment(window.envDetails.event.start_date,"YYYY-MM-DD").toDate(),m=moment(window.envDetails.event.end_date,"YYYY-MM-DD").toDate();scheduler.setCurrentView(p.getWeekStartForEdit(h,m,c)),p.setupCalendarSlideListeners(h,m)}var _=l.topic,g=l.track;t.text("Update");var b=$("#mapping_topic"),S=$("#track_select");envDetails.isTrackMappingModule()?(0==b.find("option").length&&b.append("<option value="+_.uuid+">"+_.name.replace(/"/g,'\\"')+"</option>"),y.setSelectedTrack.trigger(g.uuid),y.setSelectedTopic.trigger(_.uuid),b.val(_.uuid).trigger("change.select2").prop("disabled",!0),S.val(g.uuid).trigger("change.select2").prop("disabled",!0),window.envDetails.isAbstractOnlyEditableMode()&&$("#"+i).find("*").css("pointer-events","none")):envDetails.isGeneraMappingModule()&&(b.prop("disabled",!0),S.prop("disabled",!0))}"undefined"!=typeof associatedSettings.assign_topic_mandatory&&"yes"===associatedSettings.assign_topic_mandatory&&r.prop("required","required").siblings("label").addClass("required")}scheduler.updateView()}}return{init:function(){u.eventInfo(),h.CalendarEventStore.listen(V),h.CalendarInitialAvailabilityStore.listen(W),h.CalendarAvailabilityStore.listen(B),A.init(),D.init(),envDetails.isGeneraMappingModule()?T.eventCreated=Y:envDetails.isTrackMappingModule()&&(T.eventCreated=R)},setMappingSchedulerMode:G}}();t.exports=x}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/app/scripts/MappingModule/Calendar/handler.js","/app/scripts/MappingModule/Calendar")},{"../../commons/book/Calendar/handler":48,"../../commons/calendar_helpers":53,"../../commons/calendar_overide":54,"../../commons/granular_edit":55,"../Attendee/actions":9,"../Attendee/store":11,"../MappingInMaking/actions":15,"../MappingInMaking/handler":17,"../MappingInMaking/store":19,"../MeetingType/actions":20,"../MeetingType/store":22,"../Topic/actions":27,"./actions":12,"./store":14,_process:65,buffer:63}],14:[function(e,t,n){(function(n,i,s,a,o,r,d,l,c){var u=e("../../commons/book/Calendar/store"),f=Reflux.createStore(u.CalendarEventStoreObj),h=Reflux.createStore(u.CalendarAvailabilityStoreObj),p=Reflux.createStore(u.CalendarInitialAvailabilityStoreObj);t.exports={CalendarEventStore:f,CalendarAvailabilityStore:h,CalendarInitialAvailabilityStore:p}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/app/scripts/MappingModule/Calendar/store.js","/app/scripts/MappingModule/Calendar")},{"../../commons/book/Calendar/store":49,_process:65,buffer:63}],15:[function(e,t,n){(function(e,n,i,s,a,o,r,d,l){var c=Reflux.createActions(["createMapping","meetingAction","updateMapping","resetAttendeesAndRooms","getCustomForm","updateSessionParams","createSession","fetchRequestors","resetAttendees","behalfOfMeetingAction","canAttendSession","deleteMapping","updateAttendingStatus","setCurrentNomination","getCurrentNomination","fetchSfdcCustomForm","fetchConfigurations","createSelfNomination","updateCalendar","setTopicName","setModelData"]);t.exports=c}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/app/scripts/MappingModule/MappingInMaking/actions.js","/app/scripts/MappingModule/MappingInMaking")},{_process:65,buffer:63}],16:[function(e,t,n){(function(n,i,s,a,o,r,d,l,c){var u=e("./actions"),f=e("./store"),h=e("common_api"),p=e("../../Sfdc/commons"),m=Reflux.createStore({init:function(){this.listenToMany(u),this.customForm=null,this.remoteEntitiesCount=0},onGetCustomForm:function(e){var t=h.ENDPOINTS.fetch_form;isEBCEvent&&(t=h.ENDPOINTS.fetch_ebc_form);var n=h.fetch({url:t,data:{form_type:"meeting_request_form",activity_uuid:selectedActivityUuid}});n.then(function(e){var t=this;if(null===this.customForm&&e.data&&e.data.custom_form_fields){if(this.customForm=e.data,!envDetails.topicManagementEnabled){var n=_.find(this.customForm.custom_form_fields,function(e){return"topic_management"==e.field_name});n&&(n.hidden=!0)}_.forEach(this.customForm.custom_form_fields,function(e){"string"==typeof e.entity&&""!==e.entity.trim()&&(t.remoteEntityFields[e.entity]=e.field_name,t.remoteEntitiesCount++)}),0!=this.remoteEntitiesCount?this.trigger(this.customForm,this.remoteEntityFields):this.trigger(e)}}.bind(this)),n[n.fail?"fail":"catch"](function(e){this.trigger({type:"CustomFormError",data:e.responseJSON})}.bind(this))},remoteEntityFields:{},remoteEntityEndPoints:{topic_of_interest:h.ENDPOINTS.fetch_topics},onFetchRelatedTopics:function(e,t,n){var i=h.fetch({url:this.remoteEntityEndPoints.topic_of_interest,data:e});return i.then(t),i[i.fail?"fail":"catch"](n),i},onFetchSfdcCustomForm:function(e){var t=f.model.account,n={mapped_fields:{},account_id:t.acc.id,opportunity_id:t.oppty.id,mode:nominationInfo.request.mode};"new"===nominationInfo.request.mode?n.lead_id=p.getValidLeadId(f.model):"edit"===nominationInfo.request.mode&&(n.account_id=nominationInfo.request.custom_fields.meeting_account_id,n.opportunity_id=nominationInfo.request.custom_fields.meeting_opportunity_id,n.lead_id=nominationInfo.request.custom_fields.meeting_lead_id),_.forEach(this.customForm.custom_form_fields,function(e){if(e.integration_field&&e.integration_field.uuid){var t={value:nominationInfo.request.custom_fields[e.field_name]||"",prefill:"",integration_field_uuid:e.integration_field.uuid};n.mapped_fields[e.field_name]=t}});var i=h.fetch({url:h.ENDPOINTS.fetch_sf_custom_fields,data:n});i.then(function(t){var n=nominationInfo.request.meeting_with;"new"===nominationInfo.request.mode&&(n=f.model.account.acc.name,window.isLeadsMeeting&&(n=$("#req_page_meeting_with").val()));var i={sfdc_meeting_info:{custom_fields:{},meeting_with:n,second_page_active:e},custom_form_fields:_.cloneDeep(this.customForm.custom_form_fields)},s=_.cloneDeep(nominationInfo.request.custom_fields);_.forEach(i.custom_form_fields,function(e){var n=t.mapped_fields[e.field_name];if(n){var s=n.value;"textfield"===e.type&&(s=""===n.value?e.values:n.value),e.values=n.prefill,i.sfdc_meeting_info.custom_fields[e.field_name]=s}}),i.sfdc_meeting_info.custom_fields=_.assign(s,i.sfdc_meeting_info.custom_fields),this.trigger(i)}.bind(this)),i[i.fail?"fail":"catch"](function(e){console.log(e)}.bind(this))}});t.exports=m}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/app/scripts/MappingModule/MappingInMaking/form_store.js","/app/scripts/MappingModule/MappingInMaking")},{"../../Sfdc/commons":39,"./actions":15,"./store":19,_process:65,buffer:63,common_api:"common_api"}],17:[function(e,t,n){(function(n,i,s,a,o,r,d,l,c){var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},f=e("./actions"),h=e("./store"),p=e("./form_store"),m=e("../MeetingType/actions"),g=(e("../Calendar/actions"),e("../Sessions/actions")),v=e("../Sessions/store"),y=e("../Attendee/actions"),w=e("../../Session/actions"),b=e("../../Session/store").SessionStore,S=e("../MeetingType/store"),M=e("./requestor_dropdown"),A=e("common_api"),D=e("../Topic/actions"),x=e("../Attendee/handler"),k=e("../../commons/book/MeetingInMaking/handler"),C=e("../../commons/granular_edit"),E=e("../commonStore"),I=e("../utilities"),T=I.acceptMeetingHandler,O=I.declineMeetingHandler,P=I.cancelMeetingHandler,N=I.handleAcceptOnBehalf,F=I.handleDeclineOnBehalf,U=I.reinviteSuccessHandler,Y=I.reinviteErrorHandler,R=function(){var e,t=$("#proceed-btn"),n=$("#session-proceed-btn"),i=$("#proceed-to-details-container"),s=$("#cancel-btn"),a=window.ReactMessage||$(".notification-modal"),o=$("li#meetingWithInfo"),r=$(".calendar-section"),d=($(".mapping-listing-section"),$("#proceed_page")),l=$("#meeting-request-container"),c=$(".section-meeting-making"),I=$("#nominationInfo",l),R=$("#dynamic_form",d),q=$("#req_page_meeting_with",l),L=$("#req-page-meeting-form",l),j=$("#req-page-topic-management",l),B=($("#session-list-container",l),$(".selected-room",c)),H=$(".selected-time",c),W=$("#change-meeting-with",d),V=$(".meeting-status"),J=$(".accept-meeting"),G=$(".decline-meeting"),z=$(".approve-meeting"),Z=$(".cancel-meeting"),Q=$(".approved-text"),K=$(".selected-internal-attendee .selected-attendee-list",c),X=$(".selected-external-attendee .selected-attendee-list",c),ee=$(".selected-internal-attendee .selected-attendee-list",d),te=$(".selected-external-attendee .selected-attendee-list",d),ne=$(".selected-time",d),ie=$(".selected-room",d),se=$(".js_change_meeting_with_label",d),ae=$("[id^='requestor-select']"),oe=$("[id^='requestor-label-div']"),re=$(".back-to-main-page"),de=$("#submitButton"),le=$("#quickSubmit"),ce=$("#selfNominationSubmit"),ue=$("#change-requestor"),fe=$("#change-requestor-label"),he=($("#session-settings"),null),pe=null,me=window.ReactMessage||$(".notification-modal"),_e=$(".notification-modal"),ge=null,ve=$(".js-add-attendee-modal"),ye=($(".js-secondary-action-dropdown"),{isLoaded:!1}),we=!1,be=$("#attendingStatus"),Se=$("input#attend-meeting-yes"),Me=$("input#attend-meeting-no"),Ae=$(".js-date-picker-section"),De={accept_meeting_url:"Accept",decline_meeting_url:"Decline",reinvite_url:"ReInvite"},xe={onMappingSaved:function(e){t.prop("disabled",!1);var n=envDetails.isTrackAndSessionMeetingType()?"session_list":"mapping_list";a.notificationModal({timeout:!0,"class":"green",title:i18n.t("mapping_save_success_title",{first_name:envDetails.currentUser.first_name}),body:e.message,dismiss:function(){commons.redirectPage(""+envDetails.urlPrefix+A.ENDPOINTS.meeting_list+"#"+n)}})},onMappingSaveFailed:function(e){t.prop("disabled",!1),a.notificationModal({timeout:!0,"class":"red",title:i18n.t("unable_to_save"),body:e.message})},onCreateSessionFailed:function(e){de.prop("disabled",!1);var t=_.flatten(_.values(e.errors));return void me.notificationModal({"class":"red",timeout:!0,title:"Failure!!",body:t.join(", ")})},onCreateSessionSuccess:function(e){var t,n=function(e){_.remove(e.users.internal,{invite_status:"declined"}),_.remove(e.users.external,{invite_status:"declined"});var t=e.users.internal.length,n=e.users.external.length,i=t+n,s=i+" "+pluralize("participant",i)+" "+pluralize("is",i)+" confirmed. ";if(e.session.settings.enable_waitlist){var a=e.waitlist.internal,o=e.waitlist.external,r=a.length+o.length,d=r+" "+pluralize("participant",r)+" "+pluralize("is",r)+" on waitlist. ",l=[],c=a.concat(o);return c=_.sortByOrder(c,"waitlist_sequence"),_.each(c,function(e){l.push({type:"check",text:e.user_name+", waitlist #"+e.waitlist_sequence})}),{confirmedMessage:s+d,attendeeDetails:l}}return{confirmedMessage:s}}(e.data.data);t=envDetails.isBookSessionEdit()?i18n.t("session_nomination_update_message")+" "+n.confirmedMessage:n.confirmedMessage;if("undefined"==typeof jiffle||_.isEmpty($.urlParam("accid"))&&_.isEmpty($.urlParam("oppid"))&&_.isEmpty($.urlParam("lead_ids")))a.notificationModal({timeout:!0,"class":"green",title:i18n.t("mapping_save_success_title",{first_name:envDetails.currentUser.first_name}),body:t,uiDetails:n.attendeeDetails,dismiss:function(){lt()}});else{var i=i18n.t("preserve_acc_opp_context_confirmation");_.isEmpty($.urlParam("lead_ids"))||(i=i18n.t("preserve_leads_context_confirmation")),_e.notificationModal({type:"confirmation",title:i18n.t("mapping_save_success_title",{first_name:envDetails.currentUser.first_name}),body:t+"<br>"+i,hideCloseBtn:!0,done:function(){we=!0,lt()},cancel:function(){we=!1,lt()}})}},onMeetingAccepted:function(t){me.notificationModal({timeout:!0,"class":"green",body:t.message,title:i18n.t("meeting_accept_success_header")}),Ce(t.data.actions),nominationInfo.request.status=t.data.status;var n=envDetails.currentUser.uuid;e=t.data.actions_on_behalf,Ee(n,t.data.invite_status)},onMeetingDeclined:function(t){me.notificationModal({timeout:!0,"class":"green",body:t.message,title:i18n.t("meeting_decline_success_header")}),Ce(t.data.actions),nominationInfo.request.status=t.data.status;var n=envDetails.currentUser.uuid;e=t.data.actions_on_behalf,Ee(n,t.data.invite_status),pe&&Oe(pe)},onMeetingCancelled:function(e){var t=E.getCustomLabel("nomination_custom_label");me.notificationModal({timeout:!0,"class":"green",body:i18n.t("nomination_cancel",{nominationLabel:t}),title:i18n.t("success"),dismiss:function(){lt()}})},refreshAttendees:function(e){var t=e.internalAttendee,n=e.externalAttendee;Fe(t,n),k.setAttendeeCount({internalCount:t.length,externalCount:n.length}),Ye(t,n,qe(h.getAttendees("internal"),"internal"),qe(h.getAttendees("external"),"external"),e.internalAttendeeWaitlist,e.externalAttendeeWaitlist),pe&&Oe(pe)},onAttendeeSelected:function(e){var t,n,i=e.internalAttendee.length,s=e.externalAttendee.length,a=!1,o=!1;$(".selectedInternalAttendeeCount").text((i<10&&0!=i?"0":"")+i),$(".selectedInternalAttendeeCount + span").html(i18n.t(1==i?"internal_participant":"internal_participants")),$(".selectedExternalAttendeeCount").text((s<10&&0!=s?"0":"")+s),$(".selectedExternalAttendeeCount + span").html(i18n.t(1==s?"external_participant":"external_participants")),a=qe(e.validInternalAttendees,"internal"),o=qe(e.validExternalAttendees,"external"),t=e.internalAttendee,n=e.externalAttendee,Fe(t,n),Ye(t,n,a,o,e.internalAttendeeWaitlist,e.externalAttendeeWaitlist),e.internalAttendee.length>0?$(".go-to-main, .go-to-main-internal",".selected-internal-attendee").removeClass("hide"):$(".go-to-main, .go-to-main-internal",".selected-internal-attendee").addClass("hide");e.externalAttendee.length>0?$(".go-to-main, .go-to-main-external",".selected-external-attendee").removeClass("hide"):$(".go-to-main, .go-to-main-external",".selected-external-attendee").addClass("hide")},sessionChange:function(e){var t=v.onGetSessions();(pe=_.find(t,function(t){return t.uuid===e.uuid}))?Ne(pe):(H.html(""),B.html(""))},sessionNominations:function(e){var t={allowClear:!0,cache:!0,width:"100%",placeholder:i18n.t("please_select_meeting_with")},n=e.data.nominations,i=h.getCurrentNomination();if(W.html(""),t.data=n.map(function(e){return{id:e.uuid,text:e.custom_fields.meeting_with}}),W.select2(t),ge||1===n.length){var s=ge||_.first(n).uuid;W.val(s).trigger("change.select2"),ge=null}else{var s=i||"";W.val(s).trigger("change.select2")}ye.isLoaded&&W.trigger("change"),ye.isLoaded=!0},onBehalfOfSuccess:function(t){var n=t.onBehalfOf;e=t.data.actions_on_behalf,Ee(n,t.data.invite_status,t.data),pe&&(pe=t.data.session,g.updateSessionsEntity(pe),Oe(pe));me.notificationModal({timeout:!0,"class":"green",title:i18n.t("success"),body:t.message})},onBehalfOfFailure:function(e){var t=[];_.forEach(e.responseJSON.errors,function(e){t.push(e)});var n=i18n.t("failure");"re_invite"==e.responseJSON.action&&(n=e.responseJSON.error_header);setTimeout(function(){me.notificationModal({"class":"red",body:t.join(", "),title:n})},500)},onCanAttendSession:function(e){if(be.show(),I.find("div.js-ask-user").show(),I.find("div.js-message").hide(),""===e.data.can_attend)if("new"===mode){if(pt())return Me.prop("checked",!0),void f.updateAttendingStatus(!1);var t=S.getActivitySettings().default_state_of_are_you_attending;if(2==t){Se.prop("checked",!0),y.selectInternalAttendee(envDetails.currentUser.uuid),f.updateAttendingStatus(!0);var n=_.first($('.select-attendee[data-uuid="'+envDetails.currentUser.uuid+'"]')),i=n&&n.closest(".attendee-item");i?($(i).clone().addClass("added").appendTo($(".selected-attendee","#internal-attendees-tab")),$(i).addClass("hide")):x.showCurrentUserInAttendeeList()}else 1==t?(Me.prop("checked",!0),f.updateAttendingStatus(!1)):0==t&&(Se.prop("checked",!1),Me.prop("checked",!1),f.updateAttendingStatus(null))}else"edit"===mode&&(Me.prop("checked",!0),f.updateAttendingStatus(!1));else e.data.can_attend?(Se.prop("checked",!0),f.updateAttendingStatus(!0)):(I.find("div.js-ask-user").hide(),I.find("div.js-message").show(),f.updateAttendingStatus(!1),I.find("div.js-message").html(e.data.message))},mappingDeleteSuccess:function(e){a.notificationModal({timeout:!0,"class":"green",title:i18n.t("mapping_delete_success_title",{first_name:envDetails.currentUser.first_name}),body:e.message,dismiss:function(){window.location.reload()}})},mappingDeleteFailure:function(e){a.notificationModal({timeout:!0,"class":"red",title:i18n.t("unable_to_delete"),body:e.message})},onCreateSelfNominationSuccess:function(e){a.notificationModal({timeout:!0,"class":"green",title:i18n.t("self_nomination_success_header"),body:i18n.t("self_nomination_success_body"),dismiss:function(){var e=""+window.envDetails.urlPrefix+A.ENDPOINTS.meeting_list+"#session_list";window.commons.redirectPage(e)}})},onCreateSelfNominationFailure:function(){ce.prop("disabled",!1)}};function ke(e){e.preventDefault(),e.stopPropagation();var t=$(this);if(pe){var n=Pe(pe);!t.closest(".selected-attendee-item").hasClass("declined")||n>0||pe.settings.enable_waitlist?U(t):Y()}}function Ce(e){var t;J.addClass("hide"),G.addClass("hide"),z.addClass("hide"),Z.addClass("hide"),e.map(function(e,t){e=e.toLowerCase(),$("."+e+"-meeting").removeClass("hide")}),t=$(".js-secondary-action-list").find("li:not(.hide)").length,$(".js-secondary-action-dropdown")[t?"removeClass":"addClass"]("hide")}function Ee(t,n,i){var s=h.getInternalAttendees(),a=h.getExternalAttendees(),o=h.getInternalAttendeesWaitlist(),r=h.getExternalAttendeesWaitlist();s.map(function(i){e[i.uuid]?i.uuid==t?Ie(i,e[i.uuid],n):Ue(i,e[i.uuid]):_.forOwn(De,function(e,t){i[e]="hide"})}),a.map(function(i){e[i.uuid]?i.uuid==t?Ie(i,e[i.uuid],n):Ue(i,e[i.uuid]):_.forOwn(De,function(e,t){i[e]="hide"})}),Ye(s,a,qe(h.getAttendees("internal"),"internal"),qe(h.getAttendees("external"),"external"),o,r)}function Ie(e,t,n){n&&(e.invite_status=n),Ue(e,t)}function Te(){var e=W.val();if(e){if(f.setCurrentNomination(e),"undefined"!=typeof jiffle){var t=window.location.origin+A.ENDPOINTS.jn_book_nomination,n=window.location.search;t+=n=n.replace(new RegExp("[?&]nomination=([^&#]*)").exec(n)[0],"")+"&nomination="+e}else{t=(t=envDetails.urlPrefix+A.ENDPOINTS.group_nomination_edit).replace("{{uuid}}",e)}commons.redirectPage(t)}}function $e(){return Je().requestors}function Oe(e){var t=e.room,n=HandlebarsTemplates["book/selected_room"]({room_name:t.name,name:selectedActivityName});B.html(n);var i=HandlebarsTemplates["book/proceed_room"]({showGotoMainOptionFromDetails:!1,room_name:t.name,display_name:selectedActivityName,capacity:t.capacity,offsite:!1,hideChangeRoom:!0});ie.html(i),function(e,t){var n=$("#roomFullHolder",d),i=$("#occupiedRoomHolder",d),s=Pe(t);s<=0?(n.removeClass("hide"),i.addClass("hide")):(n.addClass("hide"),i.removeClass("hide").find(".occupiedCount").text(s))}(0,e)}function Pe(e){return e.capacity-e.user_count}function Ne(e){var t=moment(e.start_time,"YYYY-MM-DD hh:mm A").format("hh:mm A"),n=moment(e.end_time,"YYYY-MM-DD hh:mm A").format("hh:mm A"),i=moment(e.start_time,"YYYY-MM-DD hh:mm A").toDate().toMediumDate(),s=HandlebarsTemplates["book/selected_time"]({start_time:t,end_time:n,event_date:i,display:!0}),a=HandlebarsTemplates["book/proceed_time"]({start_time:t,end_time:n,event_date:i,meeting_time_zone:envDetails.event.time_zone,showChangeTimeOption:!envDetails.isBookSessionEdit(),showRescheduleTimeOption:envDetails.isBookSessionEdit(),hideTimeChange:!0});H.html(s),ne.html(a)}function Fe(t,n){t.map(function(t,n){e[t.uuid]?Ue(t,e[t.uuid]):_.forOwn(De,function(e,n){t[e]="hide"})}),n.map(function(t,n){e[t.uuid]?Ue(t,e[t.uuid]):_.forOwn(De,function(e,n){t[e]="hide"})})}function Ue(e,t){var n=t;_.forOwn(De,function(t,i){n[i]?(e[t]="",e[i]=n[i]):e[t]="hide"})}function Ye(e,t,n,i,s,a){!function(e,t){e=e||[],t=t||[],setTimeout(function(){_.each(e.concat(t),function(e){$('.attendee-item.added[data-uuid="'+e.uuid+'"]').addClass("waitlist-status")})},50)}(s,a);var o,r,d,l,c=HandlebarsTemplates["book/selected_attendee"],u=h.getAttendeeSettings(),f=c({remove_label:i18n.t("remove"),accept_label:i18n.t("accept"),decline_label:i18n.t("decline"),users:e,type:"internal",actions:!1,waitlistAttendees:s}),p=c({remove_label:i18n.t("remove"),accept_label:i18n.t("accept"),decline_label:i18n.t("decline"),users:t,type:"external",actions:!1,waitlistAttendees:a});K.html(f),X.html(p),function(e,t,n,i){var s=e.length+n.length,a=t.length+i.length;s>0?$(".go-to-main, .go-to-main-internal",".selected-internal-attendee").removeClass("hide"):$(".go-to-main, .go-to-main-internal",".selected-internal-attendee").addClass("hide");a>0?$(".go-to-main, .go-to-main-external",".selected-external-attendee").removeClass("hide"):$(".go-to-main, .go-to-main-external",".selected-external-attendee").addClass("hide");s=e.length,a=t.length,$(".selectedExternalAttendeeCount").text((a<10&&0!=a?"0":"")+a),$(".selectedExternalAttendeeCount + span").html(i18n.t(1==a?"external_participant":"external_participants")),$(".selectedInternalAttendeeCount").text((s<10&&0!=s?"0":"")+s),$(".selectedInternalAttendeeCount + span").html(i18n.t(1==s?"internal_participant":"internal_participants"))}(e,t,s,a),f=c({users:e,askConfirm:n,remove:!0,remove_label:i18n.t("remove"),accept_label:i18n.t("accept"),decline_label:i18n.t("decline"),type:"internal",actions:!0,show_empty_state:0===e.concat(s).length&&!u.internalAttendeesHidden,empty_text:i18n.t("add_internal_participants"),waitlistAttendees:s}),ee.html(f),p=c({users:t,askConfirm:i,remove:!0,type:"external",remove_label:i18n.t("remove"),accept_label:i18n.t("accept"),decline_label:i18n.t("decline"),actions:!0,show_empty_state:0===t.concat(a).length&&!u.externalAttendeesHidden,empty_text:i18n.t("add_external_participants"),waitlistAttendees:a}),te.html(p),Ve(e.concat(s),K),Ve(t.concat(a),X),Ve(e.concat(s),ee),Ve(t.concat(a),te),o=s.length,r=a.length,d=o>0?Re(o)+i18n.t("waitlisted"):"",l=r>0?Re(r)+i18n.t("waitlisted"):"",$(".js-internal-waitlist-attendee-count").removeClass("hide").text(d),$(".js-external-waitlist-attendee-count").removeClass("hide").text(l)}function Re(e){return(e<10&&0!=e?"0":"")+e}function qe(e,t){var n=!1;if(h.isAttendeeRequired(t+"_attendee_presence","relax_"+t+"_attendee_presence_for_mm"))if(n=e.length<=1){var i=e[0]||{};$("#"+t+'-attendees-tab .selected-attendee .unselect-attendee[data-uuid="'+i.uuid+'"]',l).attr("ask_confirm","")}else $("#"+t+"-attendees-tab .selected-attendee .unselect-attendee",l).removeAttr("ask_confirm");return n}function Le(e){e.preventDefault(),e.stopPropagation();if(this.hasAttribute("ask_confirm")&&"edit"===mode)me.notificationModal({title:i18n.t("meeting_notify_failure_title"),body:i18n.t("select_min_internal_attendee_to_continue",{company_name:envDetails.companyName}),"class":"red",dismiss:function(){}});else{var t=je(this,"internal");_e.notificationModal({type:"confirmation","class":"blue",title:i18n.t("confirmation_title"),body:"edit"===mode&&""!=t.attendee_name?i18n.t("remove_confirm_message",{attendee_name:t.attendee_name}):i18n.t("remove_confirm_message_for_save"),done:function(){t.uuid===envDetails.currentUser.uuid&&($("a","#attendingStatus").html(i18n.t("you_are_not_attending")),Me.prop("checked",!0),f.updateAttendingStatus(!1)),y.unselectInternalAttendee(t.uuid)}})}}function je(e,t){var n=$(e).data("uuid"),i="";return"edit"==mode&&(i=envDetails.isNomination()?_.find(nominationInfo.request.users[t],{uuid:n}):_.find(meetingInfo.request.users[t],{uuid:n}),i=_.isUndefined(i)?"":i.user_name),{uuid:n,attendee_name:i}}function Be(e){e.preventDefault();var t=je(this,"external");this.hasAttribute("ask_confirm")&&"edit"===mode?me.notificationModal({title:i18n.t("meeting_notify_failure_title"),body:i18n.t("select_min_external_attendee_to_continue"),"class":"red",dismiss:function(){}}):_e.notificationModal({type:"confirmation","class":"blue",title:i18n.t("confirmation_title"),body:"edit"===mode&&""!=t.attendee_name?i18n.t("remove_confirm_message",{attendee_name:t.attendee_name}):i18n.t("remove_confirm_message_for_save"),done:function(){y.unselectExternalAttendee(t.uuid)}})}function He(e){ct(e),y.showAttendeesList("internal")}function We(e){ct(e),y.showAttendeesList("external")}function Ve(e,t){var n={};e.forEach(function(e){n[e.uuid]=e});var i=HandlebarsTemplates["book/user_tooltip"];$(".selected-attendee-item",t).map(function(){var e=$(this).data("uuid"),t=n[e];$(this).popover({html:"true",template:"<div class='popover room-tooltip' role='tooltip'><div class='popover-content'></div></div>",content:i(t),trigger:"hover",placement:"right"})})}function Je(){return envDetails.isNomination()?nominationInfo:meetingInfo}function Ge(){return $e().map(function(e){return $("<option class=''>").val(e[1]).text(e[0])})}function ze(e,t){e.one("change",function(e){e.preventDefault(),e.stopPropagation(),function(e){var t=$("option:selected",this);isRequestorChangedByUserAction=!0,oe.text(t.first().text()),Ze(t.first().text()),e.length>0&&(envDetails.isExecutiveAdmin()&&(n=$e(),"All"===envDetails.currentManagedUser||envDetails.currentManagedUser instanceof Array&&(-1!==envDetails.currentManagedUser.indexOf(envDetails.currentUser.uuid)||envDetails.currentManagedUser.length>1)||n instanceof Array&&n.length>1)||e.html(t.clone()),e.hasClass("select2-hidden-accessible")?e.select2("val",t.val()):e.val(t.val()),ze($(this),e));var n}.call(this,t)})}function Ze(e){f.setModelData("requestorName",e)}function Qe(){var e=ae;W.removeClass("hide");envDetails.currentUser.uuid;M.init({container:ae,containerLabel:oe,adminPostInstantiate:Xe,fetchRequestorAction:f.fetchRequestors,requestors:$e()}),Ze($("option:selected",e).first().text())}function Ke(e){var t={requestor_uuid:ue.val()};w.fetchSessionNominations(t)}function Xe(){var e=Je().request.requestor;e&&e.uuid&&ae.val(e.uuid).trigger("change.select2")}function et(e){if(e.preventDefault(),e.stopPropagation(),!1!==C.isFormValid()){var n,i=h.isValidMapping();if(i.error)me.notificationModal({"class":"red",timeout:!0,body:i.message,title:i.title||i18n.t("meeting_validation_notify_title")});else{if((n=$("form#details-form")).validate({errorClass:"help-block error-class",errorPlacement:function(e,t){t.parent().append(e)}}),!n.valid())return window.scrollTo(0,0),void k.showMandatoryFieldsMsg();t.prop("disabled",!0),f.createMapping($("#enable_waitlist").prop("checked"))}}}var tt=function(){var e=h.model,t=h.customFormLabels,n=h.activitySettings,i=he.getValues(),s=window.envDetails.topicManagementEnabled&&!j.hasClass("hide"),a={};return _.forEach(t,function(e,t){a[t]={label:e,value:i[t]}}),{meetingData:u({},e,{customFieldsMap:a,activitySettings:n,isTopicEnabled:s}),meetingTimeZone:(envDetails.event.time_zone_display_name||"").trim()||envDetails.event.time_zone}};function nt(){if(rt(),at())if(pe){var e=tt();e=u({},e,{submitCallBack:function(){return st(!0)}}),window.renderMeetingSummary($(".mount-meeting-summary"),e)}else k.showMandatoryFieldsMsg(i18n.t("select_a_session"));else k.showMandatoryFieldsMsg()}function it(){ce.prop("disabled",!0),f.createSelfNomination()}function st(e){de.prop("disabled",!0);var t=$("form#customer_form");t.validate({ignore:h.getQuickMeetingConfig()?".form-element-ignorable:not([name=meeting_with])":""});var n=!0===e||he.isFormValid(t),i=h.isInValidSessionMeeting(),s=ae.val();if(n&&void 0===i)if("edit"===mode||h.isValidAccount()){var a=he.getValues();f.createSession(a,s)}else _e.notificationModal({"class":"yellow",type:"confirmation",body:i18n.t("sfdc_account_not_selected"),title:i18n.t("meeting_validation_notify_title"),done:function(){var e=he.getValues();f.createSession(e,s)},cancel:function(){de.prop("disabled",!1)}});else de.prop("disabled",!1),window.scrollTo(0,0),"string"==typeof i&&me.notificationModal({"class":"red",timeout:!0,body:i,title:i18n.t("meeting_validation_notify_title")})}function at(){var e=$("form#details-form");return e.validate({errorPlacement:function(e,t){t.parent().append(e)}}),e.valid()}function ot(e){e.preventDefault(),e.stopPropagation();var t=$("form#details-form");if(envDetails.isBookSession()){if("undefined"!=typeof jiffle&&window.isLeadsMeeting&&_.isEmpty(h.getExternalAttendees())&&_.isEmpty(h.getExternalAttendeesWaitlist()))return void me.notificationModal({"class":"red",timeout:!0,title:"Failure!!",body:i18n.t("lead_not_selected"),dismiss:k.focusInMeetingWith});rt(),function(){if(!at())return void k.showMandatoryFieldsMsg();if(!pe)return void k.showMandatoryFieldsMsg(i18n.t("select_a_session"));var e=h.isInValidSessionMeeting();void 0===e?"edit"===mode||h.isValidAccount()?ut():_e.notificationModal({"class":"yellow",type:"confirmation",body:i18n.t("sfdc_account_not_selected"),title:i18n.t("meeting_validation_notify_title"),done:function(){ut()}}):(window.scrollTo(0,0),me.notificationModal({"class":"red",timeout:!0,body:e,title:i18n.t("meeting_validation_notify_title")}))}()}else t.valid()?ut():window.scrollTo(0,0)}function rt(){$("select[name='topic_management']").prop("disabled",!0).html($("#mapping_topic").find("option:selected").clone()).trigger("change")}function dt(){var e=!1,t=envDetails.isBookSession()?i18n.t("discard_meeting_confirmation"):i18n.t("discard_mapping_confirmation");envDetails.urlPrefix;A.ENDPOINTS.meeting_list,_e.notificationModal({type:"confirmation","class":"blue",body:t,title:i18n.t("are_you_sure"),done:function(){e=!0},dismiss:function(){e&&lt()}})}function lt(){var e=envDetails.urlPrefix+A.ENDPOINTS.meeting_list,t=envDetails.isTrackAndSessionMeetingType()?"session_list":"mapping_list";if("undefined"!=typeof jiffle){var n=window.location.search,i=new RegExp("[?&]accid=([^&#]*)").exec(n),s=new RegExp("[?&]oppid=([^&#]*)").exec(n),a=new RegExp("[?&]lead_ids=([^&#]*)").exec(n),o=new RegExp("[?&]eventName=([^&#]*)").exec(n),r=new RegExp("[?&]current_location_uuid=([^&#]*)").exec(n),d="";d+=""+o[0]+r[0],we&&(d+="&showActivities=true",i&&(d+=i[0]),s&&(d+=s[0]),a&&(d+=a[0])),d=d.replace(/^&/,"?"),e=A.ENDPOINTS.apex_jnmeetings+d,window.sfdcNameSpace&&((e=e.split("/"))[2]=""+window.sfdcNameSpace+e[2],e=e.join("/")),e=isLightningExperience()?"/one/one.app#/alohaRedirect"+e:e,e=_.escape(e),window.location.href=e+"#"+t}else window.commons.redirectPage(e+"#"+t)}function ct(e){e.preventDefault(),e.stopPropagation(),l.removeClass("hide"),d.addClass("hide")}function ut(e){e&&e.preventDefault(),d.removeClass("hide"),l.addClass("hide"),"undefined"!=typeof jiffle&&envDetails.isBookSession()&&("new"===mode&&(window.isLeadsMeeting?f.fetchSfdcCustomForm():h.model.account.is_changed&&(f.fetchSfdcCustomForm(),h.model.account.is_changed=!1)),"edit"===mode&&$(".js-change-nomination").removeClass("hide"))}function ft(e,t){if("CustomFormError"!==e.type){e.data&&e.data.custom_form_fields&&(e.custom_form_fields=e.data.custom_form_fields);var n=e.sfdc_meeting_info?e.sfdc_meeting_info:nominationInfo.request;$.each(e.custom_form_fields,function(e,t){"meeting_with"===t.field_name?(L.find("label").text(t.label).addClass(t.required&&"required"),L.find("span.help-block").text(t.helpText),se.text(t.label),q.attr("placeholder",t.placeholder).prop("required",t.required)):"topic_management"===t.field_name&&(j.find("label").text(t.label).addClass(t.required&&"required"),j.find("#topic_management-complement").prop("required",!t.hidden&&t.required),j.find("span.help-block").text(t.helpText),j.parent()[t.hidden?"addClass":"removeClass"]("hide")),h.setCustomFormLabels(t.field_name,t.label)}),setTimeout(function(){$(".meeting-detail-container").slideDown(800)},1),(he=$(R).formRenderer({fieldCollection:e.custom_form_fields,customCssClass:""})).init(),envDetails.isNomination()&&q.val(nominationInfo.request.custom_fields.meeting_with),nominationInfo.request.meeting_with&&$("a",o).text(nominationInfo.request.meeting_with),n&&(n.custom_fields=n.custom_fields||{},nominationInfo&&nominationInfo.request&&"new"===nominationInfo.request.mode&&"string"==typeof topic_uuid&&t&&(n.custom_fields[t.topic_of_interest]=topic_uuid),he.setValues(n)),he.afterLoad(),function(e){var t=$("#track_select",l);if("edit"===mode){var n=nominationInfo.request.session.track;t.prop("disabled",!0),n&&t.html(new Option(n.name,n.uuid,!0)).select2({width:"100%"}).trigger("change")}}(nominationInfo.request),function(e){var t=$("#topic_management",d),n=$("#mapping_topic",l);if("edit"===mode){var i=nominationInfo.request.session.topic;n.prop("disabled",!0),t.prop("disabled",!0),i&&t.html(new Option(i.name,i.uuid,!0))}else if(window.isEBCEvent){var i=nominationInfo.request.session.topic;t.prop("disabled",!0),i&&t.html(new Option(i.name,i.uuid,!0)).trigger("change")}}(nominationInfo.request),$("#meeting_with",d).change(ht),rt()}else{var i=_.flatten(_.values(e.errors));me.notificationModal({"class":"red",timeout:!0,title:i18n.t("custom_field_error_title"),body:i.join(", ")})}}function ht(e){"req_page_meeting_with"==e.target.id?$("#meeting_with").val(e.target.value):"meeting_with"==e.target.id&&$("#req_page_meeting_with").val(e.target.value)}function pt(){return envDetails.isCSM()||envDetails.isMeetingManager()||envDetails.isJuniorMM()}return{init:function(){var o,r,c,u,g,y,S,M;h.listen(function(e){var t=e.action,n=e.payload||{},i=xe[t];i&&i(n)}),v.listen(function(e){var t=e.action,n=e.payload||{},i=xe[t];i&&i(n)}),b.listen(function(e){var t=e.type,n=e.data||{},i=xe[t];i&&i(n)}),l.removeClass("hide"),d.addClass("hide"),envDetails.isBookSession()&&(window.setTimeout(function(){f.getCustomForm()},800),p.listen(ft)),o=window.envDetails.event,r=o&&o.time_zone,c=o&&o.time_zone_name,r&&window.isOngoingSales&&(Ae.html(HandlebarsTemplates["book/ongoing_sales"]({current:!0})),Ae.find(".selected-timezone.js_tooltip").text(c).attr("title",c)),q.change(ht),t.on("click",et),i.on("click",k.focusInMeetingWith),i.on("click",ot),n.on("click",ot),re.on("click",ct),s.on("click",dt),de.on("click",st),le.on("click",k.focusInMeetingWith),le.on("click",nt),ce.on("click",it),d.on("click",".go-to-main",ct),d.on("click",".go-to-main-internal",He),d.on("click",".go-to-main-external",We),$(".selected-internal-attendee",d).on("click",".remove",Le),$(".selected-external-attendee",d).on("click",".remove",Be),d.on("click",".attendee-empty-state.internal",He),d.on("click",".attendee-empty-state.external",We),W.change(Te),q.on("focusout keyup paste",k.validateMeetingWith),be.hide(),"new"!=mode&&Ce(nominationInfo.request.actions),d.on("click",".accept-meeting",T).on("click",".decline-meeting",O).on("click",".cancel-meeting",P).on("click",".attendee_reinvite",ke).on("click",".attendee_accept",N).on("click",".attendee_decline",F).on("click",".discard-meeting",dt),e=actions_on_behalf,envDetails.isBookSession()&&(function(){if(envDetails.isBookSessionEdit()){for(var e=nominationInfo.request.requestor.uuid,t=!1,n=nominationInfo.requestors.length-1;!t&&n>=0;n--)t=nominationInfo.requestors[n][1]===e;!1===t&&(nominationInfo.requestors=[[nominationInfo.request.requestor.first_name+" "+nominationInfo.request.requestor.last_name,e]])}}(),u=Ge(),g=$(ae.selector,d),y=$(ae.selector,l),ze(g,y),ze(y,g),ae.append(u),pt()&&f.fetchConfigurations()),envDetails.isBookSessionEdit()&&(ut(),function(){envDetails.currentUser.uuid;var e,t,n,i,s,a,o=Ge();o.length>1?(e=$("#change-requestor",d),t={allowClear:!0,cache:!0,width:"100%",placeholder:i18n.t("please_select_requestor")},n=$e(),t.data=n.map(function(e){return{id:e[1],text:e[0]}}),e.removeClass("hide"),e.select2(t).on("change",Ke),i=ue,s=fe,(a=Je().request.requestor)&&a.uuid&&(i.val(a.uuid).trigger("change"),s.text(i.first().find("option:selected").text()))):function(){var e=$("#change-requestor",d),t=_.first($e()),n={requestor_uuid:t[1]};w.fetchSessionNominations(n),e.addClass("hide"),$("#change-requestor-label").removeClass("hide").text(t[0])}()}(),ge=nominationInfo.request.uuid,M=nominationInfo.request.session.id,$(".book-meeting .meeting-id",d).removeAttr("data-i18n").text(i18n.t("session_id")+M),$("#change-nomination-form",d).removeClass("hide"),S=nominationInfo.request.status,V.removeClass("pending cancelled approved").addClass(S),Q.text(S),Ne(nominationInfo.request.session),Fe(nominationInfo.request.users.internal,nominationInfo.request.users.external)),ve.on("show.bs.modal",function(e){if(envDetails.isBookSession()){var t=v.getSelectedSession();0==h.getAvailableCountForSessionNomination(t)&&!t.settings.enable_waitlist&&(e.preventDefault(),e.stopPropagation(),$(this).modal("hide"),a.notificationModal({body:i18n.t("room_capacity_exceeded_for_session"),title:i18n.t("room_capacity_exceeded_title_for_session"),type:"notification","class":"red"}))}}),envDetails.isBookSessionEdit()&&(de.attr("data-i18n","UPDATE"),le.attr("data-i18n","UPDATE")),("new"===window.mode||window.envDetails.isBookSession())&&m.getAllMeetingTypes(!0,!1,{callback:Qe})},openMappingInEditMode:function(e){h.setEditMappingUuid(e),y.selectMappingAttendees({internal:e.internal_users,external:e.external_users},e),r.goTo()},showTopicForEditMapping:function(e){var t=_.isEmpty(e.topic)?"":e.topic.uuid;$("#mapping_topic",l).val(t).trigger("change")},setTopicForEditMapping:function(e){var t=e.topic?e.topic.uuid:"";selectedTopicUuuid=t,D.setSelectedTopic.trigger(t)},openSessionInEditMode:function(e){h.setEditMappingUuid(e),m.editRoom(e.room)}}}();t.exports=R}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/app/scripts/MappingModule/MappingInMaking/handler.js","/app/scripts/MappingModule/MappingInMaking")},{"../../Session/actions":32,"../../Session/store":33,"../../commons/book/MeetingInMaking/handler":50,"../../commons/granular_edit":55,"../Attendee/actions":9,"../Attendee/handler":10,"../Calendar/actions":12,"../MeetingType/actions":20,"../MeetingType/store":22,"../Sessions/actions":24,"../Sessions/store":26,"../Topic/actions":27,"../commonStore":30,"../utilities":31,"./actions":15,"./form_store":16,"./requestor_dropdown":18,"./store":19,_process:65,buffer:63,common_api:"common_api"}],18:[function(e,t,n){(function(n,i,s,a,o,r,d,l,c){var u=e("common_api"),f=e("../MeetingType/store"),h=function(){var e={allowClear:!0,cache:!0,width:"100%",placeholder:i18n.t("please_select_requestor")};function t(e){var t=e.selector,n=e.requestorLabel;t.closest("div").addClass("hide"),n.removeClass("hide").text(t.first().find("option:selected").text())}function n(e,t){return"undefined"!=typeof jiffle?function(e,t){return"undefined"!=typeof jiffle&&(t.ajax={data:function(e){return{search_by_name:(e.term||"").trim(),activity_id:selectedActivityUuid}},transport:function(e,t,n){return u.fetch({data:e.data,url:u.ENDPOINTS.fetch_requestors}).then(t)["catch"](n)},delay:256,processResults:function(e){var t=[];return e&&e.users instanceof Array&&(t=e.users.map(function(e){return{id:e.uuid,text:e.name}})),{results:t}}}),t}(0,t):function(e,t){return t.ajax={delay:256,transport:function(t,n,i){if("function"==typeof e.fetchRequestorAction)return e.fetchRequestorAction(t,n,i)},data:function(e){return{search_by_name:(e.term||"").trim(),activity_id:selectedActivityUuid}},processResults:function(e,t){var n=[];return e&&e.users instanceof Array&&(n=e.users.map(function(e){return{id:e.uuid,text:e.name}})),{results:n}}},t}(e,t)}return{init:function(i){var s,a=i.container,o=_.assign(e,i.config),r=i.containerLabel;if(envDetails.isMeetingManager()||envDetails.isCSM()||envDetails.isJuniorMM())o.minimumInputLength=1,o=n(i,o),a.select2(o),"function"==typeof i.adminPostInstantiate&&i.adminPostInstantiate();else if("yes"===f.getActivitySettings().show_all_requestors)o=n(i,o),a.select2(o);else if(envDetails.isExecutiveAdmin())"All"===envDetails.currentManagedUser||envDetails.currentManagedUser instanceof Array&&(-1!==envDetails.currentManagedUser.indexOf(envDetails.currentUser.uuid)||envDetails.currentManagedUser.length>1)||s instanceof Array&&s.length>1?(o.data=i.requestors.map(function(e){return{id:e.uuid,text:e.name}}),a.select2(o)):t({selector:a,requestorLabel:r}),"function"==typeof i.eaPostInstantiate&&i.eaPostInstantiate();else{var d=nominationInfo.request.requestor&&nominationInfo.request.requestor.uuid;d&&a.val(d).trigger("change"),t({selector:a,requestorLabel:r}),"function"==typeof i.userPostInstantiate&&i.userPostInstantiate()}}}}();t.exports=h}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/app/scripts/MappingModule/MappingInMaking/requestor_dropdown.js","/app/scripts/MappingModule/MappingInMaking")},{"../MeetingType/store":22,_process:65,buffer:63,common_api:"common_api"}],19:[function(e,t,n){(function(n,i,s,a,o,r,d,l,c){var u=e("./actions"),f=e("common_api"),h=e("../MeetingType/actions"),p=e("../MeetingType/store"),m=e("../Sessions/store"),g=e("../Topic/store"),v=e("../Attendee/store").AttendeeStore,y=(e("../Attendee/actions"),e("../Attendee/store").AddEditAttendeeStore),w=e("../Calendar/actions"),b=e("../Sessions/actions"),S=e("../../Sfdc/SfdcAccount/store"),M=e("../../Sfdc/commons"),A=Reflux.createStore({init:function(){this.model={room:{uuid:""},external:[],internal:[],event:null,abstract:"",waitlist:[],session_type:"group_nomination",mapping_uuid:null,enable_waitlist:!1,date_to_fetch:null,account:{is_changed:!0,acc:{id:"",name:""},oppty:{id:"",name:""}}},this.activitySettings={},this.customFormLabels={},this.attendingStatus=null,this.editMapping=null,this.currentMode="",this.listenTo(v,this.attendeeStoreSelection),this.listenTo(m,this.sessionSelection),this.listenTo(y,this.attendeeStoreSelection),this.listenTo(w.eventCreated,this.onEventCreated),this.listenTo(w.setCurrentMode,this.onSetCurrentMode),this.listenTo(p,this.onMeetingTypeChanged),this.listenTo(S,this.onAccountOpptySelected),this.listenToMany(u)},getQuickMeetingConfig:function(){return this.quickMeetingEnabled},setQuickMeetingConfig:function(e){this.quickMeetingEnabled=!_.isUndefined(e)&&!_.isNull(e)&&e.toBoolean()},onFetchConfigurations:function(){f.fetch({url:f.ENDPOINTS.system_configurations}).then(function(e){this.setQuickMeetingConfig(e.data.configurations.quick_meeting_enabled)}.bind(this))},onAccountOpptySelected:function(e){var t=e.type,n=e.data;"account"===t?(this.model.account.is_changed=!0,this.model.account.acc.id=n.id,this.model.account.acc.name=n.name):"opportunity"===t?(this.model.account.is_changed=!0,this.model.account.oppty.id=n.id,this.model.account.oppty.name=n.name):"refreshContactList"===t&&this.onResetAttendees()},onUpdateAttendingStatus:function(e){this.attendingStatus=e},onSetCurrentMode:function(e){this.currentMode=e},moveWaitlistToConfirm:function(e){if(_.isPresent(this.model.waitlist)&&"new"===mode&&envDetails.isBookSession()){var t=_.first(this.model.waitlist);_.remove(this.model.waitlist,{uuid:t.uuid}),this.model[t.type]=this.addAttendee(this.model[t.type],t),delete v[t.type+"AttendeeWaitlist"][t.uuid],"internal"===t.type?v.selection[t.uuid]=t:v.externalAttendeeSelection[t.uuid]=t}},updateSessionStore:function(e,t){if("declined"!==e.invite_status){var n=m.getSelectedSession();if(!n)return;n.user_count=t?n.user_count+1:n.user_count-1,b.updateSessionsEntity(n)}},sessionSelection:function(e){"setSelectedSessionSuccess"===e.action&&e.session&&this.setSessionDetails(e.session)},attendeeStoreSelection:function(e){var t=e.user,n=!1;"internalAttendeeSelected"===e.type?(this.model.internal=this.addAttendee(this.model.internal,t),this.updateSessionStore(t,!0),n=!0):"internalAttendeeUnselected"===e.type?(this.model.internal=this.removeAttendee(this.model.internal,t),this.updateSessionStore(t,!1),this.moveWaitlistToConfirm("internal"),n=!0):"externalAttendeeSelected"===e.type?(this.model.external=this.addAttendee(this.model.external,t),this.updateSessionStore(t,!0),n=!0,"undefined"!=typeof jiffle&&envDetails.isBookSession()&&b.fetchSessionAvailability(this.model)):"externalAttendeeUnselected"===e.type?(this.model.external=this.removeAttendee(this.model.external,t),this.updateSessionStore(t,!1),this.moveWaitlistToConfirm("external"),n=!0):"internalAttendeeWaitlist"===e.type?(this.model.waitlist=this.addAttendee(this.model.waitlist,t),t.type="internal"):"externalAttendeeWaitlist"===e.type?(this.model.waitlist=this.addAttendee(this.model.waitlist,t),t.type="external","undefined"!=typeof jiffle&&envDetails.isBookSession()&&b.fetchSessionAvailability(this.model)):"internalWaitlistAttendeeUnselected"===e.type?this.model.waitlist=this.removeAttendee(this.model.waitlist,t):"externalWaitlistAttendeeUnselected"===e.type?this.model.waitlist=this.removeAttendee(this.model.waitlist,t):"editAttendees"===e.type?(this.model.internal=e.users.internal.slice(),this.model.external=e.users.external.slice(),this.model.waitlist=e.waitlist.internal.concat(e.waitlist.external),this.trigger({action:"onAttendeeSelected",payload:{internalAttendee:this.model.internal,externalAttendee:this.model.external,validInternalAttendees:this.getAttendees("internal"),validExternalAttendees:this.getAttendees("external"),internalAttendeeWaitlist:e.waitlist.internal,externalAttendeeWaitlist:e.waitlist.external}}),window.isLeadsMeeting&&envDetails.isBookSession()&&"new"===mode&&b.fetchSessionAvailability(this.model)):"mappingAttendeesSelected"===e.type&&(this.model.internal=this.addAttendeeList(this.model.internal,e.users.internal),this.model.external=this.addAttendeeList(this.model.external,e.users.external),n=!0),this.trigger({action:"refreshAttendees",payload:{internalAttendee:this.getInternalAttendees(),externalAttendee:this.getExternalAttendees(),internalAttendeeWaitlist:this.getInternalAttendeesWaitlist(),externalAttendeeWaitlist:this.getExternalAttendeesWaitlist()}}),n&&envDetails.shouldFetchCalendarUpdates&&w.updateCalendar(this.model),p.showAvailableRooms(this.getAttendeeCount())},getInternalAttendeesWaitlist:function(){return _.filter(this.model.waitlist,{type:"internal"})||[]},getExternalAttendeesWaitlist:function(){return _.filter(this.model.waitlist,{type:"external"})||[]},getInternalAttendees:function(){return this.model.internal},getExternalAttendees:function(){return this.model.external},getNonDeclinedAttendees:function(e){return _.filter(this.model[e],function(e){return e&&"declined"!==e.invite_status})||[]},getAttendeeCount:function(){return this.getNonDeclinedAttendees("internal").length+this.getNonDeclinedAttendees("external").length},setEditMappingUuid:function(e){this.model.mapping_uuid=e.uuid,this.editMapping=e},clearEditMappingUuid:function(){this.model.mapping_uuid=null,this.editMapping=null},getEditMapping:function(){return this.editMapping},onMeetingTypeChanged:function(e){if(e.payload)if("onRoomChosen"===e.action)this.model.meetingType=e.payload.type,this.model.room=e.payload.room||{},scheduler.callEvent("onDragEnd"),envDetails.shouldFetchCalendarUpdates&&w.updateCalendar(this.model),this.trigger(e);else if("onResetRoomList"===e.action)this.model.meetingType=e.payload.type,this.model.room=e.payload.room||{},this.trigger(e);else if("currentActivitySettings"===e.action)this.setAttendeeSettings(e.payload);else if("fetchedRooms"===e.action){e.payload.data&&e.payload.data.activity;this.model.meetingType||(this.model.meetingType=e.payload.data.activity,this.activitySettings=e.payload.data.activity.settings)}},getAttendeeSettings:function(){return this.attendeeSettings||{}},setAttendeeSettings:function(e){this.attendeeSettings={internalAttendeesHidden:"yes"===e.hide_internal_attendees_in_book_meeting,externalAttendeesHidden:"yes"===e.hide_external_attendees_in_book_meeting}},onEventCreated:function(e){var t=e&&!e.mappingCount?e:null;this.model.event=t,this.trigger({action:"onEventCreated",payload:{event:this.model.event}})},addAttendee:function(e,t){if(t){var n=t.uuid;_.find(e,function(e){return e.uuid===n});e.push(t),e=_.uniq(e,function(e){return e.uuid})}return e},addAttendeeList:function(e,t){return t.length>0&&(e=e.concat(t),e=_.uniq(e,function(e){return e.uuid})),e},removeAttendee:function(e,t){var n=t&&t.uuid;return _.filter(e,function(e){return e.uuid!==n})},filterDeclinedUsers:function(e,t){return _.filter(e,function(e){return"declined"===e.invite_status&&t&&_.find(t,{uuid:e.uuid})})},getAvailableCountForSessionNomination:function(e){return e.capacity-e.user_count},isInValidSessionMeeting:function(){var e,t=g.getSelectedTrackUuid(),n=g.getSelectedTopicUuid(),i=m.selectedSession,s=this.attendingStatus,a=m.getSelectedSession(),o=this.getAvailableCountForSessionNomination(a);return t&&"-"!==t?n&&"-"!==n?i?_.isNull(s)?e=i18n.t("select_if_attending_to_continue_title"):o<0&&!a.settings.enable_waitlist&&(e=i18n.t("room_capacity_exceeded_for_session")):e=i18n.t("select_a_session"):e=i18n.t("select_a_topic"):e=i18n.t("select_a_track"),e},isValidAccount:function(){return!("undefined"!=typeof jiffle&&!window.isLeadsMeeting&&""===this.model.account.acc.id)},getGroupNominationUuid:function(){if(envDetails.isNomination())return nominationInfo.request.uuid},getUserMetaInfo:function(e){var t={};return e.forEach(function(e){var n,i,s;t[e.uuid]={meta_info:"undefined"!=typeof jiffle&&e.Id?(n={},i=window.isLeadsMeeting?"sfdc_lead_id":"sfdc_contact_id",s=e.Id,i in n?Object.defineProperty(n,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):n[i]=s,n):{}}}),t},onCreateSession:function(e,t){var n=this.filterDeclined(this.model.internal),i=this.filterDeclined(this.model.external),s=_.pluck(n[0],"uuid");s=s.concat(_.pluck(i[0],"uuid"));var a=_.pluck(n[1],"uuid");a=a.concat(_.pluck(i[1],"uuid"));var o=_.pluck(this.model.waitlist,"uuid"),r={activity_uuid:selectedActivityUuid,users:s.concat(o),user_preferences:this.getUserMetaInfo(i[0]),declined_attendees:a,topic_uuid:e.topic_management,track_uuid:g.getSelectedTrackUuid(),session_uuid:m.selectedSession.uuid,custom_fields:e,requestor_uuid:t};envDetails.isBookSessionEdit()&&(r.uuid=this.getGroupNominationUuid()),r.meeting_request={},M.addMeetingRequestParams(r.meeting_request,this.model);var d=f.update({url:f.ENDPOINTS.create_group_nomination,data:r});d.then(function(e){this.trigger({action:"onCreateSessionSuccess",payload:{userCount:s.length,data:e}})}.bind(this)),d[d.fail?"fail":"catch"](function(e){var t=e.responseJSON;this.trigger({action:"onCreateSessionFailed",payload:t})}.bind(this))},onCreateSelfNomination:function(){var e=this.model.internal.concat(this.model.external),t={users:_.pluck(e,"uuid")},n=f.update({url:f.replaceUrlParams(f.ENDPOINTS.create_self_nomination,["{{sessionUuid}}",m.selectedSession.uuid]),data:t});n.done(function(e){this.trigger({action:"onCreateSelfNominationSuccess",payload:{}})}.bind(this)),n[n.fail?"fail":"catch"](function(e){this.trigger({action:"onCreateSelfNominationFailure",payload:{}})}.bind(this))},filterDeclined:function(e){return _.partition(e,function(e){return!e.invite_status||"declined"!==e.invite_status})},isRoomAssigned:function(){return!(!this.model.room||!this.model.room.uuid)},isValidMapping:function(){return null===this.model.event||!1===this.isRoomAssigned()?(validationMsg=i18n.t("time_and_room_validation_message",{type:envDetails.isTrackMappingModule()?i18n.t("session_custom_label"):i18n.t("mapping_custom_label")}),{error:!0,message:validationMsg}):{error:!1}},onCreateMapping:function(){var e=this.model.internal.map(function(e){return e.uuid});e=e.concat(this.model.external.map(function(e){return e.uuid}));var t={type:"MeetingTypeMappingContainer",mapping:{activity_uuid:selectedActivityUuid,start_time:moment(this.model.event.start_date).format("YYYY-MM-DD HH:mm A"),end_time:moment(this.model.event.end_date).format("YYYY-MM-DD HH:mm A"),users:e,topic_uuid:g.getSelectedTopicUuid(),room_uuid:this.model.room.uuid}},n=this.getEditMapping();n&&(t.uuid=n.uuid),masterMeetingType.name==window.TRACK_AND_SESSION&&$.extend(t.mapping,{track_uuid:g.getSelectedTrackUuid(),abstract:this.model.abstract,waitlist:this.model.waitlist,session_type:this.model.session_type,enable_waitlist:this.model.enable_waitlist});var i=masterMeetingType.name==window.TRACK_AND_SESSION?f.ENDPOINTS.create_session:f.ENDPOINTS.create_mapping.replace("{activity_uuid}",selectedActivityUuid),s=f.update({url:i,data:t});s.then(function(e){this.trigger({action:"onMappingSaved",payload:e})}.bind(this)),s[s.fail?"fail":"catch"](function(e){var t=e.responseJSON;this.trigger({action:"onMappingSaveFailed",payload:t})}.bind(this))},onResetAttendeesAndRooms:function(){this.model.internal=[],this.model.external=[],this.model.room={uuid:""},h.resetRoomList()},onResetAttendees:function(){this.model.internal=[],this.model.external=[],this.model.waitlist=[],this.trigger({action:"refreshAttendees",payload:{internalAttendee:this.model.internal,externalAttendee:this.model.external,internalAttendeeWaitlist:this.getInternalAttendeesWaitlist(),externalAttendeeWaitlist:this.getExternalAttendeesWaitlist()}})},onUpdateSessionParams:function(e){this.model[e.name]=e.value},isAttendeeRequired:function(e,t){var n=p.getActivity();return n&&n.settings&&"yes"===n.settings[e]&&!this.canRelaxForMMs(n.settings[t])},canRelaxForMMs:function(e){return(envDetails.isCSM()||envDetails.isMeetingManager()||envDetails.isQueueManager()||envDetails.isJuniorMM())&&"yes"===e},getAttendees:function(e){return this.model[e]},onFetchRequestors:function(e,t,n){e.data.activity_uuid=selectedActivityUuid;var i=f.fetch({url:f.ENDPOINTS.mappable_requestors,data:e.data});return i.then(t),i[i.fail?"fail":"catch"](n),i},onBehalfOfMeetingAction:function(e,t,n,i,s,a){var o={url:e};o.type=n,o.data={user_uuid:t},a&&(o.data.declined_comments=a);var r=f.update(o);r.then(function(e){e.onBehalfOf=t,this.trigger({action:i,payload:e})}.bind(this)),r[r.fail?"fail":"catch"](function(e){this.trigger({action:s,payload:e})}.bind(this))},onMeetingAction:function(e,t,n,i,s){var a={url:e};"post"==t&&(a.type="POST"),s&&(a.data={declined_comments:s});var o=f.update(a);o.then(function(e){this.trigger({action:n,payload:e})}.bind(this)),o[o.fail?"fail":"catch"](function(e){var t=e.responseJSON;"undefined"!=typeof jiffle&&(t=e),this.trigger({action:i,payload:t.errors})}.bind(this))},onCanAttendSession:function(e,t){"edit"==mode&&(e.uuid=nominationInfo.request.uuid),f.fetch({url:f.ENDPOINTS.can_attend_session,data:e}).then(function(e){this.trigger({action:t,payload:e})}.bind(this))},onDeleteMapping:function(e,t,n){var i=f.update({url:f.ENDPOINTS.delete_mapping.replace("{{uuid}}",e)});i.then(function(e){this.trigger({action:t,payload:e})}.bind(this)),i[i.fail?"fail":"catch"](function(e){this.trigger({action:n,payload:e})}.bind(this))},onUpdateCalendar:function(e){this.model.date_to_fetch=e,w.updateCalendar(this.model)},onSetCurrentNomination:function(e){this.currentNominationUuid=e},getCurrentNomination:function(){return this.currentNominationUuid},setSessionDetails:function(e){var t=e.room,n=e.cal_start_time,i=e.cal_end_time;this.model.room=t,this.model.event={start_date:n,end_date:i}},onSetTopicName:function(e){this.model.topicName=e},onSetModelData:function(e,t){this.model[e]=t},setCustomFormLabels:function(e,t){this.customFormLabels[e]=t}});t.exports=A}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/app/scripts/MappingModule/MappingInMaking/store.js","/app/scripts/MappingModule/MappingInMaking")},{"../../Sfdc/SfdcAccount/store":36,"../../Sfdc/commons":39,"../Attendee/actions":9,"../Attendee/store":11,"../Calendar/actions":12,"../MeetingType/actions":20,"../MeetingType/store":22,"../Sessions/actions":24,"../Sessions/store":26,"../Topic/store":29,"./actions":15,_process:65,buffer:63,common_api:"common_api"}],20:[function(e,t,n){(function(n,i,s,a,o,r,d,l,c){var u=e("../../commons/book/MeetingType/actions");t.exports=u}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/app/scripts/MappingModule/MeetingType/actions.js","/app/scripts/MappingModule/MeetingType")},{"../../commons/book/MeetingType/actions":51,_process:65,buffer:63}],21:[function(e,t,n){(function(n,i,s,a,o,r,d,l,c){var u=e("./actions"),f=e("./store"),h=(e("../MappingInMaking/store"),e("../Attendee/actions")),p=function(){var e=$(".meeting-list"),t=$(".room-list"),n=".select-room-btn",i=".js_check_room",s=".remove-selected-room",a=$("#meeting-request-container"),o=$("#header_location",a),r=$("a",o),d=null,l=($("#req_page_details_form",a),$("#room-label",a),$("#proceed_page")),c=($(".js_header",l),{fetchedRooms:function(n){var i=n.data.activity.rooms,s=n.data.activity.settings||{},a=+s.min_duration||5,o=+s.minimum_timeslot||5;scheduler.config.event_duration=a,scheduler.config.time_step=o,w(i),(d=f.getSelectedRoom())&&m(d.uuid);window.envDetails.isAbstractOnlyEditableMode()&&(t.add(e).find("*").css("pointer-events","none"),t.addClass("hide"))},filterAvailableRooms:function(e){if(e.isCapicityFilter)return void function(e,t){var n=f.getActivityRooms()||[];n&&0===n.length&&v();w(n=_.filter(n,function(e){var t=e.capacity>=f.attendeeCount;return d&&d.uuid===e.uuid?e.hide="hide":e.hide="",t}))}(0,e.groupData)},onResetRoomList:function(){t.html(""),e.html(""),d=null,selectedOffsite=null,u.getAllMeetingTypes(!0,!1,!0)},onAttendeeCountChanged:function(e){h.canSelectAttendees(e.canSelect)}});function p(e){e.preventDefault(),e.stopPropagation(),m($(this).data("uuid"))}function m(t){v(),function(t){if(d=f.getSpecificRoom(t)){!function(e){t=$(n+"[data-uuid="+e+"]"),t.addClass("hide");var t}(t);var i=HandlebarsTemplates["book/selected_room_done"](d);e.html(i),y(e)}}(t),u.roomChosen(d)}function g(e){e.preventDefault(),e.stopPropagation(),r.text(""),u.roomChosen(null),v()}function v(){if(null!=d){var t=d.uuid;e.empty(),d=null,y($(n+"[data-uuid="+t+"]"))}}function y(e){e.removeClass("hide")}function w(e){var n=HandlebarsTemplates["book/room_item"]({unmapped_rooms:e,hasRooms:e.length>0});t.html(n),function(e){var t,n,i={},s=HandlebarsTemplates["book/room_tooltip"];e.forEach(function(e){i[e.uuid]=e}),$(".room-select-item").not(".hide").each(function(e,a){a=$(a),t=a.data("uuid"),n=i[t],a.popover({html:"true",template:"<div class='popover room-tooltip' role='tooltip'><div class='popover-content'></div></div>",trigger:"hover",placement:"left",content:s(n)})})}(e)}return{init:function(){$(t).on("click",i,p),$(e).on("click",s,g),f.listen(function(e){var t=e.action,n=e.payload||{},i=c[t];i&&i(n)})}}}();t.exports=p}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/app/scripts/MappingModule/MeetingType/handler.js","/app/scripts/MappingModule/MeetingType")},{"../Attendee/actions":9,"../MappingInMaking/store":19,"./actions":20,"./store":22,_process:65,buffer:63}],22:[function(e,t,n){(function(n,i,s,a,o,r,d,l,c){var u=e("../../commons/book/MeetingType/store"),f=Reflux.createStore(u.MeetingStoreObj);t.exports=f}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/app/scripts/MappingModule/MeetingType/store.js","/app/scripts/MappingModule/MeetingType")},{"../../commons/book/MeetingType/store":52,_process:65,buffer:63}],23:[function(e,t,n){(function(n,i,s,a,o,r,d,l,c){"use strict";var u=e("../MappingInMaking/form_store"),f=e("../MappingInMaking/store"),h=e("../MappingInMaking/actions"),p=e("common_api"),m=e("../utilities"),g=m.acceptMeetingHandler,v=m.declineMeetingHandler,y=m.cancelMeetingHandler,w=m.handleAcceptOnBehalf,b=m.handleDeclineOnBehalf,S=m.reinviteSuccessHandler,M=m.reinviteErrorHandler,A=function(){var e,t=$("#proceed-page"),n=$("#requestor-select",t),i=$(".selected-room",t),s=$("#dynamic_form",t),a=$(".selected-time",t),o=$(".approved-text"),r=$(".meeting-status"),d=$(".selected-internal-attendee .selected-attendee-list",t),l=$(".selected-external-attendee .selected-attendee-list",t),c=window.ReactMessage||$(".notification-modal"),m=($(".notification-modal"),$(".accept-meeting")),A=$(".decline-meeting"),D=$(".approve-meeting"),x=$(".cancel-meeting"),k={accept_meeting_url:"Accept",decline_meeting_url:"Decline",reinvite_url:"ReInvite"},C={onBehalfOfSuccess:function(t){var n=t.onBehalfOf;e=t.data.actions_on_behalf,L(n,t.data.invite_status,t.data),c.notificationModal({timeout:!0,"class":"green",title:i18n.t("success"),body:t.message}),Y()},onBehalfOfFailure:function(e){var t=[];_.forEach(e.responseJSON.errors,function(e){t.push(e)});var n=i18n.t("failure");"re_invite"==e.responseJSON.action&&(n=e.responseJSON.error_header);c.notificationModal({timeout:!0,"class":"red",body:t.join(", "),title:n})},onMeetingCancelled:function(e){window.commons.redirectPage(""+window.envDetails.urlPrefix+p.ENDPOINTS.meeting_list+"#session_list")},onMeetingDeclined:function(t){c.notificationModal({timeout:!0,"class":"green",body:t.message,title:i18n.t("meeting_decline_success_header")}),I(t.data.actions),nominationInfo.request.status=t.data.status;var n=envDetails.currentUser.uuid;e=t.data.actions_on_behalf,L(n,t.data.invite_status),Y()},onMeetingAccepted:function(t){c.notificationModal({timeout:!0,"class":"green",body:t.message,title:i18n.t("meeting_accept_success_header")}),I(t.data.actions),nominationInfo.request.status=t.data.status;var n=envDetails.currentUser.uuid;e=t.data.actions_on_behalf,L(n,t.data.invite_status)}};function E(e,t){var n=!1;if(f.isAttendeeRequired(t+"_attendee_presence","relax_"+t+"_attendee_presence_for_mm"))if(n=e.length<=1){var i=e[0]||{};$("#"+t+'-attendees-tab .selected-attendee .unselect-attendee[data-uuid="'+i.uuid+'"]',mainPageContainer).attr("ask_confirm","")}else $("#"+t+"-attendees-tab .selected-attendee .unselect-attendee",mainPageContainer).removeAttr("ask_confirm");return n}function I(e){var t;m.addClass("hide"),A.addClass("hide"),D.addClass("hide"),x.addClass("hide"),e.map(function(e,t){e=e.toLowerCase(),$("."+e+"-meeting").removeClass("hide")}),t=$(".js-secondary-action-list").find("li:not(.hide)").length,$(".js-secondary-action-dropdown")[t?"removeClass":"addClass"]("hide")}function T(e){e.preventDefault(),e.stopPropagation();var t=R(),n=$(this);!n.closest(".selected-attendee-item").hasClass("declined")||t>0?S(n):M()}function O(e,t){var n=t;_.forOwn(k,function(t,i){n[i]?(e[t]="",e[i]=n[i]):e[t]="hide"})}function P(e,t,n,i,s,a){var o=HandlebarsTemplates["book/selected_attendee"],r=o({users:e,askConfirm:n,remove:!1,type:"internal",actions:!0,remove_label:i18n.t("remove"),accept_label:i18n.t("accept"),decline_label:i18n.t("decline"),empty_text:i18n.t("add_internal_participants"),waitlistAttendees:s});d.html(r);var c=o({users:t,askConfirm:i,remove:!1,type:"external",actions:!0,remove_label:i18n.t("remove"),accept_label:i18n.t("accept"),decline_label:i18n.t("decline"),empty_text:i18n.t("add_external_participants"),waitlistAttendees:a});l.html(c),F(e,d),F(t,l),U(e.length,t.length)}function N(e){return(e<10&&0!=e?"0":"")+e}function F(e,t){var n={};e.forEach(function(e){n[e.uuid]=e});var i=HandlebarsTemplates["book/user_tooltip"];$(".selected-attendee-item",t).map(function(){var e=$(this).data("uuid"),t=n[e];$(this).popover({html:"true",template:"<div class='popover room-tooltip' role='tooltip'><div class='popover-content'></div></div>",content:i(t),trigger:"hover",placement:"right"})})}function U(e,i){$(".selectedInternalAttendeeCount",t).text(e),$(".selectedInternalAttendeeCount + span",t).html(i18n.t(1===e?"internal_participant":"internal_participants")),$(".selectedExternalAttendeeCount",t).text(i),$(".selectedExternalAttendeeCount + span",t).html(i18n.t(1===i?"external_participant":"external_participants")),$(".go-to-main",t).hide(),$(".go-to-main-internal",t).addClass("hide"),$(".go-to-main-external",t).addClass("hide");var s=nominationInfo.request.requestor;n.addClass("hide"),$("[id^='requestor-label-div']",t).removeClass("hide").text(s.first_name+" "+s.last_name)}function Y(){var e=0,n=$("#roomFullHolder",t),i=$("#occupiedRoomHolder",t);(e=R())<=0?(n.removeClass("hide"),i.addClass("hide")):(n.addClass("hide"),i.removeClass("hide").find(".occupiedCount").text(e))}function R(){var e,t=nominationInfo.request.session;return e=_.filter(nominationInfo.request.users.internal,{invite_status:"declined"}).length+_.filter(nominationInfo.request.users.external,{invite_status:"declined"}).length,t.capacity-t.user_count+t.otherGroupNominationDeclinedUser+e}function q(e){if(e&&(e.data&&e.data.custom_form_fields&&(e.custom_form_fields=e.data.custom_form_fields),e.custom_form_fields)){var t=$(s).formViewRenderer({fieldCollection:e.custom_form_fields});if(t.init(),nominationInfo.request){var n=nominationInfo.request.custom_fields||{};n.meeting_with=nominationInfo.request.meeting_with,n.topic_management=nominationInfo.request.session.topic.name,nominationInfo.request.custom_fields=n,t.setValues(nominationInfo.request)}t.afterLoad()}}function L(t,n,i){var s=nominationInfo.request.users.internal,a=nominationInfo.request.users.external,o=nominationInfo.request.waitlist.internal,r=nominationInfo.request.waitlist.external;s.map(function(i){e[i.uuid]?i.uuid==t?j(i,e[i.uuid],n):O(i,e[i.uuid]):_.forOwn(k,function(e,t){i[e]="hide"})}),a.map(function(i){e[i.uuid]?i.uuid==t?j(i,e[i.uuid],n):O(i,e[i.uuid]):_.forOwn(k,function(e,t){i[e]="hide"})}),P(s,a,E(f.getAttendees("internal"),"internal"),E(f.getAttendees("external"),"external"),o,r)}function j(e,t,n){n&&(e.invite_status=n),O(e,t)}return{init:function(){var n,s,d;u.listen(q),f.listen(function(e){var t=e.action,n=e.payload||{},i=C[t];i&&i(n)}),h.getCustomForm(),n=nominationInfo.request.session.room,s={offsite:!1,display_name:selectedActivityName,room_name:n.name,capacity:n.capacity},d=HandlebarsTemplates["book/proceed_room"],$(i).html(d(s)),function(e){var t=moment(e.start_time,"YYYY-MM-DD hh:mm A").format("hh:mm A"),n=moment(e.end_time,"YYYY-MM-DD hh:mm A").format("hh:mm A"),i=moment(e.start_time,"YYYY-MM-DD hh:mm A").toDate().toMediumDate(),s=HandlebarsTemplates["book/proceed_time"]({start_time:t,end_time:n,event_date:i,meeting_time_zone:envDetails.event.time_zone,showGotoMainOptionFromDetails:!1});a.html(s)}(nominationInfo.request.session);var l=nominationInfo.request.session.id,c=nominationInfo.request.session;nominationInfo.request.session.otherGroupNominationDeclinedUser=function(e){return e.user_count-e.not_declined_user_count-(t=nominationInfo.request.users,_.filter(t.internal,{invite_status:"declined"}).length+_.filter(t.external,{invite_status:"declined"}).length);var t}(c),$(".book-meeting .meeting-id").removeAttr("data-i18n").text(i18n.t("session_id")+l),function(){$("#js_activity_name").addClass("subnav-border");var e=nominationInfo.request.session.track.name;$("#js_track_name").removeClass("hide").text(e)}();var p,m,S,M,A,D=nominationInfo.request.users.internal,x=nominationInfo.request.users.external,E=nominationInfo.request.waitlist.internal,F=nominationInfo.request.waitlist.external;e=actions_on_behalf,function(t,n){t.map(function(t,n){e[t.uuid]?O(t,e[t.uuid]):_.forOwn(k,function(e,n){t[e]="hide"})}),n.map(function(t,n){e[t.uuid]?O(t,e[t.uuid]):_.forOwn(k,function(e,n){t[e]="hide"})})}(D,x),P(D,x,undefined,undefined,E,F),U(D.length,x.length),p=E.length,m=F.length,S=p>0?N(p)+i18n.t("waitlisted"):"",M=m>0?N(m)+i18n.t("waitlisted"):"",$(".js-internal-waitlist-attendee-count").removeClass("hide").text(S),$(".js-external-waitlist-attendee-count").removeClass("hide").text(M),Y(),A=nominationInfo.request.status,r.removeClass("pending cancelled approved").addClass(A),o.text(A),I(nominationInfo.request.actions),t.on("click",".accept-meeting",g).on("click",".decline-meeting",v).on("click",".cancel-meeting",y).on("click",".attendee_reinvite",T).on("click",".attendee_accept",w).on("click",".attendee_decline",b)}}}();t.exports=A}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/app/scripts/MappingModule/NominationView/handler.js","/app/scripts/MappingModule/NominationView")},{"../MappingInMaking/actions":15,"../MappingInMaking/form_store":16,"../MappingInMaking/store":19,"../utilities":31,_process:65,buffer:63,common_api:"common_api"}],24:[function(e,t,n){(function(e,n,i,s,a,o,r,d,l){var c=Reflux.createActions(["fetchSessions","updateSelectedSession","getSessions","resetSessions","fetchSessionAvailability","updateSessionsEntity"]);t.exports=c}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/app/scripts/MappingModule/Sessions/actions.js","/app/scripts/MappingModule/Sessions")},{_process:65,buffer:63}],25:[function(e,t,n){(function(n,i,s,a,o,r,d,l,c){var u=e("./actions"),f=e("./store"),h=e("../Attendee/actions"),p=e("../Attendee/store").AttendeeStore,m=e("../MeetingType/store"),g=e("../MappingInMaking/store"),v=function(){var e=$("#sessions-list"),t=$("#session-list-container"),n=$("#js-instructions-display"),i={},s={sessionsFetchSuccess:function(n){s=n.sessions,_.isArray(s)&&s.map(function(e){var t=moment(e.start_time,"YYYY-MM-DD hh:mm A");e.remainingCount=e.capacity-e.not_declined_user_count,e.sessionDate=t.toDate().toMediumDate(),e.startTime=moment(e.start_time,"YYYY-MM-DD hh:mm A").format("hh:mm A"),e.endTime=moment(e.end_time,"YYYY-MM-DD hh:mm A").format("hh:mm A")}),function(n){t[0===n.length?"addClass":"removeClass"]("hide");var s=HandlebarsTemplates["mapping_module/session_list"]({sessions:n});e.html(s),i.selectAttendee()}(n.sessions),e.data("page",n.current_page),e.data("totalPages",n.total_pages);var s;var a=$("#sessionCard_"+window.session_uuid);if(envDetails.isBookSessionEdit())return i.setSession();1===n.current_page?i.setSession():a.prop("checked",!0)},sessionsFetchError:function(e){},onSessionAttendeeSelected:function(e){var t=f.getSelectedSession();h.canSelectSessionUsers({selectedSession:t,selectedUser:e.uuid,type:e.type})},currentActivitySettings:function(e){!envDetails.isBookSession()||envDetails.isBookSessionEdit()||envDetails.isBookSessionView()||function(e){if(e.book_meeting_instructions_header=e.book_meeting_instructions_header||i18n.t("instructions"),"yes"===e.instruction_book_meeting){var t=HandlebarsTemplates["book/book_meeting_instructions"];n.html(t({configs:e}))}}(e)}};function a(){var t=$(e).data("page")||1;t!==($(e).data("totalPages")||0)&&u.fetchSessions(t+1)}function o(){var e=nominationInfo.request.session;$("#sessionCard_"+e.uuid).prop("checked",!0).trigger("change"),$("input[name=sessionCard]",t).attr("disabled",!0)}function r(){$("#sessionCard_"+window.session_uuid).prop("checked",!0).trigger("change")}function d(e,t){return _.uniq(_.union(e,t),!1,_.property("uuid"))}function l(){var e={internalUsers:d(nominationInfo.request.users.internal,g.getInternalAttendees()),externalUsers:d(nominationInfo.request.users.external,g.getExternalAttendees()),waitlistUsers:{internal:d(nominationInfo.request.waitlist?nominationInfo.request.waitlist.internal:[],g.getInternalAttendeesWaitlist()),external:d(nominationInfo.request.waitlist?nominationInfo.request.waitlist.external:[],g.getExternalAttendeesWaitlist())}},t=e.internalUsers,n=e.externalUsers,i=e.waitlistUsers;t.map(function(e,t){e.available=!0}.bind(this)),n.map(function(e,t){e.available=!0}.bind(this));var s={internal:t,external:n};h.sessionEditSelectAttendees(s,i,!1)}return{init:function(){$(".back-to-main-page").removeClass("hide"),f.listen(function(e){var t=e.action,n=e.payload||{},i=s[t];i&&i(n)}),p.listen(function(e){var t=e.action,n=e.payload||{},i=s[t];i&&i(n)}),m.listen(function(e){var t=e.action,n=e.payload||{},i=s[t];i&&i(n)}),envDetails.isBookSessionEdit()?i={setSession:o,selectAttendee:l}:envDetails.isBookSession()?(i={setSession:function(){},selectAttendee:function(){}},_.isUndefined(window.session_uuid)||(i.setSession=r),"undefined"!=typeof jiffle&&window.isLeadsMeeting&&(i.selectAttendee=l)):i={setSession:function(){},selectAttendee:function(){}},e.infiniteScroll({offset:200,callback:a})}}}();t.exports=v}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/app/scripts/MappingModule/Sessions/handler.js","/app/scripts/MappingModule/Sessions")},{"../Attendee/actions":9,"../Attendee/store":11,"../MappingInMaking/store":19,"../MeetingType/store":22,"./actions":24,"./store":26,_process:65,buffer:63}],26:[function(e,t,n){(function(n,i,s,a,o,r,d,l,c){var u=e("./actions"),f=e("common_api"),h=e("../Topic/store"),p=e("../../Sfdc/commons"),m=Reflux.createStore({init:function(){this.listenToMany(u),this.fetchingSession=!1,this.perPage=10,this.selectedSession=null,this.sessions=[]},onUpdateSessions:function(e,t){1==t&&(this.sessions=[],nominationInfo.request.session&&this.sessions.push(nominationInfo.request.session)),this.sessions=_.uniq(_.union(this.sessions,e),!1,_.property("uuid")),this.selectedSession&&this.setSelectedSession(this.selectedSession.uuid)},onResetSessions:function(){this.sessions=[]},onGetSessions:function(){return this.sessions},getSelectedSession:function(){return this.selectedSession},setSelectedSession:function(e){this.sessions.length>0&&(this.selectedSession=_.find(this.sessions,function(t){return t.uuid===e}),"edit"===mode&&(this.selectedSession.otherDeclinedAttendees=this.selectedSession.user_count-this.selectedSession.not_declined_user_count-this.getDeclinedAttendeeCount()),this.trigger({action:"setSelectedSessionSuccess",session:this.selectedSession}))},onUpdateSessionsEntity:function(e){this.sessions.length&&(this.selectedSession=e,this.sessions=this.sessions.map(function(t){return t.uuid===e.uuid?e:t}))},getDeclinedAttendeeCount:function(){return _.filter(nominationInfo.request.users.internal,{invite_status:"declined"}).length+_.filter(nominationInfo.request.users.external,{invite_status:"declined"}).length},onFetchSessions:function(e,t){if(!this.fetchingSession){this.fetchingSession=!0;var n=_.assign({book_meeting:!0,include_self_type:!0,per_page:this.perPage,page:e,track_uuid:h.getSelectedTrackUuid(),topic_uuid:h.getSelectedTopicUuid()},t);window.envDetails.isBookSession()&&(n.session_uuid=window.session_uuid);var i=f.fetch({url:f.ENDPOINTS.sessions_list,data:n});i.then(function(e){this.fetchingSession=!1,this.onUpdateSessions(e.data.sessions.items,e.data.sessions.current_page);var t={sessions:this.sessions,current_page:e.data.sessions.current_page,total_pages:e.data.sessions.total_pages};this.trigger({action:"sessionsFetchSuccess",payload:t})}.bind(this)),i[i.fail?"fail":"catch"](function(e){this.fetchingSession=!1,this.trigger({action:"sessionsFetchError",payload:e.responseJSON})}.bind(this))}},onUpdateSelectedSession:function(e){this.setSelectedSession(e),this.trigger({action:"sessionChange",payload:{uuid:e}})},onFetchSessionAvailability:_.debounce(function(e){if(this.getSelectedSession()){var t=p.getAttListToSyncInJN(e),n={session_uuid:this.getSelectedSession().uuid,uuid:nominationInfo.request.uuid,resources:{external_users:t}},i=f.update({url:f.ENDPOINTS.resources_session_availability,data:n});i.then(function(e){this.trigger({action:"sessionAvailabilitiesSuccess",data:e.data})}.bind(this)),i[i.fail?"fail":"catch"](function(e){console.log("Error",error)}.bind(this))}},1e3)});t.exports=m}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/app/scripts/MappingModule/Sessions/store.js","/app/scripts/MappingModule/Sessions")},{"../../Sfdc/commons":39,"../Topic/store":29,"./actions":24,_process:65,buffer:63,common_api:"common_api"}],27:[function(e,t,n){(function(e,n,i,s,a,o,r,d,l){var c=Reflux.createActions(["fetchRelatedTopics","setSelectedTopic","setSelectedTrack","fetchTracks","fetchTopicsForTrack"]);t.exports=c}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/app/scripts/MappingModule/Topic/actions.js","/app/scripts/MappingModule/Topic")},{_process:65,buffer:63}],28:[function(e,t,n){(function(n,i,s,a,o,r,d,l,c){var u=e("./actions"),f=e("./store"),h=e("../Attendee/actions"),p=e("../MeetingType/actions"),m=e("../Calendar/actions"),g=e("../Calendar/store").CalendarAvailabilityStore,v=e("../MappingInMaking/actions"),y=e("../Sessions/actions"),w=e("../MappingInMaking/handler"),b=function(){var e=$(".meeting-with-overlay"),t=$("#mapping_topic"),n=$("#track_select"),i=$("#session-settings"),s={},a=$("#sessions-list"),o=$("#session-list-container"),r=$("#js-instructions-display"),d={getTopicListSuccess:function(e){e&&e.data&&e.data.topics instanceof Array&&A(e.data.topics);window.isEditMapping&&w.showTopicForEditMapping(window.mapping)},getTrackListSuccess:function(e){e&&e.data&&e.data.tracks instanceof Array&&S(n,e.data.tracks,_.isUndefined(window.track_uuid)&&!window.isEditMapping,!1);window.isEditMapping&&n.val(window.mapping.track.uuid).trigger("change"),window.envDetails.isBookSession()&&!_.isUndefined(window.track_uuid)&&n.val(window.track_uuid).trigger("change")}};function l(e){var t=$(this).val(),n=$("#enable_waitlist");"self_nomination"===t?n.prop("checked",!1).trigger("change").attr("disabled",!0):n.attr("disabled",!1)}function c(){C(),s.topicChange.call(this);var e=function(){};window.envDetails.isBookSession()||(e=function(){$("#details-form").valid()}),setTimeout(e,0)}function b(){n.select2({allowClear:!window.envDetails.isBookSession(),width:"100%",placeholder:i18n.t("please_select")}),n.one("change",M),u.fetchTracks({activity_uuid:window.selectedActivityUuid,include_all:window.envDetails.isBookSession()},"getTrackListSuccess","getTrackListFail")}function S(e,t,n,i,s){if(e.length>0){var a=t.map(function(e,t){return $("<option>").val(e.uuid).text(e.name)});i&&a.unshift($("<option>").val("-").text(i18n.t("please_select"))),e.html(a),n&&t.length>0?(e.select2("val",t[0].uuid),s&&o.removeClass("hide")):e.select2("val",null)}}function M(){C();var e,t=n.val();if(t&&"-"!==t){u.setSelectedTrack(t),u.fetchTopicsForTrack({trackUuid:t,include_all:window.envDetails.isBookSession()},"getTopicListSuccess","getTopicListFail");var s=HandlebarsTemplates["book/session_form"];f.getTrack(t)&&i.html(s(f.getTrack(t).settings)),window.isEditMapping&&window.envDetails.isTrackMappingModule()&&(e=window.mapping,_.each(e.settings,function(e,t){var n=i.find('[name="'+t+'"].form-control');switch(t){case"enable_waitlist":n.prop("checked",e).trigger("change");break;default:n.val(e).trigger("change")}}))}else A([]),u.setSelectedTrack(null);n.one("change",M),window.envDetails.isAbstractOnlyEditableMode()&&i.find('[name!="abstract"].form-control').prop("disabled",!0)}function A(e){window.envDetails.isBookSessionEdit()||S(t,e,_.isUndefined(window.topic_uuid),!1,!0),window.envDetails.isBookSession()&&(!_.isUndefined(window.topic_uuid)&&t.val(window.topic_uuid).trigger("change"),$("select[name='topic_management']").prop("disabled",!0).html(t.find("option").clone()).trigger("change"))}function D(){var e=t.val()||"";"-"===e&&(e=""),window.selectedTopicUuuid=e,u.setSelectedTopic(e),v.setTopicName(t.find('option[value="'+e+'"]').text()),m.setCurrentMode("listing"),p.topicChange(),m.initialAvailability(null,g.getStartDate()),v.resetAttendeesAndRooms()}function x(){D(),h.resetAttendeeList(),h.topicChange()}function k(){var e=t.val();"-"===e&&(e=""),window.selectedTopicUuuid=e,u.setSelectedTopic(e),v.setTopicName(t.find('option[value="'+e+'"]').text()),e?(y.fetchSessions(1),o.removeClass("hide"),E()):(a.html(""),o.addClass("hide"),E()),I(),function(){var e=$(this).val();$("select[name='topic_management']").val(e).trigger("change")}.call(this)}function C(){"edit"!==window.mode&&r.removeClass("hide")}function E(){y.updateSelectedSession(null),I(),h.resetAttendeeList(),h.clearAttendees(),v.resetAttendees()}function I(){$("#users-list").addClass("hide")}return{init:function(){var a;if(window.envDetails.isGeneraMappingModule())s={topicChange:x},"yes"===window.associatedSettings.assign_topic?(t.closest(".form-group").removeClass("hide"),a=t.select2({allowClear:!0,width:"100%",placeholder:i18n.t("please_select")}),!1===window.isEditMapping&&a.on("change",c)):!1===window.isEditMapping&&x(),e.find(".form-group:not('.hide')").length||e.hide();else if(window.envDetails.isTrackMappingModule())s={topicChange:D},n.closest(".form-group").removeClass("hide"),b(),i.on("change",".form-control",function(e){var t,n=$(e.target).attr("name");switch(n){case"enable_waitlist":t=$(e.target).prop("checked");break;default:t=$(e.target).val()}v.updateSessionParams({name:n,value:t})}).on("change","[name='session_type']",l),t.closest(".form-group").removeClass("hide"),a=t.select2({allowClear:!0,width:"100%",placeholder:i18n.t("please_select")}),!1===window.isEditMapping&&a.on("change",c);else if(window.envDetails.isBookSession()){b(),s={topicChange:k};var o={width:"100%",placeholder:i18n.t("please_select")};if(window.envDetails.isBookSessionEdit()){var r=window.nominationInfo.request.session.topic;o.data=[{id:r.uuid,text:r.name}]}(a=t.select2(o)).on("change",c),window.envDetails.isBookSessionEdit()&&a.val(r.uuid).trigger("change")}f.listen(function(e){var t=e.action,n=e.payload||{},i=d[t];i&&i(n)})}}}();t.exports=b}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/app/scripts/MappingModule/Topic/handler.js","/app/scripts/MappingModule/Topic")},{"../Attendee/actions":9,"../Calendar/actions":12,"../Calendar/store":14,"../MappingInMaking/actions":15,"../MappingInMaking/handler":17,"../MeetingType/actions":20,"../Sessions/actions":24,"./actions":27,"./store":29,_process:65,buffer:63}],29:[function(e,t,n){(function(n,i,s,a,o,r,d,l,c){var u=e("./actions"),f=e("common_api"),h=Reflux.createStore({topic_uuid:null,tracks:{},track_uuid:null,init:function(){this.listenToMany(u)},onFetchRelatedTopics:function(e,t,n){var i=f.fetch({url:f.ENDPOINTS.fetch_topics,data:e});i.then(function(e){this.trigger({action:t,payload:e})}.bind(this)),i[i.fail?"fail":"catch"](function(e){this.trigger({action:n,payload:e})}.bind(this))},onSetSelectedTopic:function(e){this.topic_uuid=e},getSelectedTopicUuid:function(){return this.topic_uuid},onFetchTracks:function(e,t,n){e.per_page=500;var i=f.fetch({url:f.ENDPOINTS.tracks_list,data:e});i.then(function(e){_.each(e.data.tracks,function(e){this.tracks[e.uuid]=e},this),this.trigger({action:t,payload:e})}.bind(this)),i[i.fail?"fail":"catch"](function(e){this.trigger({action:n,payload:e})}.bind(this))},getTrack:function(e){return this.tracks[e]},onSetSelectedTrack:function(e){this.track_uuid=e},getSelectedTrackUuid:function(){return this.track_uuid},onFetchTopicsForTrack:function(e,t,n){var i=f.fetch({url:f.ENDPOINTS.fetch_track_topics.replace("{{uuid}}",e.trackUuid),data:{only_mapped:!0,include_all:e.include_all}});i.then(function(e){this.trigger({action:t,payload:e})}.bind(this)),i[i.fail?"fail":"catch"](function(e){this.trigger({action:n,payload:e})}.bind(this))}});t.exports=h}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/app/scripts/MappingModule/Topic/store.js","/app/scripts/MappingModule/Topic")},{"./actions":27,_process:65,buffer:63,common_api:"common_api"}],30:[function(e,t,n){(function(n,i,s,a,o,r,d,l,c){var u=e("common_api"),f=Reflux.createStore({init:function(){this.customLabels={}},fetchCustomLabels:function(){var e=this,t=u.fetch({url:u.ENDPOINTS.custom_labels});t[t.done?"done":"then"](function(t){e.customLabels=t.data.custom_labels})},getAllCustomLabels:function(){return this.customLabels},getCustomLabel:function(e){return e?this.customLabels[e]:""}});t.exports=f}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/app/scripts/MappingModule/commonStore.js","/app/scripts/MappingModule")},{_process:65,buffer:63,common_api:"common_api"}],31:[function(e,t,n){(function(n,i,s,a,o,r,d,l,c){var u=e("../CommentsModal"),f=e("./MappingInMaking/actions"),h=e("../utils"),p=function(){var e=$(".notification-modal"),t=window.ReactMessage||e;function n(e){var t=window.nominationInfo&&window.nominationInfo.request,n=t.invite_options,i=t.users.external,s=!1,a=!1;return i=i.map(function(e){return e.uuid}),n&&("yes"===n.decline_comments_enabled&&(s=!0),window.envDetails.isConsecutiveMeeting&&n.show_options_for_external&&e&&-1!==i.indexOf(e)&&(s=a="yes"===n.show_options_for_external)),{enabled:s,showOnlyOthers:a}}return{handleDeclineOnBehalf:function(t){t.preventDefault(),t.stopPropagation();var i=$(this),s=i.closest(".selected-attendee-item").data("uuid"),a=function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";f.behalfOfMeetingAction(i.data("url"),s,"post","onBehalfOfSuccess","onBehalfOfFailure",e)},o=n(s),r=o.enabled,d=o.showOnlyOthers?[]:h.getDeclineComments();r?u.show({callback:a,comments:d}):e.notificationModal({type:"confirmation","class":"blue",title:i18n.t("confirmation_title"),body:i18n.t("decline_confirm_message"),done:function(){return a()}})},declineMeetingHandler:function(e){e.preventDefault(),e.stopPropagation();var t=function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"",t=window.nominationInfo.request.action_urls.decline_meeting_url;f.meetingAction(t,"post","onMeetingDeclined","onMeetingActionFailed",e)},i=n().enabled,s=h.getDeclineComments();i?u.show({callback:t,comments:s}):t()},cancelMeetingHandler:function(t){t.preventDefault(),t.stopPropagation(),e.notificationModal({type:"confirmation",title:i18n.t("cancel_meeting_title"),body:i18n.t("cancel_meeting_confirmation"),done:function(){var e=nominationInfo.request.action_urls.cancel_meeting_url;f.meetingAction(e,"post","onMeetingCancelled","onMeetingActionFailed")}})},acceptMeetingHandler:function(e){e.preventDefault(),e.stopPropagation();var t=window.nominationInfo.request.action_urls.accept_meeting_url;f.meetingAction(t,"post","onMeetingAccepted","onMeetingActionFailed")},reinviteSuccessHandler:function(t){e.notificationModal({type:"confirmation","class":"blue",title:i18n.t("confirmation_title"),body:i18n.t("reinvite_confirm_message"),done:function(){var e=t.closest(".selected-attendee-item").data("uuid"),n=t.data("url");f.behalfOfMeetingAction(n,e,"post","onBehalfOfSuccess","onBehalfOfFailure")}})},reinviteErrorHandler:function(){t.notificationModal({body:i18n.t("reached_room_capacity_while_reinvite"),title:i18n.t("reached_room_capacity_while_reinvite_title"),"class":"red"})},handleAcceptOnBehalf:function(t){t.preventDefault(),t.stopPropagation();var n=$(this);e.notificationModal({type:"confirmation","class":"blue",title:i18n.t("confirmation_title"),body:i18n.t("accept_confirm_message"),done:function(){var e=n.closest(".selected-attendee-item");f.behalfOfMeetingAction(n.data("url"),e.data("uuid"),"post","onBehalfOfSuccess","onBehalfOfFailure")}})}}}();t.exports=p}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/app/scripts/MappingModule/utilities.js","/app/scripts/MappingModule")},{"../CommentsModal":3,"../utils":61,"./MappingInMaking/actions":15,_process:65,buffer:63}],32:[function(e,t,n){(function(e,n,i,s,a,o,r,d,l){var c=Reflux.createActions(["fetchSessions","fetchSessionNominations","fetchSessionCheckinList","checkinSession","checkinAttendee"]);t.exports=c}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/app/scripts/Session/actions.js","/app/scripts/Session")},{_process:65,buffer:63}],33:[function(e,t,n){(function(n,i,s,a,o,r,d,l,c){var u=e("./actions"),f=e("common_api"),h=Reflux.createStore({init:function(){this.listenToMany(u),this.sessions=[],this.fetching=!1,this.per_page_session_count=10,this.current_page=1,this.total_pages=0},generateExportUrl:function(){return[envDetails.urlPrefix||"",f.ENDPOINTS.session_export].join("")},onFetchSessions:function(e,t){if(0==this.getFetchState()){this.updateFetchState(!0);var n=f.fetch({url:f.ENDPOINTS.sessions_list,data:{page:e,per_page:t||this.per_page_session_count}});n.then(function(e){this.updateFetchState(!1),this.setCurrentPage(this.getCurrentPage()+1),this.setTotalPageCount(Math.ceil(e.data.sessions.total_entries/this.per_page_session_count)),this.sessions=this.sessions.concat(e.data.sessions.items),this.trigger({type:"sessionlisting",data:{sessions:this.sessions,total:e.data.sessions.total_entries,totalExternal:e.data.external_requests_count,totalInternal:e.data.internal_meetings_count,totalConsec:e.data.consecutive_meetings_count}})}.bind(this)),n[n.fail?"fail":"catch"](function(e){this.updateFetchState(!1)}.bind(this))}},getFetchState:function(){return this.fetching},updateFetchState:function(e){this.fetching=e},getCurrentPage:function(){return this.current_page},setCurrentPage:function(e){this.current_page=e},getTotalPageCount:function(){return this.total_pages},setTotalPageCount:function(e){this.total_pages=e},getSessionObj:function(e){return _.find(this.sessions,function(t){return t.uuid===e})},onFetchSessionNominations:function(e){e=_.extend(e,{page:1,per_page:500}),"undefined"!=typeof nominationInfo&&nominationInfo.request.session.uuid&&(e=_.extend(e,{session_uuid:nominationInfo.request.session.uuid}));var t=f.fetch({url:f.ENDPOINTS.session_nominations,data:e});t.then(function(t){t.data.session_uuid=e.session_uuid,this.trigger({type:"sessionNominations",data:t})}.bind(this)),t[t.fail?"fail":"catch"](function(e){var t=e.responseJSON;this.trigger({action:"onCreateSessionFailed",payload:t})}.bind(this))}}),p=Reflux.createStore({init:function(){this.listenToMany(u),this.perPage=10,this.totalPages,this.currentPage=1,this.isFetching=!1,this.sessions=[]},onFetchSessionCheckinList:function(e){!1===this.getFetchState()&&(this.setFetchState(!0),f.fetch({url:f.ENDPOINTS.session_checkin_list,data:{page:e,per_page:this.perPage}}).done(function(e){this.setData(e.data.sessions),this.setTotalPages(e.data.total_entries),this.setCurrentPage(this.getCurrentPage()+1),this.trigger({action:"onSessionCheckinListSuccess",payload:{data:this.getData(),totalInternal:e.data.internal_request_count||0,totalSessions:e.data.sessions_count||0,totalExternal:e.data.external_requests_count||0,totalConsecMeeting:e.data.consecutive_meetings_count||0}}),this.setFetchState(!1)}.bind(this)))},onCheckinSession:function(e,t){f.update({url:f.ENDPOINTS.update_checkin_status,type:"put",data:{user_uuid:"",object_type:"Session",meeting_uuid:e,status:t}}).done(function(e){}.bind(this))},onCheckinAttendee:function(e,t,n,i){f.update({url:f.ENDPOINTS.update_checkin_status,type:"put",data:{object_type:"Session",user_uuid:t,meeting_uuid:e,status:n}}).done(function(e){}.bind(this))},setData:function(e){this.sessions=this.sessions.concat(e)},getData:function(){return this.sessions},setTotalPages:function(e){this.totalPages=e%this.perPage==0?e/this.perPage:Math.floor(e/this.perPage)+1},setCurrentPage:function(e){this.currentPage=e},getCurrentPage:function(){return this.currentPage},setFetchState:function(e){this.isFetching=e},getTotalPages:function(){return this.totalPages},getFetchState:function(){return this.isFetching}});t.exports={SessionStore:h,CheckinStore:p}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/app/scripts/Session/store.js","/app/scripts/Session")},{"./actions":32,_process:65,buffer:63,common_api:"common_api"}],34:[function(e,t,n){(function(e,n,i,s,a,o,r,d,l){var c=Reflux.createActions(["fetchAccount","fetchAccounts","fetchOppoprunity","refreshContactList"]);t.exports=c}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/app/scripts/Sfdc/SfdcAccount/actions.js","/app/scripts/Sfdc/SfdcAccount")},{_process:65,buffer:63}],35:[function(e,t,n){(function(n,i,s,a,o,r,d,l,c){var u=e("./actions"),f=e("./store"),h=e("../commonStore"),p=function(){var e=$("#account-opportunity"),t=$(".js-meeting-with"),n=e.find("#select_account"),i=e.find("#select_opportunity"),s=$(".notification-modal"),a={showErrors:r,showdefaultdetails:function(e){l(e.account_id,e.name);var t=0!=e.opportunities.length?e.opportunities[0]:null;t&&t.opportunity_id===f.selectedOpportunity.id?(m(t.opportunity_id,t.name),f.updateOpptySelection(t.opportunity_id,t.name)):m()}};function o(e,t){f.updateAccountSelection(e,t),"undefined"!=typeof jiffle&&u.refreshContactList()}function r(e){e=_.flatten(_.values(e));s.notificationModal({"class":"red",timeout:!0,title:i18n.t("account_oppty_error_title"),body:e.join(", ")})}function d(e,t){l("-1",e),m("-1",t),n.attr("disabled","disabled"),i.attr("disabled","disabled")}function l(e,t,i){var s={type:"account",placeholder:envDetails.sfdcCustomLabels.account_placeholder};e&&t&&(s.initSelection=function(n,i){n.html($("<option/>").val(e).text(t)),i({id:e,text:t})}),$("a","li#meetingWithInfo").text(t);n.select2(g(s));i&&(o(e,t),c(e,t))}function c(e,t){$("#meeting_account_id").val(e),$("#meeting_with").val(t).prop("disabled",window.Boolean(t)),$("#req_page_meeting_with").val(t).prop("disabled",window.Boolean(t))}function p(e){$("#meeting_opportunity_id").val(e)}function m(e,t){var n={type:"opportunity",placeholder:envDetails.sfdcCustomLabels.opportunity_placeholder};e&&t&&(n.initSelection=function(n,i){n.html($("<option/>").val(e).text(t)),i({id:e,text:t})}),i.find("option").remove(),i.select2(g(n))}function g(e){var t={allowClear:!0,minimumInputLength:3,placeholder:e.placeholder};return t.ajax={data:function(e){return{id:"-",name:e.term,account_id:f.selectedAccount.id||"",opportunity_id:f.selectedOpportunity.id||"",originate:envDetails.event.event_system_name,activity_uuid:window.selectedActivityUuid}},delay:256,transport:function(t,n,i){var s;return(s="account"==e.type?f.onFetchAccounts(t.data):f.onFetchOppoprunity(t.data)).then(n),s[s.fail?"fail":"catch"](i),s},processResults:function(t){var n="storeAccountDetails",i="accounts",s="account_id",a=[];"account"!==e.type&&(n="storeOpptyDetails",i="opportunities",s="opportunity_id");var o=t.data&&t.data[i]||[];return f[n](o),o.length&&(a=o.map(function(e){return{id:e[s],text:e.name}})),{results:a}}},e.initSelection&&(t.initSelection=e.initSelection),t}return{init:function(){if("undefined"!=typeof jiffle||envDetails.bookMeetingWithAccOpp){if(window.currentMeetingInfo=envDetails.isBookSession?window.nominationInfo:window.meetingInfo,"undefined"==typeof jiffle&&(window.currentMeetingInfo.request.mode=window.mode),e.removeClass("hide"),t.addClass("hide"),[h,f].forEach(function(e){e.listen(function(e){var t=a[e.type];t&&t(e.data)})}),"edit"===window.currentMeetingInfo.request.mode){var n,s="",_=window.currentMeetingInfo.request.custom_fields;_.meeting_opportunity_id?((n=f.onFetchOppoprunity({opportunity_id:_.meeting_opportunity_id,name:"",originate:envDetails.event.event_system_name})).then(function(e){data=e.data,opportunity=data&&data.opportunities&&data.opportunities.length&&data.opportunities[0]||{},s=opportunity.name,d(opportunity.account&&opportunity.account.name,s)}),n[n.fail?"fail":"catch"](function(e){r(e.responseJSON.errors)})):_.meeting_account_id?((n=f.onFetchAccounts({account_id:_.meeting_account_id,name:"",originate:envDetails.event.event_system_name})).then(function(e){s="No Selection",d(e.data&&e.data.accounts&&e.data.accounts.length&&e.data.accounts[0].name||"",s)}),n[n.fail?"fail":"catch"](function(e){r(e.responseJSON.errors)})):d(s="No Selection",s)}else f.selectedAccount.id?u.fetchAccount():(l(),m());var g,v,y,w,b,S,M,A;e.on("change","#select_account",function(e){var t=$(this).find("option:selected"),n=t.val()||"",i=t.text()||"";m(),p(""),f.updateOpptySelection("",""),$("a","li#meetingWithInfo").text(i),o(n,i),c(n,i)}),e.on("change","#select_opportunity",function(e){var t=$(this).find("option:selected"),n=t.val()||"",i=t.text()||"";if(f.updateOpptySelection(n,i),p(n),t.length&&!f.selectedAccount.id){var s=f.getAccountInfo(t.val())||{};l(s.account.account_id,s.account&&s.account.name,!0)}}),"undefined"!=typeof jiffle&&(g=window.location.search,v=new RegExp("[?&]accid=([^&#]*)").exec(g),y=new RegExp("[?&]oppid=([^&#]*)").exec(g),w=new RegExp("[?&]lead_ids=([^&#]*)").exec(g),b=window.currentMeetingInfo,"edit"===(S=b&&b.request).mode?envDetails.hideOpportunityInAccountsFlow&&!S.custom_fields.meeting_opportunity_id&&$(i).closest(".opportunity").addClass("hide"):v&&envDetails.hideOpportunityInAccountsFlow&&!y?$(i).closest(".opportunity").addClass("hide"):envDetails.hideOpportunityInJNMeetingFlow&&!(v||y||w)&&$(i).closest(".opportunity").addClass("hide")),M=envDetails.sfdcCustomLabels&&envDetails.sfdcCustomLabels.account_label,A=envDetails.sfdcCustomLabels&&envDetails.sfdcCustomLabels.opportunity_label,e.find(".account").find("label").text(M).attr("title",M),e.find(".opportunity").find("label").text(A).attr("title",A),e.tooltip({trigger:"hover",selector:".js_tooltip"})}}}}();t.exports=p}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/app/scripts/Sfdc/SfdcAccount/handler.js","/app/scripts/Sfdc/SfdcAccount")},{"../commonStore":38,"./actions":34,"./store":36,_process:65,buffer:63}],36:[function(e,t,n){(function(n,i,s,a,o,r,d,l,c){var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};var f=e("./actions"),h=e("common_api"),p=Reflux.createStore({init:function(){this.listenToMany(f),this.selectedAccount={name:"",id:this.urlParam("accid")},this.selectedOpportunity={name:"",id:this.urlParam("oppid")},this.currentAccountList={},this.currentOpptyList={}},getAccountInfo:function(e){return this.currentOpptyList[e]},getOpptyList:function(e){return this.currentAccountList[e]},storeOpptyDetails:function(e){this.currentOpptyList=e.map(function(e){return t={},n=e.opportunity_id,i=e,n in t?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i,t;var t,n,i}).reduce(function(e,t){return u({},e,t)},{})},storeAccountDetails:function(e){var t={};_.forEach(e,function(e){t[e.id]=e}),this.currentAccountList=t},urlParam:function(e,t){var n=t||window.location.href,i=new RegExp("[?&]"+e+"=([^&#]*)").exec(n);return null==i?"":i[1]||0},updateAccountSelection:function(e,t){var n={id:e,name:t};this.selectedAccount=n,this.trigger({type:"account",data:n})},updateOpptySelection:function(e,t){var n={id:e,name:t};this.selectedOpportunity=n,this.trigger({type:"opportunity",data:n})},onFetchAccount:function(){var e=h.fetch({data:{account_id:this.selectedAccount.id,opportunity_id:this.selectedOpportunity.id},url:h.ENDPOINTS.fetch_account});e.then(function(e){if(1==e.data.accounts.length){var t=e.data.accounts[0];this.updateAccountSelection(t.account_id,t.name),this.trigger({type:"showdefaultdetails",data:t})}}.bind(this)),e[e.fail?"fail":"catch"](function(e){this.trigger({type:"showErrors",data:e.responseJSON.errors})}.bind(this))},onFetchAccounts:function(e){return h.fetch({data:e,prefix:"undefined"==typeof jiffle?"/portal":"",url:h.ENDPOINTS.fetch_account})},onFetchOppoprunity:function(e){return h.fetch({data:e,prefix:"undefined"==typeof jiffle?"/portal":"",url:h.ENDPOINTS.fetch_opportunity})},onRefreshContactList:function(){this.trigger({type:"refreshContactList"})}});t.exports=p}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/app/scripts/Sfdc/SfdcAccount/store.js","/app/scripts/Sfdc/SfdcAccount")},{"./actions":34,_process:65,buffer:63,common_api:"common_api"}],37:[function(e,t,n){(function(n,i,s,a,o,r,d,l,c){var u=e("../commonStore"),f=function(){var e=$("#account-opportunity"),t=$(".notification-modal"),n=$("#meeting-request-container"),i=$("#req_page_meeting_with",n),s=$("a","li#meetingWithInfo"),a={showErrors:function(e){var e=_.flatten(_.values(e));t.notificationModal({"class":"red",timeout:!0,title:i18n.t("lead_error_title"),body:e.join(", ")})}};return{init:function(){"undefined"!=typeof jiffle&&(window.currentMeetingInfo=envDetails.isBookSession?window.nominationInfo:window.meetingInfo,e.addClass("hide"),u.listen(function(e){var t=a[e.type];t&&t(e.data)}),"new"===mode&&!unescape(unescape($.urlParam("meeting_with")))&&window.currentMeetingInfo.request.users&&window.currentMeetingInfo.request.users.external.length>0&&function(e){if(1==e.length)i.val(e[0].company_name).trigger("change"),s.text(e[0].company_name);else{var t=[];_.forEach(e,function(e,n){t.push(e.company_name)}),_.uniq(t).length>1?(i.val("").trigger("change"),s.text("")):(i.val(t[0]).trigger("change"),s.text(t[0]))}}(window.currentMeetingInfo.request.users.external))},isLeadsMeeting:function(){var e;return"new"!==mode||_.isEmpty($.urlParam("lead_ids"))&&"leadFlow"!==$.urlParam("source")||(e=!0),_.isEmpty(meetingInfo.request.custom_fields.meeting_lead_id)||(e=!0),e||!1}}}();t.exports=f}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/app/scripts/Sfdc/SfdcLeads/handler.js","/app/scripts/Sfdc/SfdcLeads")},{"../commonStore":38,_process:65,buffer:63}],38:[function(e,t,n){(function(n,i,s,a,o,r,d,l,c){var u=e("common_api"),f=e("./commons"),h=e("./SfdcAccount/store"),p=Reflux.createStore({init:function(){},onSyncAttendeeToSfdc:function(e,t){var n={meeting_source:window.isLeadsMeeting?"Lead":"Account",customFields:f.getExtAttSfdcCustomFields(e.custom_fields),account_id:"edit"===window.currentMeetingInfo.request.mode?window.currentMeetingInfo.request.custom_fields.meeting_account_id:h.selectedAccount.id},i="edit"===window.currentMeetingInfo.request.mode?window.currentMeetingInfo.request.custom_fields.meeting_opportunity_id:h.selectedOpportunity.id;envDetails.syncContactsToSfdcOpportunity&&i&&(n.opportunity_id=i);var s=u.update({url:u.ENDPOINTS.sync_att_to_sfdc,data:_.assign({user:e},n)});s.then(function(e){t(e)}.bind(this)),s[s.fail?"fail":"catch"](function(e){this.trigger({type:"showErrors",data:e.responseJSON.errors.error}),t(e)}.bind(this))}});t.exports=p}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/app/scripts/Sfdc/commonStore.js","/app/scripts/Sfdc")},{"./SfdcAccount/store":36,"./commons":39,_process:65,buffer:63,common_api:"common_api"}],39:[function(e,t,n){(function(e,n,i,s,a,o,r,d,l){var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},u=function(){function e(e,n){var i="";return window.isLeadsMeeting&&(n||(n=t(e)),_.each(n,function(e){if(e.Id)return i=e.Id,!1})),i}function t(e){var t=_.cloneDeep(e.external);return e.waitlist&&e.waitlist instanceof Array&&(t=t.concat(_.cloneDeep(e.waitlist))),t}return{addMeetingRequestParams:function(n,i){if("undefined"!=typeof jiffle){var s=t(i);n.account_id="new"===mode?i.account.acc.id:window.currentMeetingInfo.request.custom_fields.meeting_account_id,n.opportunity_id="new"===mode?i.account.oppty.id:window.currentMeetingInfo.request.custom_fields.meeting_opportunity_id,n.lead_id="new"===mode?e(i,s):window.currentMeetingInfo.request.custom_fields.meeting_lead_id}},getValidLeadId:e,syncExtAttendeeToSFDC:function(e,t){return"undefined"!=typeof jiffle&&(t?e.sync_contact:!(!envDetails.showJifflenowExternalAttendees||e.id)&&(window.isLeadsMeeting?envDetails.syncLeadsToSfdc:envDetails.syncContactsToSfdc))},getExtAttSfdcCustomFields:function(e){var t={};return _.forEach(envDetails.extatt_custom_field_mappings,function(n,i){t[i]=e[n]||""}),t},getAttListToSyncInJN:function(e){if("undefined"==typeof jiffle)return[];var n=[];return _.forEach(t(e),function(e){var t=c({},e),i=t.consent_given,s=i===undefined?"false":i,a=t.consent_details,o=a===undefined?"":a,r={title:e.title||"-",uuid:e.uuid,first_name:e.first_name,last_name:e.last_name,email:e.email,contact_no:e.contact_no||"-",company_name:e.company_name,custom_fields:e.custom_fields,sfdc_info:{},consent:s,consent_details:o};r.sfdc_info[window.isLeadsMeeting?"sfdc_lead_id":"sfdc_contact_id"]=e.Id,n.push(r)}),n}}}();t.exports=u}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/app/scripts/Sfdc/commons.js","/app/scripts/Sfdc")},{_process:65,buffer:63}],40:[function(e,t,n){(function(e,n,i,s,a,o,r,d,l){var c=Reflux.createActions(["fetchUserFormRule","fetchProfileCustomForm"]);t.exports=c}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/app/scripts/UserForms/actions.js","/app/scripts/UserForms")},{_process:65,buffer:63}],41:[function(e,t,n){(function(e,n,i,s,a,o,r,d,l){var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.exports=(Handlebars.registerHelper("isTrue",function(e,t){return e&&e.toBoolean()?t.fn(this):t.inverse(this)}),Handlebars.registerHelper("isFalse",function(e,t){return e&&e.toBoolean()?t.inverse(this):t.fn(this)}),Handlebars.registerHelper("ifObject",function(e,t){return"object"===(void 0===e?"undefined":c(e))?t.fn(this):t.inverse(this)}),Handlebars.registerHelper("compare_text",function(e,t,n){return e===t?n.fn(this):n.inverse(this)}),Handlebars.registerHelper("alias_users",function(e){return e&&e.email&&e.email.length>0?new Handlebars.SafeString(e.email.join(",")):""}),!0)}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/app/scripts/UserForms/handlebar_methods.js","/app/scripts/UserForms")},{_process:65,buffer:63}],42:[function(e,t,n){(function(n,i,s,a,o,r,d,l,c){var u=e("./actions"),f=e("./store"),h=(e("./handlebar_methods"),function(){var e=null,t=["internal"],n="add_user_form",i={},s={fetchUserFormFields:function(t){r(t.standardFields,a),r(t.customFields,o),"function"==typeof e&&e({formRenderers:i,sfdcDefaults:t.sfdcDefaults||{}})}};function a(e,t){var i={};e[t].forEach(function(e){i[e.field_name]=e});var s=HandlebarsTemplates["user_forms/"+n];$("#"+t+"PrimaryFields").html(s({formLabels:i,userDetails:envDetails.user||{}}))}function o(e,t){var n=e[t+"_custom_form"],s=$("#"+t+"AdditionalFormFields").formRenderer({fieldCollection:n});s.init(),i[t]=s}function r(e,n){t.forEach(function(t){n(e,t)})}return{init:function(i){t="string"==typeof i.type?[i.type]:["internal","external"],i.isNewUser,e=i.callback,n=i.templateName,f.listen(function(e){var t=s[e.type];"function"==typeof t&&t(e)}),u.fetchUserFormRule("fetchUserFormFields")}}}());t.exports=h}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/app/scripts/UserForms/handler.js","/app/scripts/UserForms")},{"./actions":40,"./handlebar_methods":41,"./store":44,_process:65,buffer:63}],43:[function(e,t,n){(function(n,i,s,a,o,r,d,l,c){var u=e("common_api"),f={processSfdcFields:function(e,t){var n=t.customFields,i=t.standardFields,s=_.cloneDeep(n.external_custom_form),a=_.cloneDeep(i.external),o=[];[].push.apply(o,a),[].push.apply(o,s),envDetails.extatt_custom_field_mappings=this.getSFDCFieldMappings(s);var r=u.fetch({url:u.ENDPOINTS.fetch_external_user_form_fields,data:this.getSFDCRequestObj(o)});r.then(function(t){var o=this.processMappingMatrix(t,s);i.external=a,n.external_custom_form=s,this.trigger({type:e,standardFields:i,customFields:n,sfdcDefaults:o})}.bind(this)),r[r.fail?"fail":"catch"](function(t){this.trigger({type:e,standardFields:i,customFields:n})}.bind(this))},processMappingMatrix:function(e,t){var n={};return _.forEach(t,function(t){var i=e.mapped_fields[t.field_name];if(i){var s=i.value;"textfield"===t.type&&(s=""===i.value?t.values:i.value),t.values=i.prefill,n[t.field_name]=s}}),n},getSFDCRequestObj:function(e){var t={mapped_fields:{}};return _.forEach(e,function(e){e.integration_field&&e.integration_field.uuid&&(t.mapped_fields[e.field_name]={value:"",prefill:"",integration_field_uuid:e.integration_field.uuid})}),t},getSFDCFieldMappings:function(e){var t={};return _.forEach(e,function(e){e.integration_field&&e.integration_field.uuid&&(t[e.integration_field.uuid]=e.field_name)}),t}};t.exports=f}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/app/scripts/UserForms/sfdc_store.js","/app/scripts/UserForms")},{_process:65,buffer:63,common_api:"common_api"}],44:[function(e,t,n){(function(n,i,s,a,o,r,d,l,c){var u=e("./actions"),f=e("common_api"),h=e("./sfdc_store"),p=Reflux.createStore({init:function(){this.listenToMany(u)},mixins:[h],onFetchUserFormRule:function(e){var t=f.fetch({url:f.ENDPOINTS.fetch_user_form_rules,prefix:f.ENDPOINTS.portal});t.then(function(t){var n={internal:[],external:[]};if(t.data instanceof Array){var i=_.groupBy(t.data,"type");n.internal=this.processData(i.InternalUserFormField),n.external=this.processData(i.ExternalUserFormField)}this.onFetchProfileCustomForm(e,n)}.bind(this)),t[t.fail?"fail":"catch"](function(t){this.onFetchProfileCustomForm(e,{internal:[],external:[]})}.bind(this))},processData:function(e){var t=[];return e instanceof Array&&(t=e.map(function(e){return e.field_info.field_name=e.field_name,e.field_info})),t},onFetchProfileCustomForm:function(e,t){var n=f.fetch({url:f.ENDPOINTS.fetch_portal_custom_form,prefix:f.ENDPOINTS.portal});n.then(function(n){var i=_.groupBy(n.data,"type"),s=_.groupBy(i.UserForm,"name"),a={};_.forEach(s,function(e,t){a[t]=_.first(e).fields}),"undefined"!=typeof jiffle?this.processSfdcFields(e,{standardFields:t,customFields:a}):this.trigger({type:e,standardFields:t,customFields:a})}.bind(this)),n[n.fail?"fail":"catch"](function(n){this.trigger({type:e,standardFields:t,customFields:{internal_custom_form:[],external_custom_form:[]}})}.bind(this))}});t.exports=p}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/app/scripts/UserForms/store.js","/app/scripts/UserForms")},{"./actions":40,"./sfdc_store":43,_process:65,buffer:63,common_api:"common_api"}],45:[function(e,t,n){(function(e,n,i,s,a,o,r,d,l){var c=Reflux.createActions(["fetchInternal","fetchExternal","selectExternalAttendee","unselectExternalAttendee","selectInternalAttendee","unselectInternalAttendee","searchInternal","searchExternal","eventCreated","tabChanged","roleFilterChosen","removeFilters","filterInternal","filterExternal","createAttendee","editAttendees","canSelectAttendees","updateAreYouAttending","showAttendeesList","unselectAttendee","domainValidate","topicChange","resetAttendeeList","resetParticipantList","sessionChange","clearAttendees","selectMappingAttendees","sessionEditSelectAttendees","canSelectSessionUsers","addAttendeeData","setAttendeeSettings"]);t.exports=c}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/app/scripts/commons/book/Attendee/actions.js","/app/scripts/commons/book/Attendee")},{_process:65,buffer:63}],46:[function(e,t,n){(function(n,i,s,a,o,r,d,l,c){var u=e("./actions"),f=e("common_api"),h=e("../../../Sfdc/SfdcAccount/store"),p={init:function(){this.listenTo(h,this.refreshExtAttList),this.listenToMany(u),this.attendees={},this.externalAttendees={},this.perPage=15,this.fetching=!1,this.fetchingExternal=!1,this.attendee_type="internal",this.selection={},this.tag_clouds={},this.externalAttendeeSelection={},this.editAttendeeStatusHash={internal:{},external:{}},this.canSelect=!0,this.isSFDC="undefined"!=typeof jiffle},updateInviteeHash:function(e,t){var n=this.editAttendeeStatusHash.internal[e]||this.editAttendeeStatusHash.external[e];n&&(n.invite_status=t)},onResetParticipantList:function(){this.selection={},this.onEditAttendees({internal:[],external:[]}),this.onSearchInternal(this.searchTerm)},setTagCloudFilter:function(e,t){this.tag_clouds[e]=t,this.externalAttendeeSelection={}},setTagCloudFilterForEdit:function(e){this.tag_clouds=e},onFetchInternal:function(e,t){if(!1===this.fetching){this.fetching=!0;var n=_.pick(this.tag_clouds,function(e,t){return!_.isEmpty(e)}),i=_.assign({per_page:this.perPage,page:e,search:this.searchTerm,activity_uuid:selectedActivityUuid,tag_clouds:n,ignore_activity:!0},t);"undefined"!=typeof selectedTopicUuuid&&(i.topic_uuid=selectedTopicUuuid),mapping_module&&(i.special_appointment=!0),this.fetchUsers(i,"internal",f.ENDPOINTS.internal_attendees,function(e){e.groupByTag=!_.isEmpty(n),this.trigger({type:"fetchAttendees",data:e}),this.fetching=!1})}},fetchUsers:function(e,t,n,i){"undefined"==typeof meetingInfo||"edit"!==meetingInfo.request.mode||envDetails.isBookSession&&envDetails.isBookSession()||(e.meeting_request=meetingInfo.request.uuid),this.setTimes(e),f.fetch({url:n,data:e}).then(function(e){var n,s=e.data;if("external"===t)"undefined"==typeof jiffle||envDetails.showJifflenowExternalAttendees?(this.externalAttendees=this.prepareAttendeeHash(s.items,this.externalAttendees,t),n=this.prepareExternalAttendeeList()):(this.externalAttendees=this.prepareAttendeeHashSFDC(s.items,this.externalAttendees,t),n=this.prepareExternalAttendeesSFDC());else{this.attendees=this.prepareAttendeeHash(s.items,this.attendees,t);envDetails.currentUser.uuid;n=this.prepareAttendeeList()}var a={items:n,current_page:s.current_page,total_pages:s.total_pages,total_items:s.total_entries};i.call(this,a)}.bind(this))},onFetchExternal:function(e,t){if(!1===this.fetchingExternal){this.fetchingExternal=!0;var n=_.assign({per_page:this.perPage,page:e,search:this.searchTerm,activity_uuid:selectedActivityUuid},t&&t.params);mapping_module&&(n.special_appointment=!0),this.isSFDC&&this.addSelectedAttendeesEmail(n),this.fetchUsers(n,"external",t&&t.endPoint||f.ENDPOINTS.external_attendees,function(e){this.fetchingExternal=!1,this.trigger({type:"fetchExternalAttendees",data:e})})}},addSelectedAttendeesEmail:function(){var e=this;(arguments.length>0&&arguments[0]!==undefined?arguments[0]:{}).selectedAttendees=Object.keys(this.externalAttendeeSelection).map(function(t){return e.externalAttendeeSelection[t].email})},setTimes:function(e){if(this.currentEvent){var t=this.currentEvent.start_date,n=(this.currentEvent.end_date-t)/1e3/60;e.start_time=60*t.getHours()+t.getMinutes(),e.end_time=e.start_time+n,e.event_date=moment(t).format("DD-MM-YYYY")}},prepareAttendeeList:function(){var e=_.map(this.attendees,function(e,t){return _.isEmpty(this.selection[t])?e.selected=!1:e.selected=!0,e}.bind(this));return _.forEach(this.selection,function(t,n){_.isEmpty(this.attendees[n])&&e.push(t)}.bind(this)),e},prepareAttendeeHashSFDC:function(e,t,n){return e.map(function(e,n){t[e.uuid]=e}.bind(this)),(envDetails.isBookSessionEdit&&envDetails.isBookSessionEdit()||window.isLeadsMeeting)&&(_.each(nominationInfo.request.users[n],function(e){delete t[_.findKey(t,{email:e.email})],t[e.uuid]=e}),nominationInfo.request.waitlist&&_.each(nominationInfo.request.waitlist[n],function(e){delete t[_.findKey(t,{email:e.email})],t[e.uuid]=e})),t},prepareAttendeeHash:function(e,t,n){return e.map(function(e,n){t[e.uuid]=e}.bind(this)),envDetails.isBookSessionEdit&&envDetails.isBookSessionEdit()&&(_.each(nominationInfo.request.users[n],function(e){t[e.uuid]=e}),nominationInfo.request.waitlist&&_.each(nominationInfo.request.waitlist[n],function(e){t[e.uuid]=e})),t},prepareExternalAttendeeList:function(){var e=_.map(this.externalAttendees,function(e,t){return _.isEmpty(this.externalAttendeeSelection[t])?e.selected=!1:e.selected=!0,e}.bind(this));return _.forEach(this.externalAttendeeSelection,function(t,n){_.isEmpty(this.externalAttendees[n])&&e.push(t)}.bind(this)),e},prepareExternalAttendeesSFDC:function(){var e=_.map(this.externalAttendees,function(e,t){var n=_.findKey(this.externalAttendeeSelection,{email:e.email});return _.isUndefined(n)?e.selected=!1:_.assign(e,this.externalAttendeeSelection[n],{selected:!0}),e}.bind(this));return _.forEach(this.externalAttendeeSelection,function(t,n){var i=_.findKey(this.externalAttendees,{email:t.email});_.isUndefined(i)&&e.push(t)}.bind(this)),e},onSelectInternalAttendee:function(e){var t=this.attendees[e];t&&(t.selected=!0,this.selection[t.uuid]=t,this.trigger({type:"internalAttendeeSelected",user:t}))},onSelectExternalAttendee:function(e){var t=this.externalAttendees[e];t&&(t.selected=!0,this.externalAttendeeSelection[t.uuid]=t,this.trigger({type:"externalAttendeeSelected",user:t}))},onUnselectInternalAttendee:function(e){var t=this.selection[e];t&&(t.selected=!1,delete this.selection[e],this.trigger({type:"internalAttendeeUnselected",user:t}))},onUnselectExternalAttendee:function(e){var t=this.externalAttendeeSelection[e];t&&(t.selected=!1,delete this.externalAttendeeSelection[e],this.trigger({type:"externalAttendeeUnselected",user:t}))},onResetAttendeeList:function(){this.selection={},this.externalAttendeeSelection={}},onEditAttendees:function(e){var t=e.internal;_.isEmpty(t)||t.map(function(e,t){e.selected=!0,this.selection[e.uuid]=e}.bind(this));var n=e.external;_.isEmpty(n)||n.map(function(e,t){e.selected=!0,this.externalAttendeeSelection[e.uuid]=e}.bind(this)),this.trigger({type:"editAttendees",users:e})},onTabChanged:function(e){var t=this.searchTerm||"";"external"===e&&(t=this.externalSearchTerm||""),this.trigger({type:"tabChanged",searchTerm:t,roles:{}})},resetInternalList:function(){this.attendees={},this.fetching=!1},resetExternalAttendees:function(){this.externalAttendees={},this.fetchingExternal=!1},onSearchInternal:function(e){this.resetInternalList(),this.searchTerm=e,this.onFetchInternal(1)},onSearchExternal:function(e){this.resetExternalAttendees(),this.searchTerm=e,this.onFetchExternal(1)},onEventCreated:function(e){this.currentEvent=e,this.resetAttendees()},onShowAttendeesList:function(e){this.trigger({type:"showAttendeesList",attendeeType:e})},resetAttendeesForTrack:function(){},resetAttendees:function(){masterMeetingType.name===TRACK_AND_SESSION&&mapping_module||(this.resetInternalList(),this.onFetchInternal(1),"undefined"!=typeof selectedTopicUuuid&&(this.resetExternalAttendees(),this.onFetchExternal(1)))},onTopicChange:function(){this.resetAttendees()}},m={init:function(){this.listenToMany(u),this.attendee_data={},this.attendee_type="internal"},updateAttendeeData:function(e){this.attendee_data=e},updateAttendeeType:function(e){this.attendee_type=e},onCreateAttendee:function(){var e=f.update({url:f.ENDPOINTS.user_create,data:{user:this.attendee_data,user_type:this.attendee_type,activity_uuid:selectedActivityUuid}});e.then(function(e){200===e.status&&this.addAttendeeData(e.data,!0)}.bind(this)),e[e.fail?"fail":"catch"](function(e){this.trigger({error:e.responseJSON,success:!1})}.bind(this))},addAttendeeData:function(e,t){}};t.exports={AttendeeStoreObj:p,AddEditAttendeeStoreObj:m}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/app/scripts/commons/book/Attendee/store.js","/app/scripts/commons/book/Attendee")},{"../../../Sfdc/SfdcAccount/store":36,"./actions":45,_process:65,buffer:63,common_api:"common_api"}],47:[function(e,t,n){(function(e,n,i,s,a,o,r,d,l){var c=Reflux.createActions(["eventInfo","fetchAvailability","updateCalendar","updateEvent","eventCreated","initialAvailability","activityCreated","activityDeleted","mappingsFetched","setCurrentMode"]);t.exports=c}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/app/scripts/commons/book/Calendar/actions.js","/app/scripts/commons/book/Calendar")},{_process:65,buffer:63}],48:[function(e,t,n){(function(e,n,i,s,a,o,r,d,l){var c,u,f,h,p,m=(c=$("#legend_expand"),u=$("#legend_view"),f=$("#legend_close"),h=function(){c.removeClass("hide"),u.addClass("hide")},p=function(){c.addClass("hide"),u.removeClass("hide")},{init:function(){u.on("click",h),f.on("click",p)}});t.exports=m}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/app/scripts/commons/book/Calendar/handler.js","/app/scripts/commons/book/Calendar")},{_process:65,buffer:63}],49:[function(e,t,n){(function(n,i,s,a,o,r,d,l,c){var u=e("./actions"),f=e("common_api"),h=window,p=h.meetingInfo,m=h.selectedActivityUuid,g={init:function(){this.listenToMany(u)},onEventInfo:function(){var e=f.fetch({url:f.ENDPOINTS.events_info});e.then(function(e){void 0!==p&&p.request&&(e.meetingRequest=p.request),this.trigger({success:!0,data:e})}.bind(this)),e[e.fail?"fail":"catch"](function(e){this.trigger({success:!1,data:e.responseJSON})}.bind(this))}},v={init:function(){this.listenTo(u.updateCalendar,this.onUpdateCalendar),this.availabilities={},this.resourceBlocks={},this.dateToFetch=null},prepareResourceBlocks:function(e){var t=e.initial_availability;_.forEach(e.double_booking_slots,function(e,n){this.resourceBlocks[n]=_.xor(scheduler.invertZones(e),scheduler.invertZones(t[n])).sort(function(e,t){return e-t})}.bind(this))},getResourceBlocks:function(e){return this.resourceBlocks[moment(e).format("YYYY-MM-DD")]},onUpdateCalendar:function(e){var t=_.result(e.room,"uuid","");this.isOffsiteSelected=!!e.room.address;var n=_.pluck(e.internal,"uuid");if((n=n.concat(_.pluck(e.external,"uuid"))).length>=0||t){var i={resources:{rooms:[t],users:n,external_users:[]}};void 0!==p&&p.request&&(i.meeting_uuid=p.request.uuid),"undefined"!=typeof window.briefing_uuid&&(i.briefing_uuid=window.briefing_uuid),window.mapping_module&&(i.special_appointment=!0,i.mapping_uuid=e.mapping_uuid);var s=e.date_to_fetch||this.dateToFetch;s&&(i.event_date=moment(s).format("DD-MM-YYYY")),i.book_meeting=!0,i.offsite_selected="no",i.activity_uuid=m;var a=f.update({url:f.ENDPOINTS.calendar_availability,data:i});a.then(function(t){this.availabilities=t,this.prepareResourceBlocks(t.data),this.trigger({type:"update",model:e,data:t})}.bind(this)),a[a.fail?"fail":"catch"](function(e){this.trigger(e.responseJSON)}.bind(this))}else u.initialAvailability()},updateStartDate:function(e){this.dateToFetch=e},getStartDate:function(){return this.dateToFetch}},y={init:function(){this.listenTo(u.initialAvailability,this.onInitialAvailability),this.initialAvailabilities={},this.isOffsiteEnabled=!1},onInitialAvailability:function(e,t){var n={activity_uuid:m};"undefined"!=typeof window.briefing_uuid&&(n.briefing_uuid=window.briefing_uuid),n.book_meeting=!0,e&&(this.isOffsiteEnabled=!0),window.mapping_module&&(n.special_appointment=!0),t&&(n.event_date=moment(t).format("DD-MM-YYYY"));var i=f.ENDPOINTS.availability_fetch;window.isEBCEvent&&(i=f.ENDPOINTS.availability_fetch_ebc);var s=f.fetch({url:i,data:n});s.then(function(e){this.initialAvailabilities=e,this.trigger(e)}.bind(this)),s[s.fail?"fail":"catch"](function(e){this.trigger(e.responseJSON)}.bind(this))},getInitialAvailability:function(){var e=this.initialAvailabilities.data;return e.combined_availabilities?(this.isOffsiteEnabled=!0,e.combined_availabilities):(this.isOffsiteEnabled=!1,this.initialAvailabilities.data.room_initial_availabilities)}};t.exports={CalendarEventStoreObj:g,CalendarAvailabilityStoreObj:v,CalendarInitialAvailabilityStoreObj:y}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/app/scripts/commons/book/Calendar/store.js","/app/scripts/commons/book/Calendar")},{"./actions":47,_process:65,buffer:63,common_api:"common_api"}],50:[function(e,t,n){(function(e,n,i,s,a,o,r,d,l){var c=window.ReactMessage||$(".notification-modal"),u={internal:$("#internalAttendeeCount"),external:$("#externalAttendeeCount")},f=function(e,t){!function(e,t){u[e].text(t)}(e,t),u[e][t>0?"removeClass":"addClass"]("hide")};function h(){var e=$("#req_page_meeting_with");!e.val()&&e.focus().click()}t.exports={setAttendeeCount:function(e){var t=e.internalCount,n=e.externalCount;f("internal",t),f("external",n)},init:function(){f("internal",0),f("external",0)},showMandatoryFieldsMsg:function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:i18n.t("mandatory_feilds_required");c.notificationModal({"class":"red",timeout:!0,body:e,dismiss:h})},focusInMeetingWith:h,validateMeetingWith:function(){$("form#details-form").validate().element($(this))}}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/app/scripts/commons/book/MeetingInMaking/handler.js","/app/scripts/commons/book/MeetingInMaking")},{_process:65,buffer:63}],51:[function(e,t,n){(function(e,n,i,s,a,o,r,d,l){var c=Reflux.createActions(["getAllMeetingTypes","meetingTypeChosen","roomChosen","offsiteChosen","eventCreated","editRoom","searchRoom","attendeeCountChanged","updateFilter","applyFilter","resetFilter","topicChange","resetRoomList","fetchMeetingCount","fetchMeetingDetails"]);t.exports=c}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/app/scripts/commons/book/MeetingType/actions.js","/app/scripts/commons/book/MeetingType")},{_process:65,buffer:63}],52:[function(e,t,n){(function(n,i,s,a,o,r,d,l,c){var u=e("./actions"),f=e("../Attendee/actions"),h=e("common_api"),p={init:function(){this.listenToMany(u),this.activity="",this.selectedMeetingType={},this.selectedRoom={},this.attendeeCount=0,this.showOverlay=!1,this.tag_clouds={},this.activityDetailsForARoom={},this.staffEventType="StaffScheduling",this.activitySettings={}},setActivity:function(e){this.activity=e},getActivity:function(){return this.activity},setActivitySettings:function(e){this.activitySettings=e},getActivitySettings:function(){return this.activitySettings||this.activity.settings},setActivityDetailsForARoom:function(e){this.activityDetailsForARoom=e},getActivityDetailsForARoom:function(e){return this.activityDetailsForARoom[e]},getActivityRooms:function(){return this.activity.rooms},showAvailableRooms:function(e){this.onAttendeeCountChanged(e),this.trigger({isCapicityFilter:!0,action:"filterAvailableRooms",payload:{isCapicityFilter:!0}})},setTagCloudFilter:function(e,t){this.tag_clouds[e]=t},setTagCloudFilterForEdit:function(e){this.tag_clouds=e},setMeetingTimes:function(e){if(this.currentEvent){var t=(this.currentEvent.end_date-this.currentEvent.start_date)/1e3/60,n=60*this.currentEvent.start_date.getHours()+this.currentEvent.start_date.getMinutes(),i=n+t;e.event_date=moment(this.currentEvent.start_date).format("DD-MM-YYYY"),e.start_time=n,e.end_time=i}},onGetAllMeetingTypes:function(e,t,n){var i={activity_uuid:selectedActivityUuid};this.setMeetingTimes(i),"undefined"!=typeof meetingInfo&&"edit"===meetingInfo.request.mode&&(i.meeting_request=meetingInfo.request.uuid),"undefined"!=typeof location_uuid&&(i.location_uuid=location_uuid),envDetails.topicManagementEnabled&&envDetails.topicRoomMappingEnabled&&"undefined"!=typeof topic_uuid&&(i.topic_id=topic_uuid);var s,a=_.pick(this.tag_clouds,function(e,t){return!_.isEmpty(e)});("undefined"!=typeof selectedTopicUuuid&&(i.topic_uuid=selectedTopicUuuid),mapping_module)&&(i.special_appointment=!0,window.mapping?s=window.mapping.uuid:n&&(s=n.uuid),i.mapping_uuid=s);var o=envDetails.currentUser.uuid;!1===envDetails.isMeetingManager()&&!1===envDetails.isCSM()&&envDetails.eventType===this.staffEventType&&(i.tagged_user_uuids=[o]);var r=h.fetch({url:h.ENDPOINTS.room_activities,data:_.merge(i,{tag_clouds:a})});r.then(function(i){this.setActivity(i.data.activity),this.setActivitySettings(i.data.activity.settings),this.trigger({action:"currentActivitySettings",payload:i.data.activity.settings});var s=i.data.booking_configs;i.isCapicityFilter=!1,this.getActivity().rooms=_.filter(this.activity.rooms,function(e){return e.mapped_meeting_types=_.pluck(e.activities,"name"),s.can_book_room&&e.available}),i.first_load=e,i.isNewEvent=t,i.configs=s,i.groupByTag=!_.isEmpty(a),this.trigger({action:"fetchedRooms",payload:i}),n.callback&&"function"==typeof n.callback&&n.callback()}.bind(this)),r[r.fail?"fail":"catch"](function(e){this.trigger(e.responseJSON)}.bind(this))},setSelectedRoom:function(e){this.selectedRoom=e},getSelectedRoom:function(){return this.selectedRoom},getMeetingType:function(e){return _.find(this.meetingTypes,function(t){return t.uuid===e})},getSpecificRoom:function(e){var t=this.getActivityRooms();return _.find(t,function(t,n){return t.uuid===e})},onRoomChosen:function(e){this.selectedRoom=e,this.isOffsiteSelected=!1,this.onAttendeeCountChanged(this.attendeeCount),this.trigger({action:"onRoomChosen",payload:{type:this.getActivity(),room:e,offsite:!1}})},onEditRoom:function(e){this.selectedRoom=e,this.isOffsiteSelected=!1,this.trigger({action:"onRoomChosen",payload:{type:this.getActivity(),room:e,offsite:!1}})},onOffsiteChosen:function(e){this.selectedRoom=e,this.isOffsiteSelected=null!==e,this.onAttendeeCountChanged(this.attendeeCount),this.trigger({action:"onRoomChosen",payload:{type:this.getActivity(),room:e,offsite:!0}})},onEventCreated:function(e){this.currentEvent=e,e?this.onGetAllMeetingTypes(!1,!0,{uuid:e.uuid}):this.onGetAllMeetingTypes(!1,!0)},onTopicChange:function(){this.selectedRoom={},this.onGetAllMeetingTypes(!1,!0)},isRoomBigEnough:function(e){return this.attendeeCount<=e.capacity},onAttendeeCountChanged:function(e){this.attendeeCount=e;var t=!0;this.selectedRoom&&this.selectedRoom.capacity&&(t=this.attendeeCount<this.selectedRoom.capacity),f.canSelectAttendees(t),this.trigger({action:"onAttendeeCountChanged",payload:{canSelect:t}})},onResetRoomList:function(){this.activity.rooms=[],this.selectedRoom=null,this.onAttendeeCountChanged(this.attendeeCount),this.trigger({action:"onResetRoomList",payload:{type:this.getActivity(),room:null}}),this.trigger({type:"onResetRoomList"})}};t.exports={MeetingStoreObj:p}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/app/scripts/commons/book/MeetingType/store.js","/app/scripts/commons/book/MeetingType")},{"../Attendee/actions":45,"./actions":51,_process:65,buffer:63,common_api:"common_api"}],53:[function(e,t,n){(function(n,i,s,a,o,r,d,l,c){var u=$(".js-calendar-dropleft"),f=$(".js-calendar-dropright"),h=e("moment");var p=function(e,t){return h(e).add(t,"days")._d},m=function(e,t){return h(e).subtract(t,"days")._d},_=function(e,t){return h(e).diff(t,"days")};function g(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:4,n=scheduler.getState().date,i=p(n,t);i<=e&&(p(i,t-1)>e&&(i=m(e,t-1)),scheduler.setCurrentView(i)),u.removeClass("disabled"),y(e,t)}function v(e,t,n){var i=arguments.length>3&&arguments[3]!==undefined?arguments[3]:4,s=scheduler.getState().date,a=void 0,o=p(s,i-1).getTime()===t.getTime();(a=m(s,o?n:i))>=e&&scheduler.setCurrentView(a),f.removeClass("disabled"),w(e,i)}function y(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:4;p(scheduler.getState().date,t)>e&&f.addClass("disabled")}function w(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:4;m(scheduler.getState().date,t)<e&&u.addClass("disabled")}t.exports={setWeekStart:function(){scheduler.date.week_start=function(e){return e}},hideNonEventDays:function(e,t){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:4;scheduler.ignore_week=function(i){var s=scheduler.getState().date;return h(i).diff(s,"days")+1>n||i<e||i>t}},overrideLimitSpan:function(){scheduler._render_marked_timespan=function(e,t,n){var i=[],s=scheduler.config,a=this._min_date,o=this._max_date,r=!1;if(!s.display_marked_timespans)return i;if(!n&&0!==n){if(e.days<7)n=e.days;else{var d=new Date(e.days);if(r=+d,!(+o>+d&&+a<=+d))return i;n=d.getDay()}var l=a.getDay();l>n?n=7-(l-n):n-=l}var c=e.zones,u=scheduler._get_css_classes_by_config(e);if(scheduler._table_view&&"month"==scheduler._mode){var f=[],h=[];if(t)f.push(t),h.push(n);else{h=r?[r]:scheduler._get_dates_by_index(n);for(var p=0;p<h.length;p++)f.push(this._scales[h[p]])}for(p=0;p<f.length;p++){t=f[p],n=h[p];var m=Math.floor((this._correct_shift(n,1)-a.valueOf())/(864e5*this._cols.length)),_=this.locate_holder_day(n,!1)%this._cols.length;if(!this._ignores[_]){var g=scheduler._get_block_by_config(e),v=Math.max(t.offsetHeight-1,0),y=Math.max(t.offsetWidth-1,0),w=this._colsS[_],b=this._colsS.heights[m]+(this._colsS.height?this.xy.month_scale_height+2:2)-1;g.className=u,g.style.top=b+"px",g.style.lineHeight=g.style.height=v+"px";for(var S=0;S<c.length;S+=2){var M=c[p];if((k=c[p+1])<=M)return[];(C=g.cloneNode(!0)).style.left=w+Math.round(M/1440*y)+"px",C.style.width=Math.round((k-M)/1440*y)+"px",t.appendChild(C),i.push(C)}}}}else{var A=n;if(this._ignores[this.locate_holder_day(n,!1)])return i;if(this._props&&this._props[this._mode]&&e.sections&&e.sections[this._mode]){var D=this._props[this._mode];A=D.order[e.sections[this._mode]];var x=D.order[e.sections[this._mode]];D.days>1?A=A*(D.size||D.options.length)+x:(A=x,D.size&&A>D.position+D.size&&(A=0))}for(t=t||scheduler.locate_holder(A),p=0;p<c.length;p+=2){var k,C;if(M=Math.max(c[p],60*s.first_hour),(k=Math.min(c[p+1],60*s.last_hour))<=M){if(p+2<c.length)continue;return[]}(C=scheduler._get_block_by_config(e)).className=u;var E=24*this.config.hour_size_px+1;C.style.top=Math.round((60*M*1e3-36e5*this.config.first_hour)*this.config.hour_size_px/36e5)%E+"px";var I=Math.max(Math.round(60*(k-M)*1e3*this.config.hour_size_px/36e5)%E,1);C.style.lineHeight=Math.min(I,40)+"px",C.style.height=I+"px",t.appendChild(C),i.push(C)}}return i}.bind(scheduler)},setupSchedulerTemplates:function(e){var t=scheduler.date.date_to_str("%g%a");scheduler.templates.hour_scale=function(e){var n="";if(e.getHours()+e.getMinutes()/60<scheduler.config.last_hour-.5)for(var i=0;i<1;i++)n+="<div style='height:21px;line-height:21px;'>"+t(e)+"</div>",e=scheduler.date.add(e,60,"minute");return n},scheduler.templates.day_scale_date=scheduler.date.date_to_str(scheduler.config.day_date),scheduler.templates.event_class=function(e,t,n){return""},scheduler.templates.tooltip_text=function(e,t,n){return""},scheduler.renderEvent=e.renderEvent,scheduler.templates.event_text=e.event_text,scheduler.templates.event_header=e.event_header},calendarleftSlideHandler:v,calendarRightSlideHandler:g,disableCalendarLeftNavIcon:w,disableCalendarRightNavIcon:y,setupCalendarSlideListeners:function(e,t){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:4;w(e,n),y(t,n);var i=(h(t).diff(e,"days")+1)%n||n;$(".js-calendar-dropright").on("click",function(e){g(t,n)}),$(".js-calendar-dropleft").on("click",function(s){v(e,t,i,n)})},configureCalendarForWeekView:function(e){scheduler.config.check_limits=!0,scheduler.config.collision_limit=1,scheduler.config.start_on_monday=!1,scheduler.config.now_date=new Date(1970,1,1),scheduler.config.day_date="%D, %M %j",scheduler.config.limit_start=scheduler.date.add(e.startDate,-1,"day"),scheduler.config.limit_end=scheduler.date.add(e.endDate,1,"day"),scheduler.config.limit_view=!0,scheduler.config.multi_day=!1,scheduler.config.mark_now=!1,scheduler.config.details_on_create=e.details_on_create||!1,scheduler.xy.min_event_height=e.min_event_height||40,scheduler.config.hour_size_px=60/(e.step||30)*22,scheduler.config.icons_select=e.icons_select||["icon_delete"],scheduler.config.icons_edit=e.icons_edit||["icon_delete"],scheduler.config.time_step=e.time_step||15,scheduler.config.event_duration=e.event_duration||15,scheduler.config.drag_move=e.drag_move||!1,scheduler.xy.nav_height=0,scheduler.config.xml_date="%Y-%m-%d %H:%i",scheduler.config.dblclick_create=!1,scheduler.config.edit_on_create=!1},getWeekStart:function(e){e=h(e);var t=h(scheduler.config.limit_start).add(1,"days").toDate(),n=h.duration(e.diff(t)).asDays();return h(new Date(t)).add(Math.floor(n/7),"week").toDate()},setupCalendarslotInfo:e("./slotInfoHelper"),paintDoubleBookingslots:function(e,t){scheduler.addMarkedTimespan({days:e,zones:t,css:"status-light-green"})},paintInitialBlocks:function(e,t){scheduler.addMarkedTimespan({css:"initial-block",type:"dhx_time_block",days:e,zones:t})},paintResourceBlocks:function(e,t){scheduler.addMarkedTimespan({css:"resource-block",type:"dhx_time_block",days:e,zones:t})},diffenceOfDatesLessThanMaxDays:function(e,t){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:4;return e=h(e),t=h(t),h.duration(t.diff(e)).asDays()<n},getWeekStartForEdit:function(e,t,n){var i=arguments.length>3&&arguments[3]!==undefined?arguments[3]:4,s=Math.floor(_(n,e)/i),a=p(e,s*i);return t=h(t),_(t,a)<=i-1&&(a=m(t,i-1)),a},setWeekStartForJFX:function(e,t){var n;n=scheduler.date.getISOWeek(e)===scheduler.date.getISOWeek(scheduler.date.add(t,1,"day"))?0:e.getDay(),scheduler.date.week_start=function(e){var t=e.getDay();return n&&(t?t-=n:t=n),scheduler.date.date_part(scheduler.date.add(e,-1*t,"day"))}},enableNavigationArrows:function(){u.add(f).removeClass("disabled")},makeCalendarReadOnly:function(){var e=scheduler.addEventNow;scheduler.addEventNow=function(){this.config.readonly||e.apply(this,arguments)}}}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/app/scripts/commons/calendar_helpers.js","/app/scripts/commons")},{"./slotInfoHelper":59,_process:65,buffer:63,moment:67}],54:[function(e,t,n){(function(e,n,i,s,a,o,r,d,l){t.exports={override:function(){scheduler._render_v_bar=function(e,t,n,i,s,a,o,r,d){var l=document.createElement("DIV"),c=e.id,u=d?"dhx_cal_event dhx_cal_select_menu":"dhx_cal_event",f=scheduler.templates.event_class(e.start_date,e.end_date,e);f&&(u=u+" "+f);var h=e.color?"background:"+e.color+";":"",p=e.textColor?"color:"+e.textColor+";":"",m='<div event_id="'+c+'" class="'+u+'" style="position:absolute; top:'+n+"px; left:"+t+"px; width:"+(i-18)+"px; height:"+s+"px;"+(a||"")+'"></div>';d&&(m='<div event_id="'+c+'" class="'+u+'" style="position:absolute; top:'+n+"px; left:"+t+"px; width:"+(i-5)+"px; height:"+s+"px;"+(a||"")+'"></div>'),l.innerHTML=m;var _=l.cloneNode(!0).firstChild;if(!d&&scheduler.renderEvent(_,e,i,s,o,r))return _;_=l.firstChild;var g='<div class="dhx_event_move dhx_header" style=" width:'+(i-20)+"px;"+h+'" >&nbsp;</div>';g+='<div class="dhx_event_move dhx_title" style="'+h+p+'">'+o+"</div>";var v='<div class="dhx_body" style=" width:'+(i-14-(this._quirks?4:14))+"px; height:"+(s-(this._quirks?20:30)+1)+"px;"+h+p+'">'+r+"</div>";d&&(v='<div class="dhx_body" style=" width:'+(i-1-(this._quirks?4:14))+"px; height:"+(s-(this._quirks?20:30)+1)+"px;"+h+p+'">'+r+"</div>"),g+=v;var y="dhx_event_resize dhx_footer";return d&&(y="dhx_resize_denied "+y),g+='<div class="'+y+'" style=" width:'+(i-12-8)+"px;"+(d?" margin-top:-1px;":"")+h+p+'" ></div>',_.innerHTML=g,_}}}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/app/scripts/commons/calendar_overide.js","/app/scripts/commons")},{_process:65,buffer:63}],55:[function(e,t,n){(function(n,i,s,a,o,r,d,l,c){var u=e("moment"),f=$(".js-set-time-form"),h=f.find('[name="start_time"]'),p=f.find('[name="end_time"]'),m=f.find("#error_block"),_={isSSEvent:!1,validationCallback:null},g=$(".js-clear-cal-event");function v(e){Object.assign(_,e)}var y=function(){f.addClass("hide"),f.data("event","")},w=function(){f.removeClass("hide")},b=function(){var e=f.data("event");e&&!k()&&A(e,scheduler.getEvent(e))},S=function(e){$(e.target).is(":not(.js-set-time-form *)")&&b()};function M(e,t){w();var n=scheduler.getEvent(e),i=window.envDetails.isAbstractOnlyEditableMode;return i&&i()||!window.envDetails.can_edit_time?(A(e,n,!0),!0):(n&&"existing-briefing-meeting"!==n.type&&A(e,n),!0)}function A(e,t){I(t,arguments.length>2&&arguments[2]!==undefined&&arguments[2]),f.data("event",e),D()}function D(){T(""),f.find(".help-block").remove(),f.find(".section-caltime-bx").removeClass("has-error")}var x=function(e){var t="";if(e<60){t=e+" "+(e>1?"minutes":"minute")}else{var n=Math.floor(e/60),i=e%60,s=n>1?"hours":"hour";t=0===i?n+" "+s:n+" "+s+" and "+i+" "+(i>1?"minutes":"minute")}return t},k=function(){return f.valid()&&!1===f.hasClass("has-error")};function C(e){if(!h.prop("readonly")&&(T(""),k())){var t=f.data("event"),n=scheduler.getEvent(t),i=n.start_date,s=n.end_date,a=i.toDateString()+" "+h.val(),o=s.toDateString()+" "+p.val(),r=new Date(a),d=new Date(o),l=60*r.getHours()+r.getMinutes(),c=60*d.getHours()+d.getMinutes();if(l>c)return void T(i18n.t("start_time_greater_than_end"));var u=c-l;if(!_.isSSEvent&&(u<scheduler.config.minimum_duration||u>scheduler.config.maximum_duration))return void T(i18n.t("slot_size_invalid",{min_duration:x(scheduler.config.minimum_duration),max_duration:x(scheduler.config.maximum_duration),silentMsg:"meeting"}));if(!window.isEBCEvent){var m=scheduler.config.time_step;if(0!==u%m)return void T(i18n.t("time_should_increament_of_step",{timeStep:x(m)}))}if("function"==typeof _.validationCallback)_.validationCallback({id:n.id,start_date:r,end_date:d},!0,E,"granular_edit");else{if(n.start_date=r,n.end_date=d,scheduler.checkInMarkedTimespan(n,"dhx_time_block"))return void T(i18n.t("slot_unavailable"));scheduler.updateEvent(t),scheduler.callEvent("onEventChanged",[t,n])}}}function E(e,t,n){if(e)if(scheduler.checkInMarkedTimespan(n,"dhx_time_block"))T(i18n.t("slot_unavailable"));else{var i=scheduler.getEvent(n.id);i.start_date=n.start_date,i.end_date=n.end_date,scheduler.updateEvent(n.id),scheduler.callEvent("onEventChanged",[i.id,i])}else T(t)}function I(e){var t=arguments.length>1&&arguments[1]!==undefined&&arguments[1];h.val(u(e.start_date).format("h:mm A")).prop("readonly",t),p.val(u(e.end_date).format("h:mm A")).prop("readonly",t)}function T(e){m.text(e),m.parent()[e?"addClass":"removeClass"]("has-error")}function O(){var e=f.data("event");scheduler.deleteEvent(e)}t.exports={init:function(e){v(e),$.validator.setDefaults({highlight:function(e){$(e).parent().addClass("has-error")},unhighlight:function(e){$(e).parent().removeClass("has-error")}}),$.validator.addMethod("time12",function(e,t){return!!e.match(/^(0?[1-9]|1[012])(:[0-5]\d) [APap][Mm]$/)},"Invalid time format"),f.validate({rules:{end_time:{time12:!0},start_time:{time12:!0}}}),scheduler.attachEvent("onClick",M),scheduler.attachEvent("onEventAdded",M),scheduler.attachEvent("onEventChanged",M),scheduler.attachEvent("onBeforeEventDelete",function(e,t){return""+e==""+f.data("event")&&y(),!0}),f.on("keyup","input",C),$(document).on("click",S),g.on("click",O),y()},setTimeFields:I,resetTimeFields:function(){h.val(""),p.val("")},hideTimeForm:y,convertMinutesToReadable:x,isFormValid:k,clearTimeErrorField:D,setTimeFieldsWithMeetingTime:b}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/app/scripts/commons/granular_edit.js","/app/scripts/commons")},{_process:65,buffer:63,moment:67}],56:[function(e,t,n){(function(e,n,i,s,a,o,r,d,l){var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.exports=(Handlebars.registerHelper("math",function(e,t,n,i){return{"+":(e=+e||0)+(n=+n||0),"-":e-n,"*":e*n,"/":e/n,"%":e%n}[t]}),Handlebars.registerHelper("compare_text",function(e,t,n){return e===t?n.fn(this):n.inverse(this)}),Handlebars.registerHelper("date_format",function(e,t){return moment(new Date(e.replace(/-/g,"/"))).format("ddd DD, MMM YYYY")}),Handlebars.registerHelper("time",function(e,t){return moment(new Date(e.replace(/-/g,"/"))).tz(envDetails.time_zone).format("hh:mm A")}),Handlebars.registerHelper("time_conversion_with_location",function(e,t){var n=envDetails.event?envDetails.current_location.time_zone_converted:envDetails.time_zone;return n?moment(e).tz(n).format("hh:mm A"):""}),Handlebars.registerHelper("time_format",function(e,t){var n=scheduler.date.str_to_date("%Y-%m-%d %h:%i %A");return moment(n(e)).format("hh:mm A")}),Handlebars.registerHelper("ifObject",function(e,t){return"object"===(void 0===e?"undefined":c(e))?t.fn(this):t.inverse(this)}),Handlebars.registerHelper("isFalse",function(e,t){return e&&e.toBoolean()||_.isUndefined(e)?t.inverse(this):t.fn(this)}),Handlebars.registerHelper("check_multiselects",function(e,t){return"multiselect_dropdown"==e?t.fn(this):t.inverse(this)}),Handlebars.registerHelper("nestedAnd",function(){var e=_.values(arguments),t=_.last(arguments),n=e.length-1,i=e.slice(0,n);return _.isEqual(_.times(n,_.constant(!0)),i)?t.fn(this):t.inverse(this)}),Handlebars.registerHelper("nestedOr",function(){var e=_.values(arguments),t=_.last(arguments),n=e.length-1,i=e.slice(0,n);return _.contains(i,!0)?t.fn(this):t.inverse(this)}),Handlebars.registerHelper("showMoreActions",function(){var e=arguments[0],t=arguments[1]||arguments[2]||arguments[3]&&arguments[4]||arguments[5]||arguments[6];t=e&&t;var n=_.last(arguments);return t?n.fn(this):n.inverse(this)}),Handlebars.registerHelper("replaceString",function(e,t,n){var i=new RegExp(t,"g");return e.replace(i,n)}),void Handlebars.registerHelper("hashValue",function(e,t,n){return n[e[t]?"fn":"inverse"](this)}))}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/app/scripts/commons/handlebarHelpers/math.js","/app/scripts/commons/handlebarHelpers")},{_process:65,buffer:63}],57:[function(e,t,n){(function(e,n,i,s,a,o,r,d,l){var c;function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=(u(c={system_configurations:"/configurations/system_configuration",fetch_survey_template:"/configure/consolidated_survey_mail_settings",update_survey_template:"/configure/consolidated_survey_mail_setting",fetch_meeting_list_customer_info:"/importable_customer_info/list",fetch_customer_info_values:"/importable_customer_info",fetch_archived_event_meeting_analytics:"/archived_events/analytics",fetch_archived_events_list:"/event_list_by_type/archived",fetch_archived_reports:"/archived_events/all_reports",get_booth_tour_details:"/booth_tour/list",file_upload_url:"/attachment/{type}",remove_uploaded_file_url:"/attachment/{uuid}",update_endorsement_config:"/configure/endorsement",ext_domain_validation:"/domains/valid",list_briefings_agenda:"/briefing/list_briefings#/list_agenda",users:"/users",fetch_unmapped_topic_entity:"/get_meetings_with_unmapped_topic_entity",meeting_host_count:"/get_meetings_with_meeting_host",fetch_user_details:"/users/{{uuid}}",user_export:"/user/export",activate_user:"/users/UUID/active",reinvite_user:"/users/resend_invite",export_summary_report:"/guided_tour/surveys",upload_user_csv:"/user/import",calendar_user_availability:"/calendar/users",event_info:"/event_info",event_configurations:"/event/{event_uuid}/configurations",user_make_available:"/calendar/make_available",user_make_unavailable:"/calendar/make_unavailable",user_block:"/calendar/block",user_unblock:"/calendar/unblock",block_update:"/calendar/edit_block",user_calendar_export:"/calendar/users/export",company_fetch:"/company",register_user:"/register",alert_fetch:"/alerts",alert_details_fetch:"/alerts/meeting_meta",dismiss_alert:"/alerts/dismiss",notification_fetch:"/notifications",dismiss_notification:"/notifications/dismiss",set_participation:"/meeting_request/set_participation",fetch_topics:"/topics",update_user_profile:"/user/{{uuid}}",fetch_meetings_analytics:"/analytics/meetings",fetch_invitees_analytics:"/analytics/invitees",fetch_customers_analytics:"/analytics/customers",fetch_roles_analytics:"/analytics/roles",users_events:"/users_events",reinvite_users:"/users/resend_invite",remove_from_event:"/users/UUID/inactive",users_events_filters:"/users_events_filters",meeting_request_path:"/meeting_request/new",meeting_request_view_path:"/meeting_request/{uuid}/view",meeting_request_export:"/meeting_request/export",roles_fetch:"/roles",role_create:"/role/create",role_update:"/role/update",role_get_privileges:"/role/{:uuid}/get_privileges",role_set_privileges:"/role/{:uuid}/set_privileges",role_enable:"/role/{:uuid}/enable",role_disable:"/role/{:uuid}/disable",meeting_get_config:"/configure/{:uuid}/meeting_type",meeting_set_config:"/configure/{:uuid}/meeting_type_update",meeting_set_setting:"/setting/activity_update",meeting_get_settings:"/setting/activity",meeting_types:"/meeting_types",ui_set_setting:"/setting/ui_update",ui_get_settings:"/setting/ui",get_announcements:"/setting/announcement",set_announcements:"/setting/announcement_update",availability_fetch:"/meeting_type/availabilities",availability_update:"/configure/update_initial_availabilities",all_meeting_types:"/meeting_types/index"},"event_info","/events"),u(c,"event_details","/event_info"),u(c,"rooms_list","/rooms/list"),u(c,"rooms_export","/room/export"),u(c,"room_create","/room/create"),u(c,"room_update","/room/update"),u(c,"meetings_list","/meeting_requests"),u(c,"facilities_list","/facilities"),u(c,"meeting_availability","/meeting_request/calendar"),u(c,"internal_attendees","/users/internal"),u(c,"external_attendees","/users/external"),u(c,"lead_details","/lead_details"),u(c,"validate_leads","/validate_leads"),u(c,"availability_update","/configure/update_initial_availabilities"),u(c,"calendar_availability","/meeting_request/calendar"),u(c,"meeting_create","/meeting_request/create"),u(c,"meeting_fetch","/meeting_request/{{uuid}}/show"),u(c,"user_create","/user/create"),u(c,"sync_att_to_sfdc","/sync_att_to_sfdc"),u(c,"validate_room_capacity","/room/validate"),u(c,"user_update","/users/{{uuid}}/update"),u(c,"update_mail_template","/mail_template/update"),u(c,"mail_template_type_get","/mail_actions"),u(c,"mail_template_type_entities_get","/mail_action/get_associated_entities"),u(c,"accept_meeting","/meeting_request/{uuid}/accept_meeting"),u(c,"decline_meeting","/meeting_request/{uuid}/decline_meeting"),u(c,"reschedule_meeting","/meeting_request/reschedule"),u(c,"events_info","/events"),u(c,"event_config","/event/configurations"),u(c,"room_availability","/calendar/rooms"),u(c,"room_calendar_export","/calendar/rooms/export"),u(c,"room_unblock","/calendar/unblock"),u(c,"room_make_available","/calendar/make_available"),u(c,"room_make_unavailable","/calendar/make_unavailable"),u(c,"block_update","/calendar/edit_block"),u(c,"meeting_drag","/calendar/relocate"),u(c,"meeting_request_path","/meeting_request/new"),u(c,"meeting_request_edit_path","/meeting_request/{uuid}/edit"),u(c,"upload_room_csv","/room/import"),u(c,"save_form","/custom_form/update"),u(c,"fetch_form","/custom_form/get_fields"),u(c,"alert_fetch","/alerts"),u(c,"alert_details_fetch","/alerts/meeting_meta"),u(c,"dismiss_alert","/alerts/dismiss"),u(c,"dismiss_alert","/alerts/dismiss"),u(c,"notification_fetch","/notifications"),u(c,"dismiss_notification","/notifications/dismiss"),u(c,"fetch_meetings_analytics","/analytics/meetings"),u(c,"fetch_invitees_analytics","/analytics/invitees"),u(c,"fetch_customers_analytics","/analytics/customers"),u(c,"fetch_roles_analytics","/analytics/roles"),u(c,"fetch_rooms_analytics","/analytics/rooms"),u(c,"fetch_booking_analytics","/analytics/booking"),u(c,"fetch_meeting_filters","/reports/meeting_filters"),u(c,"fetch_meeting_data_for_reports","/users/meetings"),u(c,"standard_report_export_url","/users/meetings.pdf?user_uuid={{uuid}}"),u(c,"fetch_users_for_reports","/reports/users_list"),u(c,"fetch_meeting_reports","/meetings"),u(c,"fetch_meeting_reports_header","/headers"),u(c,"activate_event","/event/activate"),u(c,"fetch_activity_list","/activities"),u(c,"cancel_meeting","/meeting_request/{meeting_uuid}/cancel_meeting"),u(c,"time_zone_url","/time_zone"),u(c,"fetch_minimum_timeslot","/setting/minimum_timeslot"),u(c,"update_minimum_timeslot","/setting/minimum_timeslot_update"),u(c,"demand_report_export","/meeting_request/ondemand"),u(c,"mapped_events","/mappable_events"),u(c,"get_nav_header","/events_meetings_menu"),u(c,"fetch_account","/fetch_account"),u(c,"fetch_opportunity","/fetch_opportunity"),u(c,"fetch_meeting_info","/meeting_request/new.json"),u(c,"fetch_edit_meeting_info","/meeting_request/{UUID}/edit.json"),u(c,"fetch_view_meeting_info","/meeting_request/{UUID}/view.json"),u(c,"fetch_edit_nomination_info","/nomination/{UUID}/edit.json"),u(c,"fetch_view_nomination_info","/nomination/{UUID}/view.json"),u(c,"room_activities","/activities_rooms"),u(c,"event_env_details","/event_info"),u(c,"fetch_requestors","/fetch_requestors"),u(c,"domain_validate","/portal/domains/validate"),u(c,"fetch_sf_custom_fields","SFDC"),u(c,"double_booked_resources","/meeting_request/double_booked_resources"),u(c,"meetings_list_filters","/meeting_request/meeting_filters"),u(c,"get_meeting_options","/meeting_filters/filter_options"),u(c,"get_checkin_options","/checkin_filters/filter_options"),u(c,"get_report_options","/reports_filters/filter_options"),u(c,"user_info","/portal/user_info"),u(c,"bulk_approve_meetings","meeting_request/approve_meetings"),u(c,"activity_details","/activities/{uuid}"),u(c,"expert_users","/mapping/experts"),u(c,"expert_users","/mapping/experts"),u(c,"apex_jnmeetings","/apex/JNMeetings"),u(c,"apex_jnsessions","/apex/JNSessions"),u(c,"jn_book_meeting","/apex/JNBookMeeting"),u(c,"jn_view_book_meeting","/apex/JNViewMeeting"),u(c,"jn_view_nomination","/apex/JNNominationView"),u(c,"jn_book_nomination","/apex/JNNominations"),u(c,"apex_jnlistagenda","/apex/JNBriefings"),u(c,"sessions_list","/sessions"),u(c,"fetch_user_form_rules","/user_form_fields"),u(c,"save_profile_preferences","/user_form_fields/update"),u(c,"fetch_portal_custom_form","/forms"),u(c,"save_portal_custom_form","/form/update"),u(c,"portal","/portal"),u(c,"consecutive_meetings_edit_path","/consecutive_meetings/{uuid}/edit"),u(c,"consecutive_meetings_view_path","/consecutive_meetings/{uuid}/view"),u(c,"consecutive_meetings_details","/consecutive_meetings/{uuid}/edit_consecutive_meeting"),u(c,"bulk_endorse_users","/users/enable_endorse_users"),u(c,"fetch_external_user_form_fields","/fetch_sfdc_contacts_fields"),u(c,"get_swappable_room_list","/swap_room/list"),u(c,"swap_room_submit","/swap_room/swap"),u(c,"fetch_consecutive_meeting_notification_settings","/configure/consecutive_meeting/notification_settings"),u(c,"fetch_consecutive_meeting_form_settings","/configure/consecutive_meeting/form_settings"),u(c,"create_consecutive_meetings","/consecutive_meetings"),u(c,"meeting_types_of_consecutive_sub_meetings","/consecutive_meetings/meeting_types"),u(c,"on_behalf_actions","/meeting_request/on_behalf_actions"),u(c,"briefing_centre","/bc"),u(c,"briefing_details","/briefing/{briefing_uuid}"),u(c,"briefing_centre_long_day","/bcs/get_long_day"),u(c,"fetch_valid_mapping_Times","/mappings_valid_start_times"),u(c,"meeting_history","/meeting_request/{uuid}/history"),u(c,"fetch_activities","/user_meeting_types/list"),u(c,"tracks_list","/tracks"),u(c,"fetch_track_topics","/tracks/{{uuid}}/topics"),u(c,"can_attend_session","/can_attend_session"),u(c,"create_group_nomination","/group_nomination/create"),u(c,"fetch_contacts","/fetch_contacts"),u(c,"resources_session_availability","/group_nomination/can_attend"),u(c,"session_nominations","/group_nominations"),u(c,"check_attendee_availability",{url:"/api/v1/users/{uuid}/availability"}),u(c,"give_consent","/consent.json"),u(c,"room_block","/api/v1/room/interim_block"),u(c,"custom_labels","/custom_labels_configurations"),u(c,"fetch_resource_data","/api/v1/resource_data/fetch"),u(c,"time_zone_city_search","/google/cities"),u(c,"get_city_time_zone","/google/timezone"),u(c,"partial_meeting_update","/meeting_request/partial_update"),u(c,"custom_field_options","/custom_form/{UUID}/search"),c);t.exports=f}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/app/scripts/commons/sfdc/api_endpoints.js","/app/scripts/commons/sfdc")},{_process:65,buffer:63}],58:[function(e,t,n){(function(e,n,i,s,a,o,r,d,l){var c,u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},f={users_events:{params:function(e){return{accountId:$.urlParam("accid"),opportunityId:$.urlParam("oppid"),leadIds:$.urlParam("lead_ids")?unescape($.urlParam("lead_ids")).split(","):[]}},callback:function(e){return _.forEach(e.data.events,function(e){e.event_url=unescape(e.event_url),e.action.url=unescape(e.action.url),e.action.tracks_and_sessions_url=unescape(e.action.tracks_and_sessions_url)}),e.data.ebc_events&&e.data.ebc_events.length&&_.forEach(e.data.ebc_events,function(e){e.event_url=unescape(e.event_url),e.locations&&e.locations.length&&_.forEach(e.locations,function(e){e.action.url=unescape(e.action.url)})}),e},sfdcMethod:"getEventList"},add_user_to_event:{params:function(e){return{accountId:$.urlParam("accid"),opportunityId:$.urlParam("oppid"),leadIds:$.urlParam("lead_ids")?unescape($.urlParam("lead_ids")).split(","):[],queryStr:JSON.stringify({api_params:e.data})}},callback:function(e){return _.forEach(e.data.events,function(e){var t=_.first(e);t.event_url=unescape(t.event_url),t.action.url=unescape(t.action.url),t.locations&&t.locations.length&&_.forEach(t.locations,function(e){e.action.url=unescape(e.action.url)})}),e},sfdcMethod:"addYourself"},get_nav_header:{params:function(e){return{accountId:$.urlParam("accid"),eventName:$.urlParam("eventName"),opportunityId:$.urlParam("oppid"),leadIds:$.urlParam("lead_ids")?unescape($.urlParam("lead_ids")).split(","):[],current_location_uuid:$.urlParam("current_location_uuid")}},callback:function(e){return _.forEach(e.data.links,function(e){e.url=unescape(e.url)}),e},sfdcMethod:"getMenuList"},fetch_account:{params:function(e){return{accountId:e.data.id?"":e.data.account_id,opportunityId:e.data.opportunity_id||"",accountName:p(e.data.name)}},callback:function(e){return h(e)},sfdcMethod:"getSFAccounts"},fetch_opportunity:{params:function(e){return{opportunityId:e.data.id?"":e.data.opportunity_id,accountId:e.data.account_id,opportunityName:p(e.data.name)}},callback:function(e){return h(e)},sfdcMethod:"getSFOpportunities"},fetch_meeting_info:{params:v,sfdcMethod:"callJNMethod"},fetch_edit_meeting_info:{params:v,sfdcMethod:"callJNMethod"},fetch_view_meeting_info:{params:v,sfdcMethod:"callJNMethod"},fetch_edit_nomination_info:{params:y,sfdcMethod:"callJNMethod"},fetch_view_nomination_info:{params:y,sfdcMethod:"callJNMethod"},lead_details:{params:function(e){var t=e.data,n=[];t.leadIds&&(n=t.leadIds);var i={leadIds:n,listSize:t.per_page,pgNo:t.page,custom_fields:envDetails.extatt_custom_field_mappings,selectedAttendees:t.selectedAttendees};return t.search?i.queryStr=p(t.search):i.queryStr=t.search||"",i},callback:function(e){e="string"==typeof e?JSON.parse(_.unescape(e)):JSON.parse(_.unescape(JSON.stringify(e)));return _.forEach(e.data.items,function(t,n){meetingInfo.externalAttendees[t.email]?w(e,t,n):(t.uuid="dummy_"+Math.random().toString(36).substring(2),t.statuses={verified:!1,active:!0,approved:null,sso_enabled:!1},meetingInfo.externalAttendees[t.email]=_.cloneDeep(t))}),e},sfdcMethod:"getSFDCLeads"},validate_leads:{params:function(e){return{leadIds:e.data.leadIds,isLeadDetail:$.urlParam("isLeadDetail")}},sfdcMethod:"validateLeads"},fetch_contacts:{params:function(e){var t=e.data,n={accountId:(c=t.account_id)||"",listSize:t.per_page,pgNo:t.page,custom_fields:envDetails.extatt_custom_field_mappings,selectedAttendees:t.selectedAttendees,contactIds:t.contactIds};return t.search?n.queryStr=p(t.search):n.queryStr=t.search||"",n},callback:function(e){meetingInfo.account_id!==c&&(meetingInfo.externalAttendees={},meetingInfo.account_id=c);e="string"==typeof e?JSON.parse(_.unescape(e)):JSON.parse(_.unescape(JSON.stringify(e)));return _.forEach(e.data.items,function(t,n){meetingInfo.externalAttendees[t.email]?w(e,t,n):(t.uuid="dummy_"+Math.random().toString(36).substring(2),t.statuses={verified:!1,active:!0,approved:null,sso_enabled:!1},meetingInfo.externalAttendees[t.email]=_.cloneDeep(t))}),e},sfdcMethod:"getSFDCContacts"},calendar_availability:{params:function(e){return{eventName:$.urlParam("eventName"),queryStr:JSON.stringify({api_params:e.data})}},sfdcMethod:"getCalendar"},fetch_sf_custom_fields:{sfdcMethod:"parseCustFields",params:function(e){return{queryStr:JSON.stringify(e.data)}}},fetch_external_user_form_fields:{sfdcMethod:"getConVals",params:function(e){return{queryStr:JSON.stringify(e.data)}}},meetings_list:{sfdcMethod:"getMeetingListdb"},meeting_create:{params:g,sfdcMethod:"createMeeting"},create_group_nomination:{params:g,sfdcMethod:"createMeeting"},reschedule_meeting:{params:g,sfdcMethod:"createMeeting"},partial_meeting_update:{params:g,sfdcMethod:"createMeeting"},user_create:{sfdcMethod:"createAttendee"},sync_att_to_sfdc:{params:function(e){var t=e.data;return{accountId:t.account_id||"",custom_fields:t.customFields,meetingSource:t.meeting_source,opportunityId:t.opportunity_id||""}},sfdcMethod:"syncAttToSFDC"}};function h(e){return"string"!=typeof e&&(e=JSON.stringify(e)),e=e.replace(/%5C/g,"%5C%5C").replace(/%22/g,"%5C%22").replace(/\+/g," "),e=_.unescape(unescape(e)),JSON.parse(e)}function p(e){return escape((e||"").replace(/['"!%^_\[\]]/g,"\\$&"))}function m(e,t){var n="",i=e.includes("/domains/validate")?"":$.urlParam("eventName");return t===undefined||$.isEmptyObject(t)||(n=$.param({api_params:t})),{eventName:i,url:e,queryStr:n}}function g(e){var t={eventName:$.urlParam("eventName"),meetingType:window.masterMeetingType.name.toLowerCase(),queryStr:JSON.stringify({api_params:e.data})},n=e.data.meeting_request;return n&&(t.accountId=n.account_id||"",t.opportunityId=n.opportunity_id||"",t.leadId=n.lead_id||"",t.meetingSource=_.isEmpty(n.lead_id)?"":"Lead"),t}function v(e){return m(e.url.replace("{UUID}",$.urlParam("meeting")),e.data)}function y(e){return m(e.url.replace("{UUID}",$.urlParam("nomination")),e.data)}function w(e,t,n){var i=meetingInfo.externalAttendees[t.email],s=i.uuid,a=i.statuses;meetingInfo.externalAttendees[t.email]=u({},i,t,{uuid:s,statuses:u({},a)}),e.data.items[n]=_.cloneDeep(meetingInfo.externalAttendees[t.email])}t.exports=f}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/app/scripts/commons/sfdc/method_endpoints.js","/app/scripts/commons/sfdc")},{_process:65,buffer:63}],59:[function(e,t,n){(function(n,i,s,a,o,r,d,l,c){var u=$("#scheduler_here"),f={},h=e("./utils"),p={element:null,clicked:!1},m=0;function g(e){$(".unavailable-popup").length&&m!==e.target.scrollTop&&f.notifyReact(),m=e.target.scrollTop}function v(e){e.element&&!1===e.clicked&&scheduler.unmarkTimespan(e.element)}t.exports=function(e){var t=function(e){var t=scheduler.attachEvent("onMouseMove",function(t,n){var i,s,a=e.meetingTypeStore.getActivitySettings();if(a&&h.isDefined(a.show_summary)&&a.show_summary.toBoolean()&&window.canViewConflictedSummary){var o=scheduler.getActionData(n).date;if(function(e){return e.target.className.indexOf("resource-block")>-1}(n)){v(p);var r=function(e,t){var n=function(e){var t=moment(e);return 60*t.hours()+t.minutes()}(e),i=function(e,t){for(var n=0;n<=e.length-2;n+=2)if(t>=e[n]&&t<=e[n+1])return[e[n],e[n+1]];return[]}(t.getResourceBlocks(e),n),s=i[0],a=i[1];if(a-s<60)return[s,a];var o=Math.floor((n-s)/60),r=s+60*o,d=r+60;return d>a&&(r=(d=a)-60),[r,d]}(o,e.calendarStore);p.element=(i=o,s=r,scheduler.markTimespan({css:"resource-block-highlight",days:i,zones:s})),p.clicked=!1;var d=function(e,t,n,i){var s=$(e.currentTarget).offset(),a=e.pageX-s.left-t,o=e.pageY-s.top;return(a>n/2?"right":"left")+" "+(o>i/2?"top":"bottom")}(n,n.offsetX,n.currentTarget.clientWidth,n.currentTarget.clientHeight);window.renderUnavailablePopup(p.element,function(e,t,n,i){var s=n.model,a=[];_.forEach(s.external,function(e,t){a.push(e.uuid)}),_.forEach(s.internal,function(e,t){a.push(e.uuid)});var o=i&&i.getTimeZoneId(),r=window.isOngoingSales&&o?o:window.envDetails.event.time_zone;return{user_uuid:a,end_time:t[1],start_time:t[0],date:moment(e).format("DD-MM-YYYY"),room_uuid:s.room.uuid?s.room.uuid:"",time_zone:r,activity_uuid:selectedActivityUuid}}(o,r,e.dataStore,e.onGoingSalesStore),f,d)}else!1===function(e){return"trigger-pointer"===e.target.className}(n)&&v(p)}});return u.on("mouseleave",function(e){v(p)}),t}(e);return f={subscribers:[],subscribe:function(e){this.subscribers.push(e)},notifyReact:function(){this.subscribers.forEach(function(e){e()})},notifyCloseEvent:function(e){scheduler.unmarkTimespan(e)},notifyOpenEvent:function(){p.clicked=!0}},u.find(".dhx_cal_data").on("scroll",_.throttle(g,500)),{PubSubManager:f,event:t}}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/app/scripts/commons/slotInfoHelper.js","/app/scripts/commons")},{"./utils":60,_process:65,buffer:63}],60:[function(e,t,n){(function(e,n,i,s,a,o,r,d,l){var c=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],i=!0,s=!1,a=undefined;try{for(var o,r=e[Symbol.iterator]();!(i=(o=r.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(d){s=!0,a=d}finally{try{!i&&r["return"]&&r["return"]()}finally{if(s)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p={isJmmOrAbove:function(){var e=window.envDetails;return e.isMeetingManager()||e.isCSM()||e.isJuniorMM()},isUndefined:function(e){return e===undefined},isNull:function(e){return null===e},isDefined:function(e){return!this.isUndefined(e)&&!this.isNull(e)},isMmOrAbove:function(){var e=window.envDetails;return e.isMeetingManager()||e.isCSM()},camelize:m,extractFormAttributes:function(e){if(!e)return;return[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(e.elements||[])).map(function(e){if("submit"!==e.type&&""!==e.name)return"checkbox"===e.type?h({},e.name,e.checked):"radio"===e.type?e.checked?h({},e.name,e.value):{}:h({},e.name,e.value)}).reduce(function(e,t){return f({},e,t)},{})}};function m(e){var t=arguments.length>1&&arguments[1]!==undefined&&arguments[1],n=void 0===e?"undefined":u(e);return"boolean"===n?e:"number"===n?e:t&&"string"===n?e:"string"===n?function(){return(arguments.length>0&&arguments[0]!==undefined?arguments[0]:"").replace(/[_.-](\w|$)/g,function(e,t){return t.toUpperCase()})}(e):function(e){return e?"[object Array]"===Object.prototype.toString.call(e)?function(){return(arguments.length>0&&arguments[0]!==undefined?arguments[0]:[]).map(function(e){return m(e,!0)})}(e):Object.entries(e).map(function(e){var t=c(e,2),n=t[0],i=t[1];return h({},m(n),m(i,!0))}).reduce(function(e,t){return f({},e,t)},{}):e}(e)}t.exports=p}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/app/scripts/commons/utils.js","/app/scripts/commons")},{_process:65,buffer:63}],61:[function(e,t,n){(function(e,n,i,s,a,o,r,d,l){var c=[],u=[];function f(e){var t=e.flag,n=e.comments,i=n===undefined?[]:n;return"yes"===t&&(i=i.filter(function(e){return e})),i}t.exports={putSearchQueryParam:function(e,t,n){e=e||"";var i=new RegExp("([?&])"+t+"=([^&$]*)").exec(e);return i?e.replace(i[0],""+i[1]+t+"="+n):e.concat(e?"&":"?",t,"=",n)},getDeclineComments:function(){return c},getCancelComments:function(){return u},updateDeclineComments:function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},t=e.decline_comments_enabled,n=e.predefined_decline_comments;c=f({flag:t,comments:n})},updateCancelComments:function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},t=e.cancel_comments_enabled,n=e.predefined_cancel_comments;u=f({flag:t,comments:n})}}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/app/scripts/utils/index.js","/app/scripts/utils")},{_process:65,buffer:63}],62:[function(e,t,n){(function(e,t,i,s,a,o,r,d,l){var c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(e){"use strict";var t="undefined"!=typeof Uint8Array?Uint8Array:Array,n="+".charCodeAt(0),i="/".charCodeAt(0),s="0".charCodeAt(0),a="a".charCodeAt(0),o="A".charCodeAt(0),r="-".charCodeAt(0),d="_".charCodeAt(0);function l(e){var t=e.charCodeAt(0);return t===n||t===r?62:t===i||t===d?63:t<s?-1:t<s+10?t-s+26+26:t<o+26?t-o:t<a+26?t-a+26:void 0}e.toByteArray=function(e){var n,i,s,a,o,r;if(e.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var d=e.length;o="="===e.charAt(d-2)?2:"="===e.charAt(d-1)?1:0,r=new t(3*e.length/4-o),s=o>0?e.length-4:e.length;var c=0;function u(e){r[c++]=e}for(n=0,i=0;n<s;n+=4,i+=3)u((16711680&(a=l(e.charAt(n))<<18|l(e.charAt(n+1))<<12|l(e.charAt(n+2))<<6|l(e.charAt(n+3))))>>16),u((65280&a)>>8),u(255&a);return 2===o?u(255&(a=l(e.charAt(n))<<2|l(e.charAt(n+1))>>4)):1===o&&(u((a=l(e.charAt(n))<<10|l(e.charAt(n+1))<<4|l(e.charAt(n+2))>>2)>>8&255),u(255&a)),r},e.fromByteArray=function(e){var t,n,i,s,a=e.length%3,o="";function r(e){return c.charAt(e)}for(t=0,i=e.length-a;t<i;t+=3)n=(e[t]<<16)+(e[t+1]<<8)+e[t+2],o+=r((s=n)>>18&63)+r(s>>12&63)+r(s>>6&63)+r(63&s);switch(a){case 1:o+=r((n=e[e.length-1])>>2),o+=r(n<<4&63),o+="==";break;case 2:o+=r((n=(e[e.length-2]<<8)+e[e.length-1])>>10),o+=r(n>>4&63),o+=r(n<<2&63),o+="="}return o}}(void 0===n?this.base64js={}:n)}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/browserify/node_modules/base64-js/lib/b64.js","/node_modules/browserify/node_modules/base64-js/lib")},{_process:65,buffer:63}],63:[function(e,t,n){(function(t,i,s,a,o,r,d,l,c){"use strict";var u=e("base64-js"),f=e("ieee754"),h=e("isarray");n.Buffer=s,n.SlowBuffer=function V(e,t){if(!(this instanceof V))return new V(e,t);var n=new s(e,t);delete n.parent;return n},n.INSPECT_MAX_BYTES=50,s.poolSize=8192;var p={};function m(){return s.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(e){return this instanceof s?(s.TYPED_ARRAY_SUPPORT||(this.length=0,this.parent=undefined),"number"==typeof e?function(e,t){if(e=g(e,t<0?0:0|v(t)),!s.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;n++)e[n]=0;return e}(this,e):"string"==typeof e?function(e,t,n){"string"==typeof n&&""!==n||(n="utf8");var i=0|y(t,n);return(e=g(e,i)).write(t,n),e}(this,e,arguments.length>1?arguments[1]:"utf8"):function(e,t){if(s.isBuffer(t))return function(e,t){var n=0|v(t.length);return e=g(e,n),t.copy(e,0,0,n),e}(e,t);if(h(t))return function(e,t){var n=0|v(t.length);e=g(e,n);for(var i=0;i<n;i+=1)e[i]=255&t[i];return e}(e,t);if(null==t)throw new TypeError("must start with number, buffer, array or string");if("undefined"!=typeof ArrayBuffer){if(t.buffer instanceof ArrayBuffer)return _(e,t);if(t instanceof ArrayBuffer)return function(e,t){s.TYPED_ARRAY_SUPPORT?(t.byteLength,e=s._augment(new Uint8Array(t))):e=_(e,new Uint8Array(t));return e}(e,t)}return t.length?function(e,t){var n=0|v(t.length);e=g(e,n);for(var i=0;i<n;i+=1)e[i]=255&t[i];return e}(e,t):function(e,t){var n,i=0;"Buffer"===t.type&&h(t.data)&&(n=t.data,i=0|v(n.length)),e=g(e,i);for(var s=0;s<i;s+=1)e[s]=255&n[s];return e}(e,t)}(this,e)):arguments.length>1?new s(e,arguments[1]):new s(e)}function _(e,t){var n=0|v(t.length);e=g(e,n);for(var i=0;i<n;i+=1)e[i]=255&t[i];return e}function g(e,t){return s.TYPED_ARRAY_SUPPORT?(e=s._augment(new Uint8Array(t))).__proto__=s.prototype:(e.length=t,e._isBuffer=!0),0!==t&&t<=s.poolSize>>>1&&(e.parent=p),e}function v(e){if(e>=m())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+m().toString(16)+" bytes");return 0|e}function y(e,t){"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var i=!1;;)switch(t){case"ascii":case"binary":case"raw":case"raws":return n;case"utf8":case"utf-8":return B(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return H(e).length;default:if(i)return B(e).length;t=(""+t).toLowerCase(),i=!0}}function w(e,t,n,i){n=Number(n)||0;var s=e.length-n;i?(i=Number(i))>s&&(i=s):i=s;var a=t.length;if(a%2!=0)throw new Error("Invalid hex string");i>a/2&&(i=a/2);for(var o=0;o<i;o++){var r=parseInt(t.substr(2*o,2),16);if(isNaN(r))throw new Error("Invalid hex string");e[n+o]=r}return o}function b(e,t,n,i){return W(B(t,e.length-n),e,n,i)}function S(e,t,n,i){return W(function(e){for(var t=[],n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));return t}(t),e,n,i)}function M(e,t,n,i){return S(e,t,n,i)}function A(e,t,n,i){return W(H(t),e,n,i)}function D(e,t,n,i){return W(function(e,t){for(var n,i,s,a=[],o=0;o<e.length&&!((t-=2)<0);o++)n=e.charCodeAt(o),i=n>>8,s=n%256,a.push(s),a.push(i);return a}(t,e.length-n),e,n,i)}function x(e,t,n){return 0===t&&n===e.length?u.fromByteArray(e):u.fromByteArray(e.slice(t,n))}function k(e,t,n){n=Math.min(e.length,n);for(var i=[],s=t;s<n;){var a,o,r,d,l=e[s],c=null,u=l>239?4:l>223?3:l>191?2:1;if(s+u<=n)switch(u){case 1:l<128&&(c=l);break;case 2:128==(192&(a=e[s+1]))&&(d=(31&l)<<6|63&a)>127&&(c=d);break;case 3:a=e[s+1],o=e[s+2],128==(192&a)&&128==(192&o)&&(d=(15&l)<<12|(63&a)<<6|63&o)>2047&&(d<55296||d>57343)&&(c=d);break;case 4:a=e[s+1],o=e[s+2],r=e[s+3],128==(192&a)&&128==(192&o)&&128==(192&r)&&(d=(15&l)<<18|(63&a)<<12|(63&o)<<6|63&r)>65535&&d<1114112&&(c=d)}null===c?(c=65533,u=1):c>65535&&(c-=65536,i.push(c>>>10&1023|55296),c=56320|1023&c),i.push(c),s+=u}return function(e){var t=e.length;if(t<=C)return String.fromCharCode.apply(String,e);var n="",i=0;for(;i<t;)n+=String.fromCharCode.apply(String,e.slice(i,i+=C));return n}(i)}s.TYPED_ARRAY_SUPPORT=i.TYPED_ARRAY_SUPPORT!==undefined?i.TYPED_ARRAY_SUPPORT:function(){function e(){}try{var t=new Uint8Array(1);return t.foo=function(){return 42},t.constructor=e,42===t.foo()&&t.constructor===e&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(n){return!1}}(),s.TYPED_ARRAY_SUPPORT?(s.prototype.__proto__=Uint8Array.prototype,s.__proto__=Uint8Array):(s.prototype.length=undefined,s.prototype.parent=undefined),s.isBuffer=function(e){return!(null==e||!e._isBuffer)},s.compare=function(e,t){if(!s.isBuffer(e)||!s.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,i=t.length,a=0,o=Math.min(n,i);a<o&&e[a]===t[a];)++a;return a!==o&&(n=e[a],i=t[a]),n<i?-1:i<n?1:0},s.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(e,t){if(!h(e))throw new TypeError("list argument must be an Array of Buffers.");if(0===e.length)return new s(0);var n;if(t===undefined)for(t=0,n=0;n<e.length;n++)t+=e[n].length;var i=new s(t),a=0;for(n=0;n<e.length;n++){var o=e[n];o.copy(i,a),a+=o.length}return i},s.byteLength=y,s.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?k(this,0,e):function(e,t,n){var i=!1;if(t|=0,n=n===undefined||n===Infinity?this.length:0|n,e||(e="utf8"),t<0&&(t=0),n>this.length&&(n=this.length),n<=t)return"";for(;;)switch(e){case"hex":return T(this,t,n);case"utf8":case"utf-8":return k(this,t,n);case"ascii":return E(this,t,n);case"binary":return I(this,t,n);case"base64":return x(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return $(this,t,n);default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}.apply(this,arguments)},s.prototype.equals=function(e){if(!s.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===s.compare(this,e)},s.prototype.inspect=function(){var e="",t=n.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},s.prototype.compare=function(e){if(!s.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?0:s.compare(this,e)},s.prototype.indexOf=function(e,t){if(t>2147483647?t=2147483647:t<-2147483648&&(t=-2147483648),t>>=0,0===this.length)return-1;if(t>=this.length)return-1;if(t<0&&(t=Math.max(this.length+t,0)),"string"==typeof e)return 0===e.length?-1:String.prototype.indexOf.call(this,e,t);if(s.isBuffer(e))return n(this,e,t);if("number"==typeof e)return s.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,e,t):n(this,[e],t);function n(e,t,n){for(var i=-1,s=0;n+s<e.length;s++)if(e[n+s]===t[-1===i?0:s-i]){if(-1===i&&(i=s),s-i+1===t.length)return n+i}else i=-1;return-1}throw new TypeError("val must be string, number or Buffer")},s.prototype.get=function(e){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(e)},s.prototype.set=function(e,t){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(e,t)},s.prototype.write=function(e,t,n,i){if(t===undefined)i="utf8",n=this.length,t=0;else if(n===undefined&&"string"==typeof t)i=t,n=this.length,t=0;else if(isFinite(t))t|=0,isFinite(n)?(n|=0,i===undefined&&(i="utf8")):(i=n,n=undefined);else{var s=i;i=t,t=0|n,n=s}var a=this.length-t;if((n===undefined||n>a)&&(n=a),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("attempt to write outside buffer bounds");i||(i="utf8");for(var o=!1;;)switch(i){case"hex":return w(this,e,t,n);case"utf8":case"utf-8":return b(this,e,t,n);case"ascii":return S(this,e,t,n);case"binary":return M(this,e,t,n);case"base64":return A(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),o=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var C=4096;function E(e,t,n){var i="";n=Math.min(e.length,n);for(var s=t;s<n;s++)i+=String.fromCharCode(127&e[s]);return i}function I(e,t,n){var i="";n=Math.min(e.length,n);for(var s=t;s<n;s++)i+=String.fromCharCode(e[s]);return i}function T(e,t,n){var i=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>i)&&(n=i);for(var s="",a=t;a<n;a++)s+=j(e[a]);return s}function $(e,t,n){for(var i=e.slice(t,n),s="",a=0;a<i.length;a+=2)s+=String.fromCharCode(i[a]+256*i[a+1]);return s}function O(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function P(e,t,n,i,a,o){if(!s.isBuffer(e))throw new TypeError("buffer must be a Buffer instance");if(t>a||t<o)throw new RangeError("value is out of bounds");if(n+i>e.length)throw new RangeError("index out of range")}function N(e,t,n,i){t<0&&(t=65535+t+1);for(var s=0,a=Math.min(e.length-n,2);s<a;s++)e[n+s]=(t&255<<8*(i?s:1-s))>>>8*(i?s:1-s)}function F(e,t,n,i){t<0&&(t=4294967295+t+1);for(var s=0,a=Math.min(e.length-n,4);s<a;s++)e[n+s]=t>>>8*(i?s:3-s)&255}function U(e,t,n,i,s,a){if(t>s||t<a)throw new RangeError("value is out of bounds");if(n+i>e.length)throw new RangeError("index out of range");if(n<0)throw new RangeError("index out of range")}function Y(e,t,n,i,s){return s||U(e,t,n,4,3.4028234663852886e38,-3.4028234663852886e38),f.write(e,t,n,i,23,4),n+4}function R(e,t,n,i,s){return s||U(e,t,n,8,1.7976931348623157e308,-1.7976931348623157e308),f.write(e,t,n,i,52,8),n+8}s.prototype.slice=function(e,t){var n,i=this.length;if(e=~~e,t=t===undefined?i:~~t,e<0?(e+=i)<0&&(e=0):e>i&&(e=i),t<0?(t+=i)<0&&(t=0):t>i&&(t=i),t<e&&(t=e),s.TYPED_ARRAY_SUPPORT)n=s._augment(this.subarray(e,t));else{var a=t-e;n=new s(a,undefined);for(var o=0;o<a;o++)n[o]=this[o+e]}return n.length&&(n.parent=this.parent||this),n},s.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||O(e,t,this.length);for(var i=this[e],s=1,a=0;++a<t&&(s*=256);)i+=this[e+a]*s;return i},s.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||O(e,t,this.length);for(var i=this[e+--t],s=1;t>0&&(s*=256);)i+=this[e+--t]*s;return i},s.prototype.readUInt8=function(e,t){return t||O(e,1,this.length),this[e]},s.prototype.readUInt16LE=function(e,t){return t||O(e,2,this.length),this[e]|this[e+1]<<8},s.prototype.readUInt16BE=function(e,t){return t||O(e,2,this.length),this[e]<<8|this[e+1]},s.prototype.readUInt32LE=function(e,t){return t||O(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},s.prototype.readUInt32BE=function(e,t){return t||O(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},s.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||O(e,t,this.length);for(var i=this[e],s=1,a=0;++a<t&&(s*=256);)i+=this[e+a]*s;return i>=(s*=128)&&(i-=Math.pow(2,8*t)),i},s.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||O(e,t,this.length);for(var i=t,s=1,a=this[e+--i];i>0&&(s*=256);)a+=this[e+--i]*s;return a>=(s*=128)&&(a-=Math.pow(2,8*t)),a},s.prototype.readInt8=function(e,t){return t||O(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},s.prototype.readInt16LE=function(e,t){t||O(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt16BE=function(e,t){t||O(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt32LE=function(e,t){return t||O(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},s.prototype.readInt32BE=function(e,t){return t||O(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},s.prototype.readFloatLE=function(e,t){return t||O(e,4,this.length),f.read(this,e,!0,23,4)},s.prototype.readFloatBE=function(e,t){return t||O(e,4,this.length),f.read(this,e,!1,23,4)},s.prototype.readDoubleLE=function(e,t){return t||O(e,8,this.length),f.read(this,e,!0,52,8)},s.prototype.readDoubleBE=function(e,t){return t||O(e,8,this.length),f.read(this,e,!1,52,8)},s.prototype.writeUIntLE=function(e,t,n,i){e=+e,t|=0,n|=0,i||P(this,e,t,n,Math.pow(2,8*n),0);var s=1,a=0;for(this[t]=255&e;++a<n&&(s*=256);)this[t+a]=e/s&255;return t+n},s.prototype.writeUIntBE=function(e,t,n,i){e=+e,t|=0,n|=0,i||P(this,e,t,n,Math.pow(2,8*n),0);var s=n-1,a=1;for(this[t+s]=255&e;--s>=0&&(a*=256);)this[t+s]=e/a&255;return t+n},s.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,1,255,0),s.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},s.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):N(this,e,t,!0),t+2},s.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):N(this,e,t,!1),t+2},s.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):F(this,e,t,!0),t+4},s.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):F(this,e,t,!1),t+4},s.prototype.writeIntLE=function(e,t,n,i){if(e=+e,t|=0,!i){var s=Math.pow(2,8*n-1);P(this,e,t,n,s-1,-s)}var a=0,o=1,r=e<0?1:0;for(this[t]=255&e;++a<n&&(o*=256);)this[t+a]=(e/o>>0)-r&255;return t+n},s.prototype.writeIntBE=function(e,t,n,i){if(e=+e,t|=0,!i){var s=Math.pow(2,8*n-1);P(this,e,t,n,s-1,-s)}var a=n-1,o=1,r=e<0?1:0;for(this[t+a]=255&e;--a>=0&&(o*=256);)this[t+a]=(e/o>>0)-r&255;return t+n},s.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,1,127,-128),s.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},s.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):N(this,e,t,!0),t+2},s.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):N(this,e,t,!1),t+2},s.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,4,2147483647,-2147483648),s.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):F(this,e,t,!0),t+4},s.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):F(this,e,t,!1),t+4},s.prototype.writeFloatLE=function(e,t,n){return Y(this,e,t,!0,n)},s.prototype.writeFloatBE=function(e,t,n){return Y(this,e,t,!1,n)},s.prototype.writeDoubleLE=function(e,t,n){return R(this,e,t,!0,n)},s.prototype.writeDoubleBE=function(e,t,n){return R(this,e,t,!1,n)},s.prototype.copy=function(e,t,n,i){if(n||(n=0),i||0===i||(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<n&&(i=n),i===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-n&&(i=e.length-t+n);var a,o=i-n;if(this===e&&n<t&&t<i)for(a=o-1;a>=0;a--)e[a+t]=this[a+n];else if(o<1e3||!s.TYPED_ARRAY_SUPPORT)for(a=0;a<o;a++)e[a+t]=this[a+n];else e._set(this.subarray(n,n+o),t);return o},s.prototype.fill=function(e,t,n){if(e||(e=0),t||(t=0),n||(n=this.length),n<t)throw new RangeError("end < start");if(n!==t&&0!==this.length){if(t<0||t>=this.length)throw new RangeError("start out of bounds");if(n<0||n>this.length)throw new RangeError("end out of bounds");var i;if("number"==typeof e)for(i=t;i<n;i++)this[i]=e;else{var s=B(e.toString()),a=s.length;for(i=t;i<n;i++)this[i]=s[i%a]}return this}},s.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(s.TYPED_ARRAY_SUPPORT)return new s(this).buffer;for(var e=new Uint8Array(this.length),t=0,n=e.length;t<n;t+=1)e[t]=this[t];return e.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser")};var q=s.prototype;s._augment=function(e){return e.constructor=s,e._isBuffer=!0,e._set=e.set,e.get=q.get,e.set=q.set,e.write=q.write,e.toString=q.toString,e.toLocaleString=q.toString,e.toJSON=q.toJSON,e.equals=q.equals,e.compare=q.compare,e.indexOf=q.indexOf,e.copy=q.copy,e.slice=q.slice,e.readUIntLE=q.readUIntLE,e.readUIntBE=q.readUIntBE,e.readUInt8=q.readUInt8,e.readUInt16LE=q.readUInt16LE,e.readUInt16BE=q.readUInt16BE,e.readUInt32LE=q.readUInt32LE,e.readUInt32BE=q.readUInt32BE,e.readIntLE=q.readIntLE,e.readIntBE=q.readIntBE,e.readInt8=q.readInt8,e.readInt16LE=q.readInt16LE,e.readInt16BE=q.readInt16BE,e.readInt32LE=q.readInt32LE,e.readInt32BE=q.readInt32BE,e.readFloatLE=q.readFloatLE,e.readFloatBE=q.readFloatBE,e.readDoubleLE=q.readDoubleLE,e.readDoubleBE=q.readDoubleBE,e.writeUInt8=q.writeUInt8,e.writeUIntLE=q.writeUIntLE,e.writeUIntBE=q.writeUIntBE,e.writeUInt16LE=q.writeUInt16LE,e.writeUInt16BE=q.writeUInt16BE,e.writeUInt32LE=q.writeUInt32LE,e.writeUInt32BE=q.writeUInt32BE,e.writeIntLE=q.writeIntLE,e.writeIntBE=q.writeIntBE,e.writeInt8=q.writeInt8,e.writeInt16LE=q.writeInt16LE,e.writeInt16BE=q.writeInt16BE,e.writeInt32LE=q.writeInt32LE,e.writeInt32BE=q.writeInt32BE,e.writeFloatLE=q.writeFloatLE,e.writeFloatBE=q.writeFloatBE,e.writeDoubleLE=q.writeDoubleLE,e.writeDoubleBE=q.writeDoubleBE,e.fill=q.fill,e.inspect=q.inspect,e.toArrayBuffer=q.toArrayBuffer,e};var L=/[^+\/0-9A-Za-z-_]/g;function j(e){return e<16?"0"+e.toString(16):e.toString(16)}function B(e,t){var n;t=t||Infinity;for(var i=e.length,s=null,a=[],o=0;o<i;o++){if((n=e.charCodeAt(o))>55295&&n<57344){if(!s){if(n>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(o+1===i){(t-=3)>-1&&a.push(239,191,189);continue}s=n;continue}if(n<56320){(t-=3)>-1&&a.push(239,191,189),s=n;continue}n=65536+(s-55296<<10|n-56320)}else s&&(t-=3)>-1&&a.push(239,191,189);if(s=null,n<128){if((t-=1)<0)break;a.push(n)}else if(n<2048){if((t-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return a}function H(e){return u.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(L,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function W(e,t,n,i){for(var s=0;s<i&&!(s+n>=t.length||s>=e.length);s++)t[s+n]=e[s];return s}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/browserify/node_modules/buffer/index.js","/node_modules/browserify/node_modules/buffer")},{_process:65,"base64-js":62,buffer:63,ieee754:66,isarray:64}],64:[function(e,t,n){(function(e,n,i,s,a,o,r,d,l){var c={}.toString;t.exports=Array.isArray||function(e){return"[object Array]"==c.call(e)}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/browserify/node_modules/buffer/node_modules/isarray/index.js","/node_modules/browserify/node_modules/buffer/node_modules/isarray")},{_process:65,buffer:63}],65:[function(e,t,n){(function(e,n,i,s,a,o,r,d,l){var c=[],u=!1;function f(){if(!u){var e;u=!0;for(var t=c.length;t;){e=c,c=[];for(var n=-1;++n<t;)e[n]();t=c.length}u=!1}}function h(){}(e=t.exports={}).nextTick=function(e){c.push(e),u||setTimeout(f,0)},e.title="browser",e.browser=!0,e.env={},e.argv=[],e.version="",e.versions={},e.on=h,e.addListener=h,e.once=h,e.off=h,e.removeListener=h,e.removeAllListeners=h,e.emit=h,e.binding=function(e){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(e){throw new Error("process.chdir is not supported")},e.umask=function(){return 0}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/browserify/node_modules/process/browser.js","/node_modules/browserify/node_modules/process")},{_process:65,buffer:63}],66:[function(e,t,n){(function(e,t,i,s,a,o,r,d,l){n.read=function(e,t,n,i,s){var a,o,r=8*s-i-1,d=(1<<r)-1,l=d>>1,c=-7,u=n?s-1:0,f=n?-1:1,h=e[t+u];for(u+=f,a=h&(1<<-c)-1,h>>=-c,c+=r;c>0;a=256*a+e[t+u],u+=f,c-=8);for(o=a&(1<<-c)-1,a>>=-c,c+=i;c>0;o=256*o+e[t+u],u+=f,c-=8);if(0===a)a=1-l;else{if(a===d)return o?NaN:(h?-1:1)*Infinity;o+=Math.pow(2,i),a-=l}return(h?-1:1)*o*Math.pow(2,a-i)},n.write=function(e,t,n,i,s,a){var o,r,d,l=8*a-s-1,c=(1<<l)-1,u=c>>1,f=23===s?Math.pow(2,-24)-Math.pow(2,-77):0,h=i?0:a-1,p=i?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===Infinity?(r=isNaN(t)?1:0,o=c):(o=Math.floor(Math.log(t)/Math.LN2),t*(d=Math.pow(2,-o))<1&&(o--,d*=2),(t+=o+u>=1?f/d:f*Math.pow(2,1-u))*d>=2&&(o++,d/=2),o+u>=c?(r=0,o=c):o+u>=1?(r=(t*d-1)*Math.pow(2,s),o+=u):(r=t*Math.pow(2,u-1)*Math.pow(2,s),o=0));s>=8;e[n+h]=255&r,h+=p,r/=256,s-=8);for(o=o<<s|r,l+=s;l>0;e[n+h]=255&o,h+=p,o/=256,l-=8);e[n+h-p]|=128*m}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/ieee754/index.js","/node_modules/ieee754")},{_process:65,buffer:63}],67:[function(e,t,n){(function(i,s,a,o,r,d,l,c,u){!function(e,i){"object"==typeof n&&void 0!==t?t.exports=i():"function"==typeof define&&define.amd?define(i):e.moment=i()}(this,function(){"use strict";var n,i;function s(){return n.apply(null,arguments)}function a(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function o(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function r(e){return void 0===e}function d(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)}function l(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function c(e,t){var n,i=[];for(n=0;n<e.length;++n)i.push(t(e[n],n));return i}function u(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function f(e,t){for(var n in t)u(t,n)&&(e[n]=t[n]);return u(t,"toString")&&(e.toString=t.toString),u(t,"valueOf")&&(e.valueOf=t.valueOf),e}function h(e,t,n,i){return Et(e,t,n,i,!0).utc()}function p(e){return null==e._pf&&(e._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1}),e._pf}function m(e){if(null==e._isValid){var t=p(e),n=i.call(t.parsedDateParts,function(e){return null!=e}),s=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&n);if(e._strict&&(s=s&&0===t.charsLeftOver&&0===t.unusedTokens.length&&t.bigHour===undefined),null!=Object.isFrozen&&Object.isFrozen(e))return s;e._isValid=s}return e._isValid}function _(e){var t=h(NaN);return null!=e?f(p(t),e):p(t).userInvalidated=!0,t}i=Array.prototype.some?Array.prototype.some:function(e){for(var t=Object(this),n=t.length>>>0,i=0;i<n;i++)if(i in t&&e.call(this,t[i],i,t))return!0;return!1};var g=s.momentProperties=[];function v(e,t){var n,i,s;if(r(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),r(t._i)||(e._i=t._i),r(t._f)||(e._f=t._f),r(t._l)||(e._l=t._l),r(t._strict)||(e._strict=t._strict),r(t._tzm)||(e._tzm=t._tzm),r(t._isUTC)||(e._isUTC=t._isUTC),r(t._offset)||(e._offset=t._offset),r(t._pf)||(e._pf=p(t)),r(t._locale)||(e._locale=t._locale),g.length>0)for(n=0;n<g.length;n++)r(s=t[i=g[n]])||(e[i]=s);return e}var y=!1;function w(e){v(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===y&&(y=!0,s.updateOffset(this),y=!1)}function b(e){return e instanceof w||null!=e&&null!=e._isAMomentObject}function S(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function M(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=S(t)),n}function A(e,t,n){var i,s=Math.min(e.length,t.length),a=Math.abs(e.length-t.length),o=0;for(i=0;i<s;i++)(n&&e[i]!==t[i]||!n&&M(e[i])!==M(t[i]))&&o++;return o+a}function D(e){!1===s.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function x(e,t){var n=!0;return f(function(){if(null!=s.deprecationHandler&&s.deprecationHandler(null,e),n){for(var i,a=[],o=0;o<arguments.length;o++){if(i="","object"==typeof arguments[o]){for(var r in i+="\n["+o+"] ",arguments[0])i+=r+": "+arguments[0][r]+", ";i=i.slice(0,-2)}else i=arguments[o];a.push(i)}D(e+"\nArguments: "+Array.prototype.slice.call(a).join("")+"\n"+(new Error).stack),n=!1}return t.apply(this,arguments)},t)}var k,C={};function E(e,t){null!=s.deprecationHandler&&s.deprecationHandler(e,t),C[e]||(D(t),C[e]=!0)}function I(e){return e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function T(e,t){var n,i=f({},e);for(n in t)u(t,n)&&(o(e[n])&&o(t[n])?(i[n]={},f(i[n],e[n]),f(i[n],t[n])):null!=t[n]?i[n]=t[n]:delete i[n]);for(n in e)u(e,n)&&!u(t,n)&&o(e[n])&&(i[n]=f({},i[n]));return i}function $(e){null!=e&&this.set(e)}s.suppressDeprecationWarnings=!1,s.deprecationHandler=null,k=Object.keys?Object.keys:function(e){var t,n=[];for(t in e)u(e,t)&&n.push(t);return n};var O={};function P(e,t){var n=e.toLowerCase();O[n]=O[n+"s"]=O[t]=e}function N(e){return"string"==typeof e?O[e]||O[e.toLowerCase()]:undefined}function F(e){var t,n,i={};for(n in e)u(e,n)&&(t=N(n))&&(i[t]=e[n]);return i}var U={};function Y(e,t){U[e]=t}function R(e,t,n){var i=""+Math.abs(e),s=t-i.length;return(e>=0?n?"+":"":"-")+Math.pow(10,Math.max(0,s)).toString().substr(1)+i}var q=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,L=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,j={},B={};function H(e,t,n,i){var s=i;"string"==typeof i&&(s=function(){return this[i]()}),e&&(B[e]=s),t&&(B[t[0]]=function(){return R(s.apply(this,arguments),t[1],t[2])}),n&&(B[n]=function(){return this.localeData().ordinal(s.apply(this,arguments),e)})}function W(e,t){return e.isValid()?(t=V(t,e.localeData()),j[t]=j[t]||function(e){var t,n,i,s=e.match(q);for(t=0,n=s.length;t<n;t++)B[s[t]]?s[t]=B[s[t]]:s[t]=(i=s[t]).match(/\[[\s\S]/)?i.replace(/^\[|\]$/g,""):i.replace(/\\/g,"");return function(t){var i,a="";for(i=0;i<n;i++)a+=I(s[i])?s[i].call(t,e):s[i];return a}}(t),j[t](e)):e.localeData().invalidDate()}function V(e,t){var n=5;function i(e){return t.longDateFormat(e)||e}for(L.lastIndex=0;n>=0&&L.test(e);)e=e.replace(L,i),L.lastIndex=0,n-=1;return e}var J=/\d/,G=/\d\d/,z=/\d{3}/,Z=/\d{4}/,Q=/[+-]?\d{6}/,K=/\d\d?/,X=/\d\d\d\d?/,ee=/\d\d\d\d\d\d?/,te=/\d{1,3}/,ne=/\d{1,4}/,ie=/[+-]?\d{1,6}/,se=/\d+/,ae=/[+-]?\d+/,oe=/Z|[+-]\d\d:?\d\d/gi,re=/Z|[+-]\d\d(?::?\d\d)?/gi,de=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,le={};function ce(e,t,n){le[e]=I(t)?t:function(e,i){return e&&n?n:t}}function ue(e,t){return u(le,e)?le[e](t._strict,t._locale):new RegExp(fe(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,i,s){return t||n||i||s})))}function fe(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var he={};function pe(e,t){var n,i=t;for("string"==typeof e&&(e=[e]),d(t)&&(i=function(e,n){n[t]=M(e)}),n=0;n<e.length;n++)he[e[n]]=i}function me(e,t){pe(e,function(e,n,i,s){i._w=i._w||{},t(e,i._w,i,s)})}function _e(e,t,n){null!=t&&u(he,e)&&he[e](t,n._a,n,e)}var ge=0,ve=1,ye=2,we=3,be=4,Se=5,Me=6,Ae=7,De=8;function xe(e){return ke(e)?366:365}function ke(e){return e%4==0&&e%100!=0||e%400==0}H("Y",0,0,function(){var e=this.year();return e<=9999?""+e:"+"+e}),H(0,["YY",2],0,function(){return this.year()%100}),H(0,["YYYY",4],0,"year"),H(0,["YYYYY",5],0,"year"),H(0,["YYYYYY",6,!0],0,"year"),P("year","y"),Y("year",1),ce("Y",ae),ce("YY",K,G),ce("YYYY",ne,Z),ce("YYYYY",ie,Q),ce("YYYYYY",ie,Q),pe(["YYYYY","YYYYYY"],ge),pe("YYYY",function(e,t){t[ge]=2===e.length?s.parseTwoDigitYear(e):M(e)}),pe("YY",function(e,t){t[ge]=s.parseTwoDigitYear(e)}),pe("Y",function(e,t){t[ge]=parseInt(e,10)}),s.parseTwoDigitYear=function(e){return M(e)+(M(e)>68?1900:2e3)};var Ce,Ee=Ie("FullYear",!0);function Ie(e,t){return function(n){return null!=n?($e(this,e,n),s.updateOffset(this,t),this):Te(this,e)}}function Te(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function $e(e,t,n){e.isValid()&&!isNaN(n)&&("FullYear"===t&&ke(e.year())&&1===e.month()&&29===e.date()?e._d["set"+(e._isUTC?"UTC":"")+t](n,e.month(),Oe(n,e.month())):e._d["set"+(e._isUTC?"UTC":"")+t](n))}function Oe(e,t){if(isNaN(e)||isNaN(t))return NaN;var n,i=(t%(n=12)+n)%n;return e+=(t-i)/12,1===i?ke(e)?29:28:31-i%7%2}Ce=Array.prototype.indexOf?Array.prototype.indexOf:function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1},H("M",["MM",2],"Mo",function(){return this.month()+1}),H("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),H("MMMM",0,0,function(e){return this.localeData().months(this,e)}),P("month","M"),Y("month",8),ce("M",K),ce("MM",K,G),ce("MMM",function(e,t){return t.monthsShortRegex(e)}),ce("MMMM",function(e,t){return t.monthsRegex(e)}),pe(["M","MM"],function(e,t){t[ve]=M(e)-1}),pe(["MMM","MMMM"],function(e,t,n,i){var s=n._locale.monthsParse(e,i,n._strict);null!=s?t[ve]=s:p(n).invalidMonth=e});var Pe=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Ne="January_February_March_April_May_June_July_August_September_October_November_December".split("_");var Fe="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_");function Ue(e,t){var n;if(!e.isValid())return e;if("string"==typeof t)if(/^\d+$/.test(t))t=M(t);else if(!d(t=e.localeData().monthsParse(t)))return e;return n=Math.min(e.date(),Oe(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e}function Ye(e){return null!=e?(Ue(this,e),s.updateOffset(this,!0),this):Te(this,"Month")}var Re=de;var qe=de;function Le(){function e(e,t){return t.length-e.length}var t,n,i=[],s=[],a=[];for(t=0;t<12;t++)n=h([2e3,t]),i.push(this.monthsShort(n,"")),s.push(this.months(n,"")),a.push(this.months(n,"")),a.push(this.monthsShort(n,""));for(i.sort(e),s.sort(e),a.sort(e),t=0;t<12;t++)i[t]=fe(i[t]),s[t]=fe(s[t]);for(t=0;t<24;t++)a[t]=fe(a[t]);this._monthsRegex=new RegExp("^("+a.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+i.join("|")+")","i")}function je(e){var t=new Date(Date.UTC.apply(null,arguments));return e<100&&e>=0&&isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e),t}function Be(e,t,n){var i=7+t-n;return-((7+je(e,0,i).getUTCDay()-t)%7)+i-1}function He(e,t,n,i,s){var a,o,r=1+7*(t-1)+(7+n-i)%7+Be(e,i,s);return r<=0?o=xe(a=e-1)+r:r>xe(e)?(a=e+1,o=r-xe(e)):(a=e,o=r),{year:a,dayOfYear:o}}function We(e,t,n){var i,s,a=Be(e.year(),t,n),o=Math.floor((e.dayOfYear()-a-1)/7)+1;return o<1?i=o+Ve(s=e.year()-1,t,n):o>Ve(e.year(),t,n)?(i=o-Ve(e.year(),t,n),s=e.year()+1):(s=e.year(),i=o),{week:i,year:s}}function Ve(e,t,n){var i=Be(e,t,n),s=Be(e+1,t,n);return(xe(e)-i+s)/7}H("w",["ww",2],"wo","week"),H("W",["WW",2],"Wo","isoWeek"),P("week","w"),P("isoWeek","W"),Y("week",5),Y("isoWeek",5),ce("w",K),ce("ww",K,G),ce("W",K),ce("WW",K,G),me(["w","ww","W","WW"],function(e,t,n,i){t[i.substr(0,1)]=M(e)});H("d",0,"do","day"),H("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),H("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),H("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),H("e",0,0,"weekday"),H("E",0,0,"isoWeekday"),P("day","d"),P("weekday","e"),P("isoWeekday","E"),Y("day",11),Y("weekday",11),Y("isoWeekday",11),ce("d",K),ce("e",K),ce("E",K),ce("dd",function(e,t){return t.weekdaysMinRegex(e)}),ce("ddd",function(e,t){return t.weekdaysShortRegex(e)}),ce("dddd",function(e,t){return t.weekdaysRegex(e)}),me(["dd","ddd","dddd"],function(e,t,n,i){var s=n._locale.weekdaysParse(e,i,n._strict);null!=s?t.d=s:p(n).invalidWeekday=e}),me(["d","e","E"],function(e,t,n,i){t[i]=M(e)});var Je="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_");var Ge="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_");var ze="Su_Mo_Tu_We_Th_Fr_Sa".split("_");var Ze=de;var Qe=de;var Ke=de;function Xe(){function e(e,t){return t.length-e.length}var t,n,i,s,a,o=[],r=[],d=[],l=[];for(t=0;t<7;t++)n=h([2e3,1]).day(t),i=this.weekdaysMin(n,""),s=this.weekdaysShort(n,""),a=this.weekdays(n,""),o.push(i),r.push(s),d.push(a),l.push(i),l.push(s),l.push(a);for(o.sort(e),r.sort(e),d.sort(e),l.sort(e),t=0;t<7;t++)r[t]=fe(r[t]),d[t]=fe(d[t]),l[t]=fe(l[t]);this._weekdaysRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+d.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+o.join("|")+")","i")}function et(){return this.hours()%12||12}function tt(e,t){H(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function nt(e,t){return t._meridiemParse}H("H",["HH",2],0,"hour"),H("h",["hh",2],0,et),H("k",["kk",2],0,function(){return this.hours()||24}),H("hmm",0,0,function(){return""+et.apply(this)+R(this.minutes(),2)}),H("hmmss",0,0,function(){return""+et.apply(this)+R(this.minutes(),2)+R(this.seconds(),2)}),H("Hmm",0,0,function(){return""+this.hours()+R(this.minutes(),2)}),H("Hmmss",0,0,function(){return""+this.hours()+R(this.minutes(),2)+R(this.seconds(),2)}),tt("a",!0),tt("A",!1),P("hour","h"),Y("hour",13),ce("a",nt),ce("A",nt),ce("H",K),ce("h",K),ce("k",K),ce("HH",K,G),ce("hh",K,G),ce("kk",K,G),ce("hmm",X),ce("hmmss",ee),ce("Hmm",X),ce("Hmmss",ee),pe(["H","HH"],we),pe(["k","kk"],function(e,t,n){var i=M(e);t[we]=24===i?0:i}),pe(["a","A"],function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e}),pe(["h","hh"],function(e,t,n){t[we]=M(e),p(n).bigHour=!0}),pe("hmm",function(e,t,n){var i=e.length-2;t[we]=M(e.substr(0,i)),t[be]=M(e.substr(i)),p(n).bigHour=!0}),pe("hmmss",function(e,t,n){var i=e.length-4,s=e.length-2;t[we]=M(e.substr(0,i)),t[be]=M(e.substr(i,2)),t[Se]=M(e.substr(s)),p(n).bigHour=!0}),pe("Hmm",function(e,t,n){var i=e.length-2;t[we]=M(e.substr(0,i)),t[be]=M(e.substr(i))}),pe("Hmmss",function(e,t,n){var i=e.length-4,s=e.length-2;t[we]=M(e.substr(0,i)),t[be]=M(e.substr(i,2)),t[Se]=M(e.substr(s))});var it,st=Ie("Hours",!0),at={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:Ne,monthsShort:Fe,week:{dow:0,doy:6},weekdays:Je,weekdaysMin:ze,weekdaysShort:Ge,meridiemParse:/[ap]\.?m?\.?/i},ot={},rt={};function dt(e){return e?e.toLowerCase().replace("_","-"):e}function lt(n){var i=null;if(!ot[n]&&void 0!==t&&t&&t.exports)try{i=it._abbr,e("./locale/"+n),ct(i)}catch(s){}return ot[n]}function ct(e,t){var n;return e&&((n=r(t)?ft(e):ut(e,t))?it=n:"undefined"!=typeof console&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),it._abbr}function ut(e,t){if(null!==t){var n,i=at;if(t.abbr=e,null!=ot[e])E("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),i=ot[e]._config;else if(null!=t.parentLocale)if(null!=ot[t.parentLocale])i=ot[t.parentLocale]._config;else{if(null==(n=lt(t.parentLocale)))return rt[t.parentLocale]||(rt[t.parentLocale]=[]),rt[t.parentLocale].push({name:e,config:t}),null;i=n._config}return ot[e]=new $(T(i,t)),rt[e]&&rt[e].forEach(function(e){ut(e.name,e.config)}),ct(e),ot[e]}return delete ot[e],null}function ft(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return it;if(!a(e)){if(t=lt(e))return t;e=[e]}return function(e){for(var t,n,i,s,a=0;a<e.length;){for(t=(s=dt(e[a]).split("-")).length,n=(n=dt(e[a+1]))?n.split("-"):null;t>0;){if(i=lt(s.slice(0,t).join("-")))return i;if(n&&n.length>=t&&A(s,n,!0)>=t-1)break;t--}a++}return it}(e)}function ht(e){var t,n=e._a;return n&&-2===p(e).overflow&&(t=n[ve]<0||n[ve]>11?ve:n[ye]<1||n[ye]>Oe(n[ge],n[ve])?ye:n[we]<0||n[we]>24||24===n[we]&&(0!==n[be]||0!==n[Se]||0!==n[Me])?we:n[be]<0||n[be]>59?be:n[Se]<0||n[Se]>59?Se:n[Me]<0||n[Me]>999?Me:-1,p(e)._overflowDayOfYear&&(t<ge||t>ye)&&(t=ye),p(e)._overflowWeeks&&-1===t&&(t=Ae),p(e)._overflowWeekday&&-1===t&&(t=De),p(e).overflow=t),e}function pt(e,t,n){return null!=e?e:null!=t?t:n}function mt(e){var t,n,i,a,o,r=[];if(!e._d){for(i=function(e){var t=new Date(s.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}(e),e._w&&null==e._a[ye]&&null==e._a[ve]&&function(e){var t,n,i,s,a,o,r,d;if(null!=(t=e._w).GG||null!=t.W||null!=t.E)a=1,o=4,n=pt(t.GG,e._a[ge],We(It(),1,4).year),i=pt(t.W,1),((s=pt(t.E,1))<1||s>7)&&(d=!0);else{a=e._locale._week.dow,o=e._locale._week.doy;var l=We(It(),a,o);n=pt(t.gg,e._a[ge],l.year),i=pt(t.w,l.week),null!=t.d?((s=t.d)<0||s>6)&&(d=!0):null!=t.e?(s=t.e+a,(t.e<0||t.e>6)&&(d=!0)):s=a}i<1||i>Ve(n,a,o)?p(e)._overflowWeeks=!0:null!=d?p(e)._overflowWeekday=!0:(r=He(n,i,s,a,o),e._a[ge]=r.year,e._dayOfYear=r.dayOfYear)}(e),null!=e._dayOfYear&&(o=pt(e._a[ge],i[ge]),(e._dayOfYear>xe(o)||0===e._dayOfYear)&&(p(e)._overflowDayOfYear=!0),n=je(o,0,e._dayOfYear),e._a[ve]=n.getUTCMonth(),e._a[ye]=n.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=r[t]=i[t];for(;t<7;t++)e._a[t]=r[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[we]&&0===e._a[be]&&0===e._a[Se]&&0===e._a[Me]&&(e._nextDay=!0,e._a[we]=0),e._d=(e._useUTC?je:function(e,t,n,i,s,a,o){var r=new Date(e,t,n,i,s,a,o);return e<100&&e>=0&&isFinite(r.getFullYear())&&r.setFullYear(e),r}).apply(null,r),a=e._useUTC?e._d.getUTCDay():e._d.getDay(),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[we]=24),e._w&&"undefined"!=typeof e._w.d&&e._w.d!==a&&(p(e).weekdayMismatch=!0)}}var _t=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,gt=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,vt=/Z|[+-]\d\d(?::?\d\d)?/,yt=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],wt=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],bt=/^\/?Date\((\-?\d+)/i;function St(e){var t,n,i,s,a,o,r=e._i,d=_t.exec(r)||gt.exec(r);if(d){for(p(e).iso=!0,t=0,n=yt.length;t<n;t++)if(yt[t][1].exec(d[1])){s=yt[t][0],i=!1!==yt[t][2];break}if(null==s)return void(e._isValid=!1);if(d[3]){for(t=0,n=wt.length;t<n;t++)if(wt[t][1].exec(d[3])){a=(d[2]||" ")+wt[t][0];break}if(null==a)return void(e._isValid=!1)}if(!i&&null!=a)return void(e._isValid=!1);if(d[4]){if(!vt.exec(d[4]))return void(e._isValid=!1);o="Z"}e._f=s+(a||"")+(o||""),kt(e)}else e._isValid=!1}var Mt=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/;function At(e,t,n,i,s,a){var o=[function(e){var t=parseInt(e,10);if(t<=49)return 2e3+t;if(t<=999)return 1900+t;return t}(e),Fe.indexOf(t),parseInt(n,10),parseInt(i,10),parseInt(s,10)];return a&&o.push(parseInt(a,10)),o}var Dt={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function xt(e){var t=Mt.exec(e._i.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""));if(t){var n=At(t[4],t[3],t[2],t[5],t[6],t[7]);if(!function(e,t,n){return!e||Ge.indexOf(e)===new Date(t[0],t[1],t[2]).getDay()||(p(n).weekdayMismatch=!0,n._isValid=!1,!1)}(t[1],n,e))return;e._a=n,e._tzm=function(e,t,n){if(e)return Dt[e];if(t)return 0;var i=parseInt(n,10),s=i%100;return(i-s)/100*60+s}(t[8],t[9],t[10]),e._d=je.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),p(e).rfc2822=!0}else e._isValid=!1}function kt(e){if(e._f!==s.ISO_8601)if(e._f!==s.RFC_2822){e._a=[],p(e).empty=!0;var t,n,i,a,o,r=""+e._i,d=r.length,l=0;for(i=V(e._f,e._locale).match(q)||[],t=0;t<i.length;t++)a=i[t],(n=(r.match(ue(a,e))||[])[0])&&((o=r.substr(0,r.indexOf(n))).length>0&&p(e).unusedInput.push(o),r=r.slice(r.indexOf(n)+n.length),l+=n.length),B[a]?(n?p(e).empty=!1:p(e).unusedTokens.push(a),_e(a,n,e)):e._strict&&!n&&p(e).unusedTokens.push(a);p(e).charsLeftOver=d-l,r.length>0&&p(e).unusedInput.push(r),e._a[we]<=12&&!0===p(e).bigHour&&e._a[we]>0&&(p(e).bigHour=undefined),p(e).parsedDateParts=e._a.slice(0),p(e).meridiem=e._meridiem,e._a[we]=function(e,t,n){var i;if(null==n)return t;return null!=e.meridiemHour?e.meridiemHour(t,n):null!=e.isPM?((i=e.isPM(n))&&t<12&&(t+=12),i||12!==t||(t=0),t):t}(e._locale,e._a[we],e._meridiem),mt(e),ht(e)}else xt(e);else St(e)}function Ct(e){var t=e._i,n=e._f;return e._locale=e._locale||ft(e._l),null===t||n===undefined&&""===t?_({nullInput:!0}):("string"==typeof t&&(e._i=t=e._locale.preparse(t)),b(t)?new w(ht(t)):(l(t)?e._d=t:a(n)?function(e){var t,n,i,s,a;if(0===e._f.length)return p(e).invalidFormat=!0,void(e._d=new Date(NaN));for(s=0;s<e._f.length;s++)a=0,t=v({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[s],kt(t),m(t)&&(a+=p(t).charsLeftOver,a+=10*p(t).unusedTokens.length,p(t).score=a,(null==i||a<i)&&(i=a,n=t));f(e,n||t)}(e):n?kt(e):function(e){var t=e._i;r(t)?e._d=new Date(s.now()):l(t)?e._d=new Date(t.valueOf()):"string"==typeof t?function(e){var t=bt.exec(e._i);null===t?(St(e),!1===e._isValid&&(delete e._isValid,xt(e),!1===e._isValid&&(delete e._isValid,s.createFromInputFallback(e)))):e._d=new Date(+t[1])}(e):a(t)?(e._a=c(t.slice(0),function(e){return parseInt(e,10)}),mt(e)):o(t)?function(e){if(!e._d){var t=F(e._i);e._a=c([t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],function(e){return e&&parseInt(e,10)}),mt(e)}}(e):d(t)?e._d=new Date(t):s.createFromInputFallback(e)}(e),m(e)||(e._d=null),e))}function Et(e,t,n,i,s){var r,d={};return!0!==n&&!1!==n||(i=n,n=undefined),(o(e)&&function(e){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(e).length;var t;for(t in e)if(e.hasOwnProperty(t))return!1;return!0}(e)||a(e)&&0===e.length)&&(e=undefined),d._isAMomentObject=!0,d._useUTC=d._isUTC=s,d._l=n,d._i=e,d._f=t,d._strict=i,(r=new w(ht(Ct(d))))._nextDay&&(r.add(1,"d"),r._nextDay=undefined),r}function It(e,t,n,i){return Et(e,t,n,i,!1)}s.createFromInputFallback=x("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),s.ISO_8601=function(){},s.RFC_2822=function(){};var Tt=x("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=It.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:_()}),$t=x("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=It.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:_()});function Ot(e,t){var n,i;if(1===t.length&&a(t[0])&&(t=t[0]),!t.length)return It();for(n=t[0],i=1;i<t.length;++i)t[i].isValid()&&!t[i][e](n)||(n=t[i]);return n}var Pt=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Nt(e){var t=F(e),n=t.year||0,i=t.quarter||0,s=t.month||0,a=t.week||0,o=t.day||0,r=t.hour||0,d=t.minute||0,l=t.second||0,c=t.millisecond||0;this._isValid=function(e){for(var t in e)if(-1===Ce.call(Pt,t)||null!=e[t]&&isNaN(e[t]))return!1;for(var n=!1,i=0;i<Pt.length;++i)if(e[Pt[i]]){if(n)return!1;parseFloat(e[Pt[i]])!==M(e[Pt[i]])&&(n=!0)}return!0}(t),this._milliseconds=+c+1e3*l+6e4*d+1e3*r*60*60,this._days=+o+7*a,this._months=+s+3*i+12*n,this._data={},this._locale=ft(),this._bubble()}function Ft(e){return e instanceof Nt}function Ut(e){return e<0?-1*Math.round(-1*e):Math.round(e)}function Yt(e,t){H(e,0,0,function(){var e=this.utcOffset(),n="+";return e<0&&(e=-e,n="-"),n+R(~~(e/60),2)+t+R(~~e%60,2)})}Yt("Z",":"),Yt("ZZ",""),ce("Z",re),ce("ZZ",re),pe(["Z","ZZ"],function(e,t,n){n._useUTC=!0,n._tzm=qt(re,e)});var Rt=/([\+\-]|\d\d)/gi;function qt(e,t){var n=(t||"").match(e);if(null===n)return null;var i=((n[n.length-1]||[])+"").match(Rt)||["-",0,0],s=60*i[1]+M(i[2]);return 0===s?0:"+"===i[0]?s:-s}function Lt(e,t){var n,i;return t._isUTC?(n=t.clone(),i=(b(e)||l(e)?e.valueOf():It(e).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+i),s.updateOffset(n,!1),n):It(e).local()}function jt(e){return 15*-Math.round(e._d.getTimezoneOffset()/15)}function Bt(){return!!this.isValid()&&(this._isUTC&&0===this._offset)}s.updateOffset=function(){};var Ht=/^(\-|\+)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,Wt=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Vt(e,t){var n,i,s,a=e,o=null;return Ft(e)?a={ms:e._milliseconds,d:e._days,M:e._months}:d(e)?(a={},t?a[t]=e:a.milliseconds=e):(o=Ht.exec(e))?(n="-"===o[1]?-1:1,a={y:0,d:M(o[ye])*n,h:M(o[we])*n,m:M(o[be])*n,s:M(o[Se])*n,ms:M(Ut(1e3*o[Me]))*n}):(o=Wt.exec(e))?(n="-"===o[1]?-1:(o[1],1),a={y:Jt(o[2],n),M:Jt(o[3],n),w:Jt(o[4],n),d:Jt(o[5],n),h:Jt(o[6],n),m:Jt(o[7],n),s:Jt(o[8],n)}):null==a?a={}:"object"==typeof a&&("from"in a||"to"in a)&&(s=function(e,t){var n;if(!e.isValid()||!t.isValid())return{milliseconds:0,months:0};t=Lt(t,e),e.isBefore(t)?n=Gt(e,t):((n=Gt(t,e)).milliseconds=-n.milliseconds,n.months=-n.months);return n}(It(a.from),It(a.to)),(a={}).ms=s.milliseconds,a.M=s.months),i=new Nt(a),Ft(e)&&u(e,"_locale")&&(i._locale=e._locale),i}function Jt(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function Gt(e,t){var n={milliseconds:0,months:0};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function zt(e,t){return function(n,i){var s;return null===i||isNaN(+i)||(E(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),s=n,n=i,i=s),Zt(this,Vt(n="string"==typeof n?+n:n,i),e),this}}function Zt(e,t,n,i){var a=t._milliseconds,o=Ut(t._days),r=Ut(t._months);e.isValid()&&(i=null==i||i,r&&Ue(e,Te(e,"Month")+r*n),o&&$e(e,"Date",Te(e,"Date")+o*n),a&&e._d.setTime(e._d.valueOf()+a*n),i&&s.updateOffset(e,o||r))}Vt.fn=Nt.prototype,Vt.invalid=function(){return Vt(NaN)};var Qt=zt(1,"add"),Kt=zt(-1,"subtract");function Xt(e,t){var n=12*(t.year()-e.year())+(t.month()-e.month()),i=e.clone().add(n,"months");return-(n+(t-i<0?(t-i)/(i-e.clone().add(n-1,"months")):(t-i)/(e.clone().add(n+1,"months")-i)))||0}function en(e){var t;return e===undefined?this._locale._abbr:(null!=(t=ft(e))&&(this._locale=t),this)}s.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",s.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var tn=x("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return e===undefined?this.localeData():this.locale(e)});function nn(){return this._locale}function sn(e,t){H(0,[e,e.length],0,t)}function an(e,t,n,i,s){var a;return null==e?We(this,i,s).year:(t>(a=Ve(e,i,s))&&(t=a),function(e,t,n,i,s){var a=He(e,t,n,i,s),o=je(a.year,0,a.dayOfYear);return this.year(o.getUTCFullYear()),this.month(o.getUTCMonth()),this.date(o.getUTCDate()),this}.call(this,e,t,n,i,s))}H(0,["gg",2],0,function(){return this.weekYear()%100}),H(0,["GG",2],0,function(){return this.isoWeekYear()%100}),sn("gggg","weekYear"),sn("ggggg","weekYear"),sn("GGGG","isoWeekYear"),sn("GGGGG","isoWeekYear"),P("weekYear","gg"),P("isoWeekYear","GG"),Y("weekYear",1),Y("isoWeekYear",1),ce("G",ae),ce("g",ae),ce("GG",K,G),ce("gg",K,G),ce("GGGG",ne,Z),ce("gggg",ne,Z),ce("GGGGG",ie,Q),ce("ggggg",ie,Q),me(["gggg","ggggg","GGGG","GGGGG"],function(e,t,n,i){t[i.substr(0,2)]=M(e)}),me(["gg","GG"],function(e,t,n,i){t[i]=s.parseTwoDigitYear(e)}),H("Q",0,"Qo","quarter"),P("quarter","Q"),Y("quarter",7),ce("Q",J),pe("Q",function(e,t){t[ve]=3*(M(e)-1)}),H("D",["DD",2],"Do","date"),P("date","D"),Y("date",9),ce("D",K),ce("DD",K,G),ce("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient}),pe(["D","DD"],ye),pe("Do",function(e,t){t[ye]=M(e.match(K)[0])});var on=Ie("Date",!0);H("DDD",["DDDD",3],"DDDo","dayOfYear"),P("dayOfYear","DDD"),Y("dayOfYear",4),ce("DDD",te),ce("DDDD",z),pe(["DDD","DDDD"],function(e,t,n){n._dayOfYear=M(e)}),H("m",["mm",2],0,"minute"),P("minute","m"),Y("minute",14),ce("m",K),ce("mm",K,G),pe(["m","mm"],be);var rn=Ie("Minutes",!1);H("s",["ss",2],0,"second"),P("second","s"),Y("second",15),ce("s",K),ce("ss",K,G),pe(["s","ss"],Se);var dn,ln=Ie("Seconds",!1);for(H("S",0,0,function(){return~~(this.millisecond()/100)}),H(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),H(0,["SSS",3],0,"millisecond"),H(0,["SSSS",4],0,function(){return 10*this.millisecond()}),H(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),H(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),H(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),H(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),H(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),P("millisecond","ms"),Y("millisecond",16),ce("S",te,J),ce("SS",te,G),ce("SSS",te,z),dn="SSSS";dn.length<=9;dn+="S")ce(dn,se);function cn(e,t){t[Me]=M(1e3*("0."+e))}for(dn="S";dn.length<=9;dn+="S")pe(dn,cn);var un=Ie("Milliseconds",!1);H("z",0,0,"zoneAbbr"),H("zz",0,0,"zoneName");var fn=w.prototype;function hn(e){return e}fn.add=Qt,fn.calendar=function(e,t){var n=e||It(),i=Lt(n,this).startOf("day"),a=s.calendarFormat(this,i)||"sameElse",o=t&&(I(t[a])?t[a].call(this,n):t[a]);return this.format(o||this.localeData().calendar(a,this,It(n)))},fn.clone=function(){return new w(this)},fn.diff=function(e,t,n){var i,s,a;if(!this.isValid())return NaN;if(!(i=Lt(e,this)).isValid())return NaN;switch(s=6e4*(i.utcOffset()-this.utcOffset()),t=N(t)){case"year":a=Xt(this,i)/12;break;case"month":a=Xt(this,i);break;case"quarter":a=Xt(this,i)/3;break;case"second":a=(this-i)/1e3;break;case"minute":a=(this-i)/6e4;break;case"hour":a=(this-i)/36e5;break;case"day":a=(this-i-s)/864e5;break;case"week":a=(this-i-s)/6048e5;break;default:a=this-i}return n?a:S(a)},fn.endOf=function(e){return(e=N(e))===undefined||"millisecond"===e?this:("date"===e&&(e="day"),this.startOf(e).add(1,"isoWeek"===e?"week":e).subtract(1,"ms"))},fn.format=function(e){e||(e=this.isUtc()?s.defaultFormatUtc:s.defaultFormat);var t=W(this,e);return this.localeData().postformat(t)},fn.from=function(e,t){return this.isValid()&&(b(e)&&e.isValid()||It(e).isValid())?Vt({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},fn.fromNow=function(e){return this.from(It(),e)},fn.to=function(e,t){return this.isValid()&&(b(e)&&e.isValid()||It(e).isValid())?Vt({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},fn.toNow=function(e){return this.to(It(),e)},fn.get=function(e){return I(this[e=N(e)])?this[e]():this},fn.invalidAt=function(){return p(this).overflow},fn.isAfter=function(e,t){var n=b(e)?e:It(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=N(r(t)?"millisecond":t))?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(t).valueOf())},fn.isBefore=function(e,t){var n=b(e)?e:It(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=N(r(t)?"millisecond":t))?this.valueOf()<n.valueOf():this.clone().endOf(t).valueOf()<n.valueOf())},fn.isBetween=function(e,t,n,i){return("("===(i=i||"()")[0]?this.isAfter(e,n):!this.isBefore(e,n))&&(")"===i[1]?this.isBefore(t,n):!this.isAfter(t,n))},fn.isSame=function(e,t){var n,i=b(e)?e:It(e);return!(!this.isValid()||!i.isValid())&&("millisecond"===(t=N(t||"millisecond"))?this.valueOf()===i.valueOf():(n=i.valueOf(),this.clone().startOf(t).valueOf()<=n&&n<=this.clone().endOf(t).valueOf()))},fn.isSameOrAfter=function(e,t){return this.isSame(e,t)||this.isAfter(e,t)},fn.isSameOrBefore=function(e,t){return this.isSame(e,t)||this.isBefore(e,t)},fn.isValid=function(){return m(this)},fn.lang=tn,fn.locale=en,fn.localeData=nn,fn.max=$t,fn.min=Tt,fn.parsingFlags=function(){return f({},p(this))},fn.set=function(e,t){if("object"==typeof e)for(var n=function(e){var t=[];for(var n in e)t.push({unit:n,priority:U[n]});return t.sort(function(e,t){return e.priority-t.priority}),t}(e=F(e)),i=0;i<n.length;i++)this[n[i].unit](e[n[i].unit]);else if(I(this[e=N(e)]))return this[e](t);return this},fn.startOf=function(e){switch(e=N(e)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e&&this.weekday(0),"isoWeek"===e&&this.isoWeekday(1),"quarter"===e&&this.month(3*Math.floor(this.month()/3)),this},fn.subtract=Kt,fn.toArray=function(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]},fn.toObject=function(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}},fn.toDate=function(){return new Date(this.valueOf())},fn.toISOString=function(e){if(!this.isValid())return null;var t=!0!==e,n=t?this.clone().utc():this;return n.year()<0||n.year()>9999?W(n,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):I(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",W(n,"Z")):W(n,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")},fn.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",t="";this.isLocal()||(e=0===this.utcOffset()?"moment.utc":"moment.parseZone",t="Z");var n="["+e+'("]',i=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",s=t+'[")]';return this.format(n+i+"-MM-DD[T]HH:mm:ss.SSS"+s)},fn.toJSON=function(){return this.isValid()?this.toISOString():null},fn.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},fn.unix=function(){return Math.floor(this.valueOf()/1e3)},fn.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},fn.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},fn.year=Ee,fn.isLeapYear=function(){return ke(this.year())},fn.weekYear=function(e){return an.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},fn.isoWeekYear=function(e){return an.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)},fn.quarter=fn.quarters=function(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)},fn.month=Ye,fn.daysInMonth=function(){return Oe(this.year(),this.month())},fn.week=fn.weeks=function(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")},fn.isoWeek=fn.isoWeeks=function(e){var t=We(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")},fn.weeksInYear=function(){var e=this.localeData()._week;return Ve(this.year(),e.dow,e.doy)},fn.isoWeeksInYear=function(){return Ve(this.year(),1,4)},fn.date=on,fn.day=fn.days=function(e){if(!this.isValid())return null!=e?this:NaN;var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=function(e,t){return"string"!=typeof e?e:isNaN(e)?"number"==typeof(e=t.weekdaysParse(e))?e:null:parseInt(e,10)}(e,this.localeData()),this.add(e-t,"d")):t},fn.weekday=function(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")},fn.isoWeekday=function(e){if(!this.isValid())return null!=e?this:NaN;if(null!=e){var t=function(e,t){return"string"==typeof e?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}(e,this.localeData());return this.day(this.day()%7?t:t-7)}return this.day()||7},fn.dayOfYear=function(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")},fn.hour=fn.hours=st,fn.minute=fn.minutes=rn,fn.second=fn.seconds=ln,fn.millisecond=fn.milliseconds=un,fn.utcOffset=function(e,t,n){var i,a=this._offset||0;if(!this.isValid())return null!=e?this:NaN;if(null!=e){if("string"==typeof e){if(null===(e=qt(re,e)))return this}else Math.abs(e)<16&&!n&&(e*=60);return!this._isUTC&&t&&(i=jt(this)),this._offset=e,this._isUTC=!0,null!=i&&this.add(i,"m"),a!==e&&(!t||this._changeInProgress?Zt(this,Vt(e-a,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,s.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?a:jt(this)},fn.utc=function(e){return this.utcOffset(0,e)},fn.local=function(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(jt(this),"m")),this},fn.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var e=qt(oe,this._i);null!=e?this.utcOffset(e):this.utcOffset(0,!0)}return this},fn.hasAlignedHourOffset=function(e){return!!this.isValid()&&(e=e?It(e).utcOffset():0,(this.utcOffset()-e)%60==0)},fn.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},fn.isLocal=function(){return!!this.isValid()&&!this._isUTC},fn.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},fn.isUtc=Bt,fn.isUTC=Bt,fn.zoneAbbr=function(){return this._isUTC?"UTC":""},fn.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},fn.dates=x("dates accessor is deprecated. Use date instead.",on),fn.months=x("months accessor is deprecated. Use month instead",Ye),fn.years=x("years accessor is deprecated. Use year instead",Ee),fn.zone=x("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",function(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}),fn.isDSTShifted=x("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",function(){if(!r(this._isDSTShifted))return this._isDSTShifted;var e={};if(v(e,this),(e=Ct(e))._a){var t=e._isUTC?h(e._a):It(e._a);this._isDSTShifted=this.isValid()&&A(e._a,t.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted});var pn=$.prototype;function mn(e,t,n,i){var s=ft(),a=h().set(i,t);return s[n](a,e)}function _n(e,t,n){if(d(e)&&(t=e,e=undefined),e=e||"",null!=t)return mn(e,t,n,"month");var i,s=[];for(i=0;i<12;i++)s[i]=mn(e,i,n,"month");return s}function gn(e,t,n,i){"boolean"==typeof e?(d(t)&&(n=t,t=undefined),t=t||""):(n=t=e,e=!1,d(t)&&(n=t,t=undefined),t=t||"");var s,a=ft(),o=e?a._week.dow:0;if(null!=n)return mn(t,(n+o)%7,i,"day");var r=[];for(s=0;s<7;s++)r[s]=mn(t,(s+o)%7,i,"day");return r}pn.calendar=function(e,t,n){var i=this._calendar[e]||this._calendar.sameElse;return I(i)?i.call(t,n):i},pn.longDateFormat=function(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e])},pn.invalidDate=function(){return this._invalidDate},pn.ordinal=function(e){return this._ordinal.replace("%d",e)},pn.preparse=hn,pn.postformat=hn,pn.relativeTime=function(e,t,n,i){var s=this._relativeTime[n];return I(s)?s(e,t,n,i):s.replace(/%d/i,e)},pn.pastFuture=function(e,t){var n=this._relativeTime[e>0?"future":"past"];return I(n)?n(t):n.replace(/%s/i,t)},pn.set=function(e){var t,n;for(n in e)I(t=e[n])?this[n]=t:this["_"+n]=t;this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},pn.months=function(e,t){return e?a(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||Pe).test(t)?"format":"standalone"][e.month()]:a(this._months)?this._months:this._months.standalone},pn.monthsShort=function(e,t){return e?a(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[Pe.test(t)?"format":"standalone"][e.month()]:a(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},pn.monthsParse=function(e,t,n){var i,s,a;if(this._monthsParseExact)return function(e,t,n){var i,s,a,o=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],i=0;i<12;++i)a=h([2e3,i]),this._shortMonthsParse[i]=this.monthsShort(a,"").toLocaleLowerCase(),this._longMonthsParse[i]=this.months(a,"").toLocaleLowerCase();return n?"MMM"===t?-1!==(s=Ce.call(this._shortMonthsParse,o))?s:null:-1!==(s=Ce.call(this._longMonthsParse,o))?s:null:"MMM"===t?-1!==(s=Ce.call(this._shortMonthsParse,o))?s:-1!==(s=Ce.call(this._longMonthsParse,o))?s:null:-1!==(s=Ce.call(this._longMonthsParse,o))?s:-1!==(s=Ce.call(this._shortMonthsParse,o))?s:null}.call(this,e,t,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;i<12;i++){if(s=h([2e3,i]),n&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(s,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(s,"").replace(".","")+"$","i")),n||this._monthsParse[i]||(a="^"+this.months(s,"")+"|^"+this.monthsShort(s,""),this._monthsParse[i]=new RegExp(a.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[i].test(e))return i;if(n&&"MMM"===t&&this._shortMonthsParse[i].test(e))return i;if(!n&&this._monthsParse[i].test(e))return i}},pn.monthsRegex=function(e){return this._monthsParseExact?(u(this,"_monthsRegex")||Le.call(this),e?this._monthsStrictRegex:this._monthsRegex):(u(this,"_monthsRegex")||(this._monthsRegex=qe),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)},pn.monthsShortRegex=function(e){return this._monthsParseExact?(u(this,"_monthsRegex")||Le.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(u(this,"_monthsShortRegex")||(this._monthsShortRegex=Re),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)},pn.week=function(e){return We(e,this._week.dow,this._week.doy).week},pn.firstDayOfYear=function(){return this._week.doy},pn.firstDayOfWeek=function(){return this._week.dow},pn.weekdays=function(e,t){return e?a(this._weekdays)?this._weekdays[e.day()]:this._weekdays[this._weekdays.isFormat.test(t)?"format":"standalone"][e.day()]:a(this._weekdays)?this._weekdays:this._weekdays.standalone},pn.weekdaysMin=function(e){return e?this._weekdaysMin[e.day()]:this._weekdaysMin},pn.weekdaysShort=function(e){return e?this._weekdaysShort[e.day()]:this._weekdaysShort},pn.weekdaysParse=function(e,t,n){var i,s,a;if(this._weekdaysParseExact)return function(e,t,n){var i,s,a,o=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],i=0;i<7;++i)a=h([2e3,1]).day(i),this._minWeekdaysParse[i]=this.weekdaysMin(a,"").toLocaleLowerCase(),this._shortWeekdaysParse[i]=this.weekdaysShort(a,"").toLocaleLowerCase(),this._weekdaysParse[i]=this.weekdays(a,"").toLocaleLowerCase();return n?"dddd"===t?-1!==(s=Ce.call(this._weekdaysParse,o))?s:null:"ddd"===t?-1!==(s=Ce.call(this._shortWeekdaysParse,o))?s:null:-1!==(s=Ce.call(this._minWeekdaysParse,o))?s:null:"dddd"===t?-1!==(s=Ce.call(this._weekdaysParse,o))?s:-1!==(s=Ce.call(this._shortWeekdaysParse,o))?s:-1!==(s=Ce.call(this._minWeekdaysParse,o))?s:null:"ddd"===t?-1!==(s=Ce.call(this._shortWeekdaysParse,o))?s:-1!==(s=Ce.call(this._weekdaysParse,o))?s:-1!==(s=Ce.call(this._minWeekdaysParse,o))?s:null:-1!==(s=Ce.call(this._minWeekdaysParse,o))?s:-1!==(s=Ce.call(this._weekdaysParse,o))?s:-1!==(s=Ce.call(this._shortWeekdaysParse,o))?s:null}.call(this,e,t,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),i=0;i<7;i++){if(s=h([2e3,1]).day(i),n&&!this._fullWeekdaysParse[i]&&(this._fullWeekdaysParse[i]=new RegExp("^"+this.weekdays(s,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[i]=new RegExp("^"+this.weekdaysShort(s,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[i]=new RegExp("^"+this.weekdaysMin(s,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[i]||(a="^"+this.weekdays(s,"")+"|^"+this.weekdaysShort(s,"")+"|^"+this.weekdaysMin(s,""),this._weekdaysParse[i]=new RegExp(a.replace(".",""),"i")),n&&"dddd"===t&&this._fullWeekdaysParse[i].test(e))return i;if(n&&"ddd"===t&&this._shortWeekdaysParse[i].test(e))return i;if(n&&"dd"===t&&this._minWeekdaysParse[i].test(e))return i;if(!n&&this._weekdaysParse[i].test(e))return i}},pn.weekdaysRegex=function(e){return this._weekdaysParseExact?(u(this,"_weekdaysRegex")||Xe.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(u(this,"_weekdaysRegex")||(this._weekdaysRegex=Ze),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)},pn.weekdaysShortRegex=function(e){return this._weekdaysParseExact?(u(this,"_weekdaysRegex")||Xe.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(u(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Qe),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},pn.weekdaysMinRegex=function(e){return this._weekdaysParseExact?(u(this,"_weekdaysRegex")||Xe.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(u(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Ke),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},pn.isPM=function(e){return"p"===(e+"").toLowerCase().charAt(0)},pn.meridiem=function(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"},ct("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===M(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}}),s.lang=x("moment.lang is deprecated. Use moment.locale instead.",ct),s.langData=x("moment.langData is deprecated. Use moment.localeData instead.",ft);var vn=Math.abs;function yn(e,t,n,i){var s=Vt(t,n);return e._milliseconds+=i*s._milliseconds,e._days+=i*s._days,e._months+=i*s._months,e._bubble()}function wn(e){return e<0?Math.floor(e):Math.ceil(e)}function bn(e){return 4800*e/146097}function Sn(e){return 146097*e/4800}function Mn(e){return function(){return this.as(e)}}var An=Mn("ms"),Dn=Mn("s"),xn=Mn("m"),kn=Mn("h"),Cn=Mn("d"),En=Mn("w"),In=Mn("M"),Tn=Mn("y");function $n(e){return function(){return this.isValid()?this._data[e]:NaN}}var On=$n("milliseconds"),Pn=$n("seconds"),Nn=$n("minutes"),Fn=$n("hours"),Un=$n("days"),Yn=$n("months"),Rn=$n("years");var qn=Math.round,Ln={ss:44,s:45,m:45,h:22,d:26,M:11};var jn=Math.abs;function Bn(e){return(e>0)-(e<0)||+e}function Hn(){if(!this.isValid())return this.localeData().invalidDate();var e,t,n=jn(this._milliseconds)/1e3,i=jn(this._days),s=jn(this._months);t=S((e=S(n/60))/60),n%=60,e%=60;var a=S(s/12),o=s%=12,r=i,d=t,l=e,c=n?n.toFixed(3).replace(/\.?0+$/,""):"",u=this.asSeconds();if(!u)return"P0D";var f=u<0?"-":"",h=Bn(this._months)!==Bn(u)?"-":"",p=Bn(this._days)!==Bn(u)?"-":"",m=Bn(this._milliseconds)!==Bn(u)?"-":"";return f+"P"+(a?h+a+"Y":"")+(o?h+o+"M":"")+(r?p+r+"D":"")+(d||l||c?"T":"")+(d?m+d+"H":"")+(l?m+l+"M":"")+(c?m+c+"S":"")}var Wn=Nt.prototype;return Wn.isValid=function(){return this._isValid},Wn.abs=function(){var e=this._data;return this._milliseconds=vn(this._milliseconds),this._days=vn(this._days),this._months=vn(this._months),e.milliseconds=vn(e.milliseconds),e.seconds=vn(e.seconds),e.minutes=vn(e.minutes),e.hours=vn(e.hours),e.months=vn(e.months),e.years=vn(e.years),this},Wn.add=function(e,t){return yn(this,e,t,1)},Wn.subtract=function(e,t){return yn(this,e,t,-1)},Wn.as=function(e){if(!this.isValid())return NaN;var t,n,i=this._milliseconds;if("month"===(e=N(e))||"year"===e)return t=this._days+i/864e5,n=this._months+bn(t),"month"===e?n:n/12;switch(t=this._days+Math.round(Sn(this._months)),e){case"week":return t/7+i/6048e5;case"day":return t+i/864e5;case"hour":return 24*t+i/36e5;case"minute":return 1440*t+i/6e4;case"second":return 86400*t+i/1e3;case"millisecond":return Math.floor(864e5*t)+i;default:throw new Error("Unknown unit "+e)}},Wn.asMilliseconds=An,Wn.asSeconds=Dn,Wn.asMinutes=xn,Wn.asHours=kn,Wn.asDays=Cn,Wn.asWeeks=En,Wn.asMonths=In,Wn.asYears=Tn,Wn.valueOf=function(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*M(this._months/12):NaN},Wn._bubble=function(){var e,t,n,i,s,a=this._milliseconds,o=this._days,r=this._months,d=this._data;return a>=0&&o>=0&&r>=0||a<=0&&o<=0&&r<=0||(a+=864e5*wn(Sn(r)+o),o=0,r=0),d.milliseconds=a%1e3,e=S(a/1e3),d.seconds=e%60,t=S(e/60),d.minutes=t%60,n=S(t/60),d.hours=n%24,r+=s=S(bn(o+=S(n/24))),o-=wn(Sn(s)),i=S(r/12),r%=12,d.days=o,d.months=r,d.years=i,this},Wn.clone=function(){return Vt(this)},Wn.get=function(e){return e=N(e),this.isValid()?this[e+"s"]():NaN},Wn.milliseconds=On,Wn.seconds=Pn,Wn.minutes=Nn,Wn.hours=Fn,Wn.days=Un,Wn.weeks=function(){return S(this.days()/7)},Wn.months=Yn,Wn.years=Rn,Wn.humanize=function(e){if(!this.isValid())return this.localeData().invalidDate();var t=this.localeData(),n=function(e,t,n){var i=Vt(e).abs(),s=qn(i.as("s")),a=qn(i.as("m")),o=qn(i.as("h")),r=qn(i.as("d")),d=qn(i.as("M")),l=qn(i.as("y")),c=s<=Ln.ss&&["s",s]||s<Ln.s&&["ss",s]||a<=1&&["m"]||a<Ln.m&&["mm",a]||o<=1&&["h"]||o<Ln.h&&["hh",o]||r<=1&&["d"]||r<Ln.d&&["dd",r]||d<=1&&["M"]||d<Ln.M&&["MM",d]||l<=1&&["y"]||["yy",l];return c[2]=t,c[3]=+e>0,c[4]=n,function(e,t,n,i,s){return s.relativeTime(t||1,!!n,e,i)}.apply(null,c)}(this,!e,t);return e&&(n=t.pastFuture(+this,n)),t.postformat(n)},Wn.toISOString=Hn,Wn.toString=Hn,Wn.toJSON=Hn,Wn.locale=en,Wn.localeData=nn,Wn.toIsoString=x("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Hn),Wn.lang=tn,H("X",0,0,"unix"),H("x",0,0,"valueOf"),ce("x",ae),ce("X",/[+-]?\d+(\.\d{1,3})?/),pe("X",function(e,t,n){n._d=new Date(1e3*parseFloat(e,10))}),pe("x",function(e,t,n){n._d=new Date(M(e))}),s.version="2.22.2",n=It,s.fn=fn,s.min=function(){return Ot("isBefore",[].slice.call(arguments,0))},s.max=function(){return Ot("isAfter",[].slice.call(arguments,0))},s.now=function(){return Date.now?Date.now():+new Date},s.utc=h,s.unix=function(e){return It(1e3*e)},s.months=function(e,t){return _n(e,t,"months")},s.isDate=l,s.locale=ct,s.invalid=_,s.duration=Vt,s.isMoment=b,s.weekdays=function(e,t,n){return gn(e,t,n,"weekdays")},s.parseZone=function(){return It.apply(null,arguments).parseZone()},s.localeData=ft,s.isDuration=Ft,s.monthsShort=function(e,t){return _n(e,t,"monthsShort")},s.weekdaysMin=function(e,t,n){return gn(e,t,n,"weekdaysMin")},s.defineLocale=ut,s.updateLocale=function(e,t){if(null!=t){var n,i,s=at;null!=(i=lt(e))&&(s=i._config),(n=new $(t=T(s,t))).parentLocale=ot[e],ot[e]=n,ct(e)}else null!=ot[e]&&(null!=ot[e].parentLocale?ot[e]=ot[e].parentLocale:null!=ot[e]&&delete ot[e]);return ot[e]},s.locales=function(){return k(ot)},s.weekdaysShort=function(e,t,n){return gn(e,t,n,"weekdaysShort")},s.normalizeUnits=N,s.relativeTimeRounding=function(e){return e===undefined?qn:"function"==typeof e&&(qn=e,!0)},s.relativeTimeThreshold=function(e,t){return Ln[e]!==undefined&&(t===undefined?Ln[e]:(Ln[e]=t,"s"===e&&(Ln.ss=t-1),!0))},s.calendarFormat=function(e,t){var n=e.diff(t,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"},s.prototype=fn,s.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"YYYY-[W]WW",MONTH:"YYYY-MM"},s})}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/moment/moment.js","/node_modules/moment")},{_process:65,buffer:63}],common_api:[function(e,t,n){(function(n,s,a,o,r,d,l,c,u){var f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p=e("./api_endpoints"),m=e("./method_endpoints"),g=0,v=null;"undefined"==typeof jiffle?(window.jiffle={},"undefined"!=typeof JNBookMeeting?(jiffle.JNBookMeeting=JNBookMeeting,jiffleSFObj="JNBookMeeting"):"undefined"!=typeof JNEventMeetingList&&(jiffle.JNEventMeetingList=JNEventMeetingList,jiffleSFObj="JNEventMeetingList")):jiffle.hasOwnProperty("JNEventMeetingList")?jiffleSFObj="JNEventMeetingList":jiffle.hasOwnProperty("JNBookMeeting")&&(jiffleSFObj="JNBookMeeting"),$(document).ready(function(){$("#cover").fadeIn(),v=$.urlParam("current_location_uuid"),$(window).on("load",function(){$("#cover").fadeIn()}),$.urlParam=function(e,t){var n=t||window.location.href,i=new RegExp("[?&]"+e+"=([^&#]*)").exec(n);return null==i?"":i[1]||0};var e=y.fetch({url:y.ENDPOINTS.get_nav_header});e.then(function(e){var t=HandlebarsTemplates["sfdc/nav-header"]({headerLinks:e.data.links});$("#sfdc_navbar_set").remove(),!$(".navbar-set-wrapper").length&&$("#sf-jiffle-now").prepend(t)}),e["catch"](function(e){this.showError(e)}.bind(this))});var y={ENDPOINTS:p,update:function(e){e.data&&e.data.constructor===FormData?e.data.append("current_location_uuid",envDetails.current_location_uuid||v):_.merge(e,{data:{current_location_uuid:envDetails.current_location_uuid||v}});var t=new Promise(function(t,n){g++,/^https?/.test(e.url)?e.sfdc_method?y.parseUrlMethod(e,t,n):($("#cover").fadeIn(),y.makeJNCall("doJNPost",JSON.stringify(e),t,n)):y.parseUrlMethod(e,t,n)});return t.then(function(e,t){--g||$("#cover").fadeOut()}.bind(this)),t[t.fail?"fail":"catch"](function(e){--g||$("#cover").fadeOut()}.bind(this)),t},replaceUrlParams:function(){var e=_.cloneDeep(arguments[0]);for("object"!==(void 0===e?"undefined":h(e))&&(e={url:e}),i=1;i<arguments.length;i++)e.url=e.url.replace(arguments[i][0],arguments[i][1]);return e},fetch:function(e){_.merge(e,{data:{current_location_uuid:envDetails.current_location_uuid||v}});var t=new Promise(function(t,n){g++,$("#cover").fadeIn(),e.url&&e.url.includes("/domains/validate")&&(e.url="/portal/domains/validate"),y.parseUrlMethod(e,t,n)});return t.then(function(e){0===--g&&window.setTimeout(function(){0===g&&$("#cover").fadeOut()},500)}.bind(this)),t[t.fail?"fail":"catch"](function(e){0===--g&&$("#cover").fadeOut()}.bind(this)),t},parseUrlMethod:function(e,t,n){var i="";$.isEmptyObject(e.data)||(i="SFDC"===e.url||"/fetch_sfdc_contacts_fields"===e.url?e.data:$.param({api_params:e.data}),"/user/create"!==e.url&&"/group_nomination/can_attend"!==e.url&&"/sync_att_to_sfdc"!==e.url&&"/portal/consent.json"!==e.url||(i=JSON.stringify({api_params:e.data}))),e.prefix&&(e.url=e.prefix+e.url);var s={queryStr:i,url:e.url,eventName:e.url.includes("/portal")?"":$.urlParam("eventName")},a=_.invert(y.ENDPOINTS)[e.url]||e.sfdc_method,o=m[a]||{},r=o.sfdcMethod||"callJNMethod",d=o.params?o.params(e):{},l=_.assign(s,d),c=o.callback;y.makeJNCall(r,l,t,n,c)},makeJNCall:function(e,t,n,i,s){jiffle[jiffleSFObj][e](t,function(e,t){y.handleSessionExpiry(t);var a={responseJSON:{}};"string"!=typeof e&&(e=JSON.stringify(e));var o=JSON.parse(_.unescape(e));200===t.statusCode?(void 0!==s&&o.data&&(o=s(o)),o.status||o.success?200===o.status||o.success?n(o):(a.responseJSON=o,i(a)):o.error&&!_.isEmpty(o.error)?(a.responseJSON=o,i(a)):n(o)):(a.responseJSON=o,i(o))})},hasSessionExpired:function(e){return"exception"===e.type&&e.message&&-1!=e.message.indexOf("Logged in?")},handleSessionExpiry:function(e){var t=function(){return window.location.reload()};y.hasSessionExpired(e)&&(setTimeout(t,3e3),$(".notification-modal").notificationModal({"class":"red",title:"Information",body:"You have been logged out",dismiss:t}))},sfdcHandler:{meetingInit:function(e){var t=y.fetch({url:y.ENDPOINTS.event_env_details});t.then(function(t){window.envDetails={},envDetails.event=t.data.event,envDetails.currentMeetingUuid=t.data.new_meeting_uuid,envDetails.canShowAttachmentsField=!1,envDetails.currentUser=t.data.current_user,envDetails.current_location=t.data.current_location,envDetails.current_location_uuid=t.data.current_location_uuid||v,envDetails.isCSM=function(){return t.data.isCSM},envDetails.isMeetingManager=function(){return t.data.isMeetingManager},envDetails.isEBCEvent=function(){return t.data.isEBCEvent},envDetails.isJuniorMM=function(){return t.data.isJuniorMM},envDetails.isQueueManager=function(){return t.data.isQueueManager},envDetails.isActivityManager=function(){return t.data.isActivityManager},envDetails.isExecutiveAdmin=function(){return t.data.isExecutiveAdmin},window.isEBCEvent=t.data.isEBCEvent,window.event_home_page=!1,this.displayEventName(),this.fetchMeetingActivities(e)}.bind(this)),t["catch"](function(e){this.showError(e)}.bind(this))},fetchMeetingActivities:function(e){var t="";$.urlParam("accid")?t="accFlow":$.urlParam("lead_ids")&&(t="leadFlow"),y.fetch({url:y.ENDPOINTS.fetch_activities,data:{source:t}}).then(function(t){window.activties_attributes=t.data.meeting_types,"function"==typeof e&&e()})},bookMeetingInit:function(e,t){meetingInfo={account_id:"",requestors:[],externalAttendees:{},selectedRequestor:"",domain_validate_url:"",request:{mode:"new",meeting_with:"",custom_fields:{},showCancel:!1}},envDetails={companyName:"",currentManagedUser:"",currentUser:{first_name:"",last_name:""}};var n=y.fetch({url:e.url,data:{activity_uuid:$.urlParam("activity_uuid"),topic_uuid:$.urlParam("topic_uuid")}});n.then(function(n){var i=n;i.hasOwnProperty("data")&&(i=i.data),n.data.current_user.consent_given?($("#sf-jiffle-now").removeClass("hide"),meetingInfo.requestors=i.requestors,meetingInfo.selected_requestor=i.selected_requestor,meetingInfo.domainValidateUrl=i.domain_validate_url,meetingInfo.request=$.extend(meetingInfo.request,i.meeting||i.nomination),meetingInfo.request.topic_management=n.data.topic,window.actions_on_behalf=i.actions_on_behalf,window.isEBCEvent=n.data.isEBCEvent||!1,window.isOngoingSales=n.data.isOngoingSales||!1,window.selectedActivityUuid=$.urlParam("activity_uuid")||n.data.selectedActivityUuid,envDetails.currentMeetingUuid=n.data.new_meeting_uuid,envDetails.canShowAttachmentsField=!1,"edit"===e.mode?(meetingInfo.request.mode=i.mode,meetingInfo.request.showCancel=i.show_cancel_meeting,meetingInfo.request.end_time=moment(meetingInfo.request.end_time).utc().format("DD-MM-YYYY HH:mm"),meetingInfo.request.start_time=moment(meetingInfo.request.start_time).utc().format("DD-MM-YYYY HH:mm"),envDetails.currentMeetingUuid=meetingInfo.request.uuid):"view"===e.mode&&(meetingInfo.request.mode="view",envDetails.currentMeetingUuid=meetingInfo.request.uuid,meetingInfo.request.end_time=moment(meetingInfo.request.end_time).utc().format("DD-MM-YYYY HH:mm"),meetingInfo.request.start_time=moment(meetingInfo.request.start_time).utc().format("DD-MM-YYYY HH:mm")),envDetails.currentManagedUser=i.current_managed_user,envDetails.currentUser=i.current_user,envDetails.role_uuid=i.role_uuid,envDetails.companyName=i.event.company_display_name,envDetails.event=i.event,envDetails.current_location=i.current_location,envDetails.current_location_uuid=i.current_location_uuid||v,envDetails.enable_meeting_host=i.enable_meeting_host,envDetails.meeting_host_label=i.meeting_host_label,envDetails.assign_requestors_as_meeting_host_by_default=i.assign_requestors_as_meeting_host_by_default,envDetails.assign_mapped_user_as_meeting_host_by_default=i.assign_mapped_user_as_meeting_host_by_default,envDetails.isExecutiveAdmin=function(){return i.isExecutiveAdmin},envDetails.isMeetingManager=function(){return i.isMeetingManager},envDetails.isQueueManager=function(){return i.isQueueManager},envDetails.isCSM=function(){return i.isCSM},envDetails.isJuniorMM=function(){return i.isJuniorMM},rails_to_html={activity_name:n.data.selectedActivityName||"",topic_config:{topic_management_enabled:i.topic_management_enabled||!1}},briefing_uuid=i.briefing_uuid||undefined,mappingEnabled=i.mappingEnabled||!1,envDetails.syncContactsToSfdc=i.syncContactsToSfdc||!1,envDetails.syncContactsToSfdcOpportunity=i.syncContactsToSfdcOpportunity||!1,envDetails.syncLeadsToSfdc=i.syncLeadsToSfdc||!1,envDetails.hideOpportunityInAccountsFlow=i.hideOpportunityInAccountsFlow||!1,envDetails.hideOpportunityInJNMeetingFlow=i.hideOpportunityInJNMeetingFlow||!1,envDetails.showJifflenowExternalAttendees=i.showAllExternalAttendees||i.showRegisteredExternalAttendees||!1,envDetails.topicManagementEnabled=i.topic_management_enabled||!1,envDetails.topicRoomMappingEnabled=i.topic_room_mapping_enabled||!1,envDetails.topicUserMappingEnabled=i.topic_user_mapping_enabled||!1,envDetails.topicActivitiesMappingEnabled=i.topic_activities_mapping_enabled||!1,envDetails.allowUserToAddNewExternalAttendee=i.allowUserToAddNewExternalAttendee||!1,envDetails.allowRequestorToAddInternalAttendee=i.allowRequestorToAddInternalAttendee||!1,envDetails.canUserChangeSelfAttendance=i.can_user_change_self_attendance||!1,envDetails.briefingAndMeetingRequestorSame=i.briefingAndMeetingRequestorSame,envDetails.capture_consent=i.capture_consent,envDetails.consent_mandatory=i.consent_mandatory,envDetails.add_user_consent_message=i.add_user_consent_message,envDetails.can_edit_time=i.can_edit_briefing_meeting_time,bam_uuid=i.bam_uuid,window.masterMeetingType=i.meeting_type_master,window.bookSession=i.book_session,window.TRACK_AND_SESSION=i.TRACK_AND_SESSION,window.nominationInfo=meetingInfo,window.mapping_module=!1,window.selectedActivityName=n.data.selectedActivityName,envDetails.sfdcCustomLabels=n.data.sfdc_custom_labels,this.displayEventName(),this.displayConsentCheck(i),this.mergeExternalAttendeesInfoFromSF().then(function(){return t()})):this.showConsentForm(n.data)}.bind(this)),n["catch"](function(e){this.showError(e)}.bind(this))},displayConsentCheck:function(){var e=$(".js-termsandcondition");envDetails.capture_consent&&e.removeClass("hide"),envDetails.consent_mandatory&&e.addClass("required"),envDetails.add_user_consent_message&&e.find("label.add_user_consent_message").html(envDetails.add_user_consent_message)},displayEventName:function(){$(".js-event-display-name").text(envDetails.event.name)},fetchLeadDetails:function(){var e=unescape($.urlParam("lead_ids")).split(","),t=this.fetchLeadsDetailsFromSF(e);return t.then(function(e){meetingInfo.request.users={internal:[],external:e.data.items}}),t},EventInit:function(e){var t=y.fetch({url:y.ENDPOINTS.user_info});t.then(function(t){t.data.current_user.consent_given?($("#sf-jiffle-now").removeClass("hide"),window.envDetails={},window.isEBCEvent=t.data.isEBCEvent||!1,envDetails.currentUser=t.data.current_user,envDetails.isCSM=function(){return t.data.isCSM},envDetails.isMeetingManager=function(){return t.data.isMeetingManager},envDetails.isAccountManager=function(){return t.data.isAccountManager},_.isEmpty($.urlParam("lead_ids"))&&"leadFlow"!==$.urlParam("source")?e():this.validateLeads(e)):this.showConsentForm(t.data)}.bind(this)),t["catch"](function(e){this.showError(e)}.bind(this))},validateLeads:function(e){y.fetch({url:y.ENDPOINTS.validate_leads,data:{leadIds:unescape($.urlParam("lead_ids")).split(",")}}).then(function(t){t.data.is_valid?e():$(".notification-modal").notificationModal({"class":"red",title:"Information",body:t.data.message,dismiss:function(){commons.redirectPage(t.data.redirect_url)}})})},showConsentForm:function(t){$("#sf-jiffle-consent").removeClass("hide"),e("../../Consent/app")(t)},showError:function(e){var t=[];t=e.responseJSON.error&&"string"==typeof e.responseJSON.error?[e.responseJSON.error]:_.flatten(_.values(e.responseJSON.errors)),$(".notification-modal").notificationModal({"class":"red",timeout:!0,title:"Information",body:t.join(", ")}),$("#cover").fadeOut()},mergeExternalAttendeesInfoFromSF:function(){var e=this,t=window.meetingInfo.request,n=t.users||{};return new Promise(function(i,s){n.external&&n.external.length?_.isEmpty(t.custom_fields&&t.custom_fields.meeting_lead_id)?e.mergeContacts().then(function(){return i()}):e.mergeLeads().then(function(){return i()}):i()})},mergeContacts:function(){var e=this,t=this.getContactIds(),n=window.meetingInfo.request;return new Promise(function(i,s){t.length?e.fetchContactsDetailsFromSF({contactIds:t,accountID:n.custom_fields&&n.custom_fields.meeting_account_id}).then(function(t){return e.mergeExtAttWithInfoFromSF(t.data.items)}).then(function(){return i()}):i()})},mergeLeads:function(){var e=this,t=this.getLeadIds();return new Promise(function(n,i){t.length?e.fetchLeadsDetailsFromSF(t).then(function(t){return e.mergeExtAttWithInfoFromSF(t.data.items)}).then(function(){return n()}):n()})},fetchLeadsDetailsFromSF:function(e){return y.fetch({url:y.ENDPOINTS.lead_details,data:{leadIds:e}})},fetchContactsDetailsFromSF:function(e){var t=e.contactIds,n=e.accountID;return y.fetch({url:y.ENDPOINTS.fetch_contacts,data:{contactIds:t,account_id:n}})},mergeExtAttWithInfoFromSF:function(e){return new Promise(function(t,n){var i=_.groupBy(e,"email"),s=window.meetingInfo.request.users.external;window.meetingInfo.request.users.external=s.map(function(e){var t=i[e.email];return t&&(e=f({},e,t[0])),e}),t()})},getLeadIds:function(){return this.getContOrLeadIds("sfdc_lead_id")},getContactIds:function(){return this.getContOrLeadIds("sfdc_contact_id")},getContOrLeadIds:function(e){return window.meetingInfo.request.users.external.map(function(t){return t.meta_info&&t.meta_info[e]}).filter(function(e){return e!==undefined})}}};t.exports=y}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/app/scripts/commons/sfdc/api.js","/app/scripts/commons/sfdc")},{"../../Consent/app":4,"./api_endpoints":57,"./method_endpoints":58,_process:65,buffer:63}]},{},[1]);